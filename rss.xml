<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>老方</title>
        <link>https://kuizuo.cn/</link>
        <description>老方的站 Blog</description>
        <lastBuildDate>Mon, 16 May 2022 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh</language>
        <copyright>Copyright © 2022 隔壁老方 Built with Docusaurus.</copyright>
        <item>
            <title><![CDATA[找实习真难呀！]]></title>
            <link>https://kuizuo.cn/test-blog</link>
            <guid>test-blog</guid>
            <pubDate>Mon, 16 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[是不是每次面试没通过都会有这样的感觉？作为一名程序员，每次面试的时候都觉得准备不充分，面试资料多的看不完，实战经验也不够，即使自认为准备的很充分了，最后还是栽了，到底是因为自己菜，还是自己菜，还是自己菜呢？要回答这个问题，我们得先知道面试到底在面什么。]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="面试" src="/assets/images/interview-e9af2bc5964a2ca04232e1b6a1b42b55.webp" width="1920" height="1280" class="img_ev3q"></p><p>是不是每次面试没通过都会有这样的感觉？作为一名程序员，每次面试的时候都觉得准备不充分，面试资料多的看不完，实战经验也不够，即使自认为准备的很充分了，最后还是栽了，到底是因为自己菜，还是自己菜，还是自己菜呢？要回答这个问题，我们得先知道面试到底在面什么。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="面试在面什么">面试在面什么？<a class="hash-link" href="#面试在面什么" title="标题的直接链接">​</a></h2>]]></content:encoded>
            <category>职业</category>
            <category>面试</category>
            <category>经验</category>
        </item>
        <item>
            <title><![CDATA[Vercel部署个人博客]]></title>
            <link>https://kuizuo.cn/vercel-deploy-blog</link>
            <guid>vercel-deploy-blog</guid>
            <pubDate>Wed, 11 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220511170700075]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511170700075.png" alt="image-20220511170700075" class="img_ev3q"></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>观前提醒</h5></div><div class="admonition-content"><p>vercel 部署静态资源网站极其<strong>方便简单</strong>，并且有可观的<strong>访问速度</strong>，最主要的是<strong>免费部署</strong>。</p><p>如果你还没有尝试的话，强烈建议去使用一下。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vercel-介绍"><a href="https://zhuanlan.zhihu.com/p/452654619" target="_blank" rel="noopener noreferrer">vercel 介绍</a><a class="hash-link" href="#vercel-介绍" title="标题的直接链接">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="注册账号">注册账号<a class="hash-link" href="#注册账号" title="标题的直接链接">​</a></h2><p>进入<a href="https://vercel.com" target="_blank" rel="noopener noreferrer">Vercel</a>官网，先去注册一个账号，建议注册一个<a href="https://github.com/" target="_blank" rel="noopener noreferrer">Github</a>账号后，使用 GIthub 账号来登录 Vercel。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署网站">部署网站<a class="hash-link" href="#部署网站" title="标题的直接链接">​</a></h2><p>进入 <a href="https://vercel.com/dashboard" target="_blank" rel="noopener noreferrer">Dashboard</a></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511170233559.png" alt="image-20220511170233559" class="img_ev3q"></p><p>点击 <a href="https://vercel.com/new" target="_blank" rel="noopener noreferrer">New Project</a></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511165902993.png" alt="image-20220511165902993" class="img_ev3q"></p><p>这里可以从已有的 git repository 中导入，也可以选择一个模板。</p><p>这里登录我的 Github 账号选择仓库，然后点击 blog 仓库旁的 Import 即可。当然，你也可以直接拉取我的仓库，仓库地址：<a href="https://github.com/kuizuo/blog" target="_blank" rel="noopener noreferrer">https://github.com/kuizuo/blog</a></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511165513526.png" alt="image-20220511165513526" class="img_ev3q"></p><p>点击 Deploy，然后静等网站安装依赖以及部署，稍后将会出现下方页面。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511170700075.png" alt="image-20220511170700075" class="img_ev3q"></p><p>此时网站已经成功搭建完毕了，点击图片即可跳转到 vercel 所提供的二级域名访问。</p><p>是不是极其简单？甚至不需要你输入任何命令，便可访问构建好的网站。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="自定义域名">自定义域名<a class="hash-link" href="#自定义域名" title="标题的直接链接">​</a></h2><p>如果有自己的域名，还可以在 vercel 中进行设置。</p><p>首先进入 blog 的控制台，在 Settings -&gt; Domains 添加域名。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511171144240.png" alt="image-20220511171144240" class="img_ev3q"></p><p>接着提示域名需要 DNS 解析到 vercel 提供的记录值</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511171359148.png" alt="image-20220511171359148" class="img_ev3q"></p><p>登录所在的域名服务商，根据 Vercel 提供的记录值 cname.vercel-dns.com，添加两条记录</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511172741663.png" alt="image-20220511172741663" class="img_ev3q"></p><p>此时回到 Vercel，可以看到记录值成功生效。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511172027570.png" alt="image-20220511172027570" class="img_ev3q"></p><p>此时访问自己的域名，同样也能访问到页面，同时还有可观的访问速度。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动颁发-ssl-证书">自动颁发 SSL 证书<a class="hash-link" href="#自动颁发-ssl-证书" title="标题的直接链接">​</a></h3><p>默认状态下，Vercel 将会颁发并自动更新 SSL 证书。（着实方便，不用自己手动去申请证书，同时配置证书）</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511172240999.png" alt="image-20220511172240999" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="持续集成ci持续部署cd">持续集成（CI）/持续部署（CD）<a class="hash-link" href="#持续集成ci持续部署cd" title="标题的直接链接">​</a></h2><blockquote><p>To update your Production Deployment, push to the "main" branch.</p></blockquote><p>当主分支有代码被推送，Vercel 将会重新拉取代码，并重新构建进行单元测试与部署（构建速度可观）</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220511173442694.png" alt="image-20220511173442694" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="serverless">Serverless<a class="hash-link" href="#serverless" title="标题的直接链接">​</a></h2><p>同时 vercel 还支持 serverless，也就是说，不仅能部署静态站点，还能部署后端服务，不过肯定有一定的限制。</p><p><a href="/develop/Vercel部署Serverless">Vercel 部署 Serverless</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vercel-cli">Vercel CLI<a class="hash-link" href="#vercel-cli" title="标题的直接链接">​</a></h2><p>有时候并不想登录网页，然后新建项目，选择仓库，拉取部署，而是希望直接在项目下输入命令来完成部署。vercel 自然肯定提供相对应的脚手架 <strong><a href="https://vercel.com/docs/cli" target="_blank" rel="noopener noreferrer">CLI</a></strong> 供开发者使用。</p><p>安装</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm i -g vercel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在项目根目录中输入</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">vercel --prod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>第一次将进行登录授权，选择对应平台，将会自动打开浏览器完成授权，接着将会确认一些信息，一般默认回车即可，下为执行结果</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">Vercel CLI 24.2.1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Set up and deploy “F:\Project\React\online-tools”? [Y/n] y</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Which scope do you want to deploy to? kuizuo</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Link to existing project? [y/N] n</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? What’s your project’s name? online-tools</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? In which directory is your code located? ./</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Auto-detected Project Settings (Create React App):</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">- Build Command: react-scripts build</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">- Output Directory: build</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">- Development Command: react-scripts start</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Want to override the settings? [y/N] n</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">🔗  Linked to kuizuo12/online-tools (created .vercel and added it to .gitignore)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">🔍  Inspect: https://vercel.com/kuizuo12/online-tools/6t8Vt8rG3waGVHTKU7ZzJuGc6Hoq [2s]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">✅  Production: https://online-tools-phi.vercel.app [copied to clipboard] [2m]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">📝  Deployed to production. Run `vercel --prod` to overwrite later (https://vercel.link/2F).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">💡  To change the domain or build command, go to https://vercel.com/kuizuo12/online-tools/settings</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>执行完毕后，将会在根目录创建.vercel 文件夹，其中 project.json 中存放 orgId 和 projectId，下面将会用到。此时在<a href="https://vercel.com/dashboard" target="_blank" rel="noopener noreferrer">dashboard</a>中也能看到该项目被部署了。</p><p>不过这样部署上去的代码，并不会连接 git 仓库，需要到控制台中选择仓库即可。</p><p>如果想在 github actions 中使用，则新建一个 steps，设置好对应的变量。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">    - name: Deploy to Vercel</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &nbsp; &nbsp; &nbsp;  run: npx vercel --token ${{VERCEL_TOKEN}} --prod</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &nbsp; &nbsp; &nbsp;  env:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>还有一个 VERCEL_TOKEN 需要到 <a href="https://vercel.com/account/tokens" target="_blank" rel="noopener noreferrer">Vercel Settings Tokens</a> 新建一个 Token。</p>]]></content:encoded>
            <category>vercel</category>
            <category>blog</category>
        </item>
        <item>
            <title><![CDATA[面试没通过，又一次，我好菜呀...]]></title>
            <link>https://kuizuo.cn/interview-failed-recover</link>
            <guid>interview-failed-recover</guid>
            <pubDate>Sat, 02 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[是不是每次面试没通过都会有这样的感觉？作为一名程序员，每次面试的时候都觉得准备不充分，面试资料多的看不完，实战经验也不够，即使自认为准备的很充分了，最后还是栽了，到底是因为自己菜，还是自己菜，还是自己菜呢？要回答这个问题，我们得先知道面试到底在面什么。]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="面试" src="/assets/images/interview-e9af2bc5964a2ca04232e1b6a1b42b55.webp" width="1920" height="1280" class="img_ev3q"></p><p>是不是每次面试没通过都会有这样的感觉？作为一名程序员，每次面试的时候都觉得准备不充分，面试资料多的看不完，实战经验也不够，即使自认为准备的很充分了，最后还是栽了，到底是因为自己菜，还是自己菜，还是自己菜呢？要回答这个问题，我们得先知道面试到底在面什么。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="面试在面什么">面试在面什么？<a class="hash-link" href="#面试在面什么" title="标题的直接链接">​</a></h2><p>我们好多小伙伴总觉得面试就跟高考一样，有着严格的评分标准和分数线，谁的分高谁就能进去，但事实上，面试是通过交谈来互相了解对方的一种形式，更多的时候是考验的一个人的沟通能力，如果你能让面试官感觉聊的很投机，那么会有相当大的概率通过面试。
对于技术方面，不同的公司有不同的侧重点，大厂看重原理和算法，其它公司看中技术的熟悉程度，也就是项目经验。技术方面的问题是最棘手的，你可能认为面试通过的人，技术一定很牛，这个我以身边进谷歌、Facebook、亚马逊等国外大厂的朋友的经验证明，这是绝对错误的。技术关是最没有技术含量的考验。通常，公司并不知道一个面试者的技术水平，所以才会通过笔试和前几轮的面试进行考察，考察的问题基本都是类似的、可以举一反三的、是能专门进行准备的。简而言之，<strong>就是谁下功夫准备面试了，谁通过的概率就大很多</strong>，例如一个刷了 leetcode 500 道题 3 遍的，一定比刷了 300 道题 1 遍的通过率高。</p><p>这样看，面试并不能反应一个人的自身能力，1-2 个小时的时间不可能了解一个人。一个人通过面试有可能是长的好看（就有的公司喜欢宣传自己的帅哥美女多），也可能是运气好，面试官的问题正好都准备过，或者像之前所说的，能说会道。你没有通过，除了技术不对口外，多半是这些原因，更多的时候是运气不好，问的问题没准备充分，
绝对不是因为你菜！
那么知道面试没通过不是因为自己菜之后，接下来看看下一步要做什么。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="面试完你可以">面试完你可以...<a class="hash-link" href="#面试完你可以" title="标题的直接链接">​</a></h2><p>面试失败是一个非常打击人的事，因为内心抱有了期望，并希望得到其它人的认可，在拒绝之后会感到愤怒，那么这个时候你可以尽情的：</p><ul><li>吐槽。向朋友、家人尽情的吐槽吧，心里的不快不能憋着，吐槽完你会感觉轻松很多。</li><li>吃。如果你是个吃货，那么没有什么能比美食更解压的了，那么可以放肆的吃，把面试的事抛到九霄云外。</li><li>发泄。打游戏、运动、做自己喜欢的事和其它一切可以让你放松，忘掉这次面试的事情。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="面试完你不可以">面试完你不可以...<a class="hash-link" href="#面试完你不可以" title="标题的直接链接">​</a></h2><p>虽然面试被拒很不好受，但是你绝对不能：</p><ul><li>气馁。失败一次就一蹶不振，感觉整个世界都不爱自己了，自己菜的能钻到地底下去了，再没动力面试下一家。这是绝对不行的，凭什么因为一个面试就否定自己？整个世界不爱你吗？错，整个世界谁都不爱，世界又不是你对象~</li><li>报复。“哼，不让我过面试，我就在网上到处报这家公司黑幕”。你太在乎这次面试了，面试没通过，抛开公司不想录用你以外，同时也是避免了你去一个技术不对口的岗位，没必要跟它纠缠。再者，就算遇到不靠谱的面试官，跟他置气不也拉低自己身份了么？</li><li>钻牛角尖。不要反复责备自己这次面试为什么失败了，好像责备自己就能找到答案似的，就算找到相对合理的答案，也不见得是正确的，可能就单纯是面试官心情不好，谁都不想要呢？这都说不准的，所以不要去想为什么失败，那应该想什么呢？看下一小节。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="面试完你应该">面试完你应该...<a class="hash-link" href="#面试完你应该" title="标题的直接链接">​</a></h2><p>面试完之后最有效率的做法应该是：</p><ul><li>摆正心态。心态这个事太重要了，如果你平时就喜欢请求别人的认可，那么在面试失败后会感到很受伤，这时就要努力摆正自己的心态了，你自己的技术水平应该只有你自己最清楚，要自信起来，而不是因为面试官说你不行，你就不行，面试没通过过不是因为自己能力差，而是自己擅长的技术，并不是面试的这家公司现在正在用的。</li><li>回顾面试过程。看看自己在沟通上是不是还有能提升的地方，例如问你项目经验，你觉得可能没啥好说的，三言两语直接带过，那么你有没有想过，把你的这部分经验完整的讲出来，并穿插一些个人的经历，让面试官知道你在开发过程中遇到了哪些问题，最后是如何机智的解决的。人都爱听故事。</li><li>总结面试题。对于自己一点都不会的问题，想想看是面试的公司专门要求的小众技术，还是普遍的大众技术。如果是大众技术，那么就看看相关的资料，多做一些积累，如果是小众技术，那么后面的面试多半用不到，可以先放一放。</li><li>继续准备下一次面试。在总结完上一次面试的经历并调整好心态后，应该满怀信心的迎接下一次面试了，一边投简历，一边准备下一次的面试，相信自己一定会在某个时间，某个地方，完美的通过面试。</li></ul><p>最后提一下，不要纠结自己的梦想公司，如果面试梦想的公司失败，那么就告诉自己并不是非要进一家公司不可，非要想去的话，有两个办法：一个是如果公司面试完没有冷冻期，那就换个部门在申请一次；第二个是先面其它公司，通过之后先工作混经验，混足了经验再战。
总结一下，面试没过真的不是你菜，反过来也成立，面试过了也不是十分牛逼，面试靠缘分，不要再说自己菜了，自信起来，把贬低自己的时间用在摆正心态和总结教训上，一定会比自怨自艾强的多！</p>]]></content:encoded>
            <category>职业</category>
            <category>面试</category>
            <category>经验</category>
        </item>
        <item>
            <title><![CDATA[Web性能优化：使用图片懒加载推迟屏幕外图片的加载]]></title>
            <link>https://kuizuo.cn/web-performance-optimization-image-lazy-loading</link>
            <guid>web-performance-optimization-image-lazy-loading</guid>
            <pubDate>Wed, 23 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[在使用 chrome 的 lighthouse 对网站进行测速之后，发现有一条优化提示：推迟屏幕外的图片加载。之前有看到过要实现这样的效果需要使用 lazy loading，图片懒加载，但是需要使用 js 的方式来实现，由于本人十分懒惰，不想用太复杂的代码，于是在网上搜索了一番，发现 `<img>`  标签原生支持懒加载。]]></description>
            <content:encoded><![CDATA[<p>在使用 chrome 的 lighthouse 对网站进行测速之后，发现有一条优化提示：推迟屏幕外的图片加载。之前有看到过要实现这样的效果需要使用 lazy loading，图片懒加载，但是需要使用 js 的方式来实现，由于本人十分懒惰，不想用太复杂的代码，于是在网上搜索了一番，发现 <code>&lt;img&gt;</code>&nbsp; 标签原生支持懒加载。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="为什么要懒加载">为什么要懒加载<a class="hash-link" href="#为什么要懒加载" title="标题的直接链接">​</a></h2><p>浏览器在加载图片的时候本身是 async 异步的，不会阻塞浏览器的加载进程，但是屏幕外的图片加载仍然会消耗带宽，这样在带宽有限的情况下，会影响重要组件的加载，例如 CSS、JavaScript 等，进而拖慢页面的加载。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决办法">解决办法<a class="hash-link" href="#解决办法" title="标题的直接链接">​</a></h2><p><code>&lt;img&gt;</code>&nbsp; 标签原生支持 loading 属性，它的属性可以取的值有：</p><ul><li>eager：无论图片是否在可视区域，都会直接加载图片。</li><li>lazy：推迟图片的加载，当图片滚动到距离可视区域一定阈值（视浏览器的实现而定）的时候，再加载图片。</li><li>auto：由浏览器自行决定。</li></ul><p>通过这些属性的描述来看，我们只需要给 <code>&lt;img&gt;</code>&nbsp; 标签的 loading 属性设置为 lazy 即可。我们来测试一下，假设有下面的 html 页面，加载了一系列的图片，需要滚动才能显示全部。如果不设置 loading 为 lazy，那么图片会直接全部加载。从开发者工具的 Network 中可以看到：</p><p><img loading="lazy" alt="img" src="/assets/images/2021-03-23-12-07-04-e8a7532ee83bd3ad7b2809037e3de1a8.webp" width="2076" height="922" class="img_ev3q"></p><p>如果给屏幕外的图片设置 loading 为 lazy，那么可以看到只有在滑动到图片快要出现的时候，图片才会加载：</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/showcase-aa341d7d512e36240b363a01a3f304fb.webm" type="video/webm"><source src="/assets/medias/showcase-c4cbe9882f566e1736166bc077975f98.mp4" type="video/mp4"></video><p>要注意的是，不要给首屏出现在可视区域的图片设置懒加载，因为它本身就在可视区域，应该尽快加载，以让用户尽早看到图片。另外，使用懒加载的图片应该尽量设置宽高，这样可以避免抖动：在等图片加载的时候，相应区域会显示为空白，其他元素不会占位。如果不设置宽高，其它元素就有可能会占位，图片加载完成之后，又会把占位的元素挤下去，造成抖动。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="浏览器支持">浏览器支持<a class="hash-link" href="#浏览器支持" title="标题的直接链接">​</a></h2><p>loading 属性还算是一个比较新的属性，主流浏览器基本上都支持了，IE 仍在被排除在外。对于不支持懒加载的浏览器会自动忽略这个属性。具体支持程度可以参加下表：</p><table><thead><tr><th align="center">IE</th><th align="center">Edege</th><th align="center">FireFox</th><th align="center">Chrome</th><th align="center">Safari</th><th align="center">IOS Safari</th><th align="center">Android Browser</th><th align="center">Chrome for Android</th><th align="center">FireFox for Android</th></tr></thead><tbody><tr><td align="center">No</td><td align="center">89</td><td align="center">75</td><td align="center">77</td><td align="center">No</td><td align="center">No</td><td align="center">89</td><td align="center">89</td><td align="center">86</td></tr></tbody></table>]]></content:encoded>
            <category>前端</category>
            <category>JavaScript</category>
            <category>性能优化</category>
        </item>
        <item>
            <title><![CDATA[实现前端网页 WebRTC 视频通话以及换脸特效]]></title>
            <link>https://kuizuo.cn/webrtc-avatarify-face-swap-tutorial</link>
            <guid>webrtc-avatarify-face-swap-tutorial</guid>
            <pubDate>Mon, 14 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[请输入描述]]></description>
            <content:encoded><![CDATA[<p>因为疫情的原因，线上视频会议软件异军突起，成为了在家办公的主要沟通渠道。而最近抖音上“蚂蚁呀嘿”恶搞换脸的小视频也突然火了起来，那我就想了想能不能在视频会议的时候换张脸活跃下气氛？在 Github 上一番搜寻之后发现还真有办法，有一个开源的 Python 人工智能换脸的库，那正好趁着这个机会研究一下前端 WebRTC 实现视频通话功能，外加换脸操作。先看一下效果吧：</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/webrtc-avatarify-face-swap-demo-2b84596fe5a574818101731a5b2610ec.mp4" type="video/mp4"></video><p>因为有涉及到一点点的后台，所以项目分成了两部分，一个是用于存放前端代码的 frontend 项目和存放后端代码的 backend 项目：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">项目根目录</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">-- backend</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">-- frontend</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>另外这个视频需要电脑上有摄像头，没有的话可以想办法把手机当作电脑的摄像头。</p><p><strong>注意：本教程中的代码仅供展示 AI 换脸技术的应用，不可以用于获取其他人隐私或其他任何非法目的。</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="编写页面">编写页面<a class="hash-link" href="#编写页面" title="标题的直接链接">​</a></h2><p>因为是前端实现，首先肯定是编写页面。这个页面比较简单，就是一个视频组件、显示用户 ID 的文本、呼叫对方视频的输入框和按钮，视频组件默认显示自己的视频，当视频接通之后就会显示对方的视频，而自己的视频会缩小到右上角。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html">HTML<a class="hash-link" href="#html" title="标题的直接链接">​</a></h3><p>在 frontend 目录下新建 index.html、style.css 和 index.js 文件。首先看一下 HTML 结构，index.html 中主要的代码如下：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!-- frontend/index.html --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">head</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!-- 其他代码 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">link</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">stylesheet</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">style.css</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">head</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">body</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">container</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">videos</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">video</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">myVideo</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">videoSize</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">autoplay</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">video</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">video</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">peerVideo</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">videoSize</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">autoplay</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">video</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">idText</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">call</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">text</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">peerIdInput</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">请输入对方 id</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">joinBtn</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">视频通话</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">script</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">index.js</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">script</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">body</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>每个标签的作用是：</p><ul><li><code>&lt;main /&gt;</code>&nbsp; 用于设置页面背景，把所有组件居中对齐。</li><li><code>&lt;div class="videos"&gt;</code>&nbsp; 里边分别放了显示自己视频 <code>#myVideo</code>&nbsp; 和对方视频 <code>#peerVideo</code>&nbsp; 的 <code>&lt;video /&gt;</code>&nbsp; 组件，并设置为自动播放，以便于在加载摄像头后立刻开始播放画面。</li><li><code>&lt;p id="idText"&gt;</code> 在页面打开时显示自己的用户 ID，相当于是电话号码。</li><li><code>&lt;div class="call"&gt;</code>&nbsp; 里是输入对方 ID 的文本框 <code>#peerIdInput</code>&nbsp; 和呼叫按钮 <code>#joinBtn</code>&nbsp;。</li><li>最后在 <code>&lt;head /&gt;</code>&nbsp; 中引入样式文件 style.css，在 <code>&lt;body /&gt;</code>&nbsp; 结束前引入 index.js。我们将主要在 index.js 中编写代码。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="css">CSS<a class="hash-link" href="#css" title="标题的直接链接">​</a></h3><p>css 的代码都比较简单，基本就是设置一下样式，这里介绍一下重要的部分，剩余的可以在源代码中查看。因为自己的视频要在视频接通时移动到右上角，那么就需要把 <code>&lt;div class="videos"&gt; </code> 容器设置为相对定位，把我的视频和对方的视频设置成一样的宽高，然后先隐藏对方视频，当视频接通时，利用 JavaScript 加上接通后，我的视频的样式，把我的视频设置为绝对定位，宽高调小，放到右上角：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">/* frontend/style.css */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector" style="color:#a6e22e;font-style:italic">videos</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">position</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.videoSize</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">500</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">600</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">object-fit</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> cover</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">/* 让视频按比例占满整个空间 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.rightTop</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/* 以下是通话中的样式 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">position</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> absolute</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">150</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">right</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">top</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector id" style="color:#a6e22e;font-style:italic">#peerVideo</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其他组件基本只是设置了下 Grid 布局、宽高、大小、阴影、背景、字体，没有什么特殊的，可以直接查看源代码。样式中所用到的图标在 <code>frontend/icons</code>&nbsp; 目录下。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="访问摄像头">访问摄像头<a class="hash-link" href="#访问摄像头" title="标题的直接链接">​</a></h2><p>接下来我们先熟悉一下访问摄像头的代码。在 JavaScript 中访问用户的摄像头主要使用 <code>navigator.mediaDevices.getUserMedia()</code> 方法，&nbsp; 它接收一个对象作为参数，用于指定要获取的设备，例如视频或音频，然后返回一个 Promise，在 Promise 完成之后它会传递给我们一个 Stream 流，我们把它放到 <code>&lt;video /&gt;</code>&nbsp; 标签的 <code>srcObject</code>&nbsp; 属性中就可以了，是不是很简单？代码如下：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// frontend/index.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> myVideo </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementById</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"myVideo"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token dom variable" style="color:#f8f8f2">navigator</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mediaDevices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getUserMedia</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">video</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">audio</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">then</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">stream</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    myVideo</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">srcObject</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> stream</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在这段代码中：</p><ul><li>获取了 <code>#myVideo</code>&nbsp; 这个 <code>&lt;video /&gt;</code>&nbsp; 组件。</li><li>使用 <code>navigator.mediaDevices.getUserMedia()</code> 并给它传递了一个对象，对象的 video 和 audio 属性都设置为了 true，表示要访问摄像头和音频设备。</li></ul><p>这时，使用 VS Code 的 Live Server 插件运行项目（没有的话安装一下，很简单），在 index.html 文件里右击，选择 Open with Live Server，打开之后，浏览器可能会提示此网站需要访问摄像头和音频设备，点击允许，就能看到自己的视频了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="编写后台">编写后台<a class="hash-link" href="#编写后台" title="标题的直接链接">​</a></h2><p>要实现视频通话，需要使用 WebRTC 技术，这个技术牵扯的概念和 API 过于庞大和复杂，不过有开源的库来帮我们简化了 WebRTC 的操作，这里使用一个叫做 Peer.js 的库，它封装了 WebRTC 杂乱的 API，提供了完整的、可配置的、易于使用的 API。
<a href="https://peerjs.com/" target="_blank" rel="noopener noreferrer">https://peerjs.com/</a>
我们将会通过把 Peer 附加到 Express.js 服务器上，来生成用户 ID 并管理 WebRTC 连接。首先在 backend 目录下运行：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> init -y</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># 或</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">yarn</span><span class="token plain"> init -y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接着初始化一个 node.js 项目，使用 npm 或 yarn 安装 peer 和 express 依赖，因为想在改动代码时自动重启服务，我们也可以再安装一个 nodemon 依赖：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">yarn</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">add</span><span class="token plain"> peer express nodemon</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># 或</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> --save peer express nodemon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安装完成之后新建一个 server.js 文件，整个后台服务我们就只需要这一个文件，都是一些简单的初始化代码，它里边的内容是：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> express </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">require</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"express"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token maybe-class-name">ExpressPeerServer</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">require</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"peer"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> app </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">express</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> server </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">listen</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">3000</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> peerServer </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">ExpressPeerServer</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">server</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">debug</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">path</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">app</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">use</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"/video"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> peerServer</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些代码的含义是：</p><ul><li>导入 express 库，并从 peer 库中导入与 express 进行结合的 ExpressPeerServer。</li><li>创建 express 实例 <code>app</code>&nbsp;，并监听 <code>3000</code>&nbsp; 端口。</li><li>把 ExpressPeerServer 挂载到 express 中，设置 <code>debug</code>&nbsp; 开发模式为 true，这样有更好的错误提示。路径为根目录。</li><li>ExpressPeerServer 挂载之后会返回一个 express 的控制器。</li><li>把返回的控制器挂载到 <code>/video</code>&nbsp; 路径下，这样 <code>/video</code>&nbsp; 路径就是主要的、peer.js 提供的 WebRTC 通信路径。</li></ul><p>然后修改一下 package.json 文件，添加一个 <code>script</code>&nbsp; 配置项，里边定义 <code>start</code>&nbsp; 命令值为 <code>nodemon server.js</code>&nbsp;：</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"scripts"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"start"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"nodemon server.js"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样使用 nodemon 运行 server.js 文件后，如果 server.js 中的内容发生变化，它会自动帮助我们重启服务器。
我们现在来运行一下 <code>yarn start</code>&nbsp; 或者 <code>npm start</code>&nbsp;，看到命令行提示 <code>[nodemon] starting node server.js</code>&nbsp; 就算启动成功了，我们访问一下 <code>http://localhost:3000/video</code>&nbsp;&nbsp;，看到下方输出结果就说明 peer 也加载成功了：</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"name"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"PeerJS Server"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"description"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"A server side element to broker connections between PeerJS clients."</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"website"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://peerjs.com/"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>后端代码到这里就编写完成了。下一步就是在前端页面中调用 Peer 相关的 api，并建立视频通话。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="生成用户-id">生成用户 ID<a class="hash-link" href="#生成用户-id" title="标题的直接链接">​</a></h2><p>在前端中调用后端 Peer 服务可以使用 Peer.js 官方的前端库，可以直接使用 cdn 形式：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">script</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">script</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也可以打开上边 src 中的网址，把文件保存到本地，或者在 Github 上下载：
<a href="https://github.com/peers/peerjs/blob/master/dist/peerjs.min.js" target="_blank" rel="noopener noreferrer">https://github.com/peers/peerjs/blob/master/dist/peerjs.min.js</a>
下载完成之后把它放到 <code>frontend/peer</code>&nbsp; 目录下，然后在 index.html 中，在引入 index.js 的上方，引入 peerjs：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">script</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">peer/peerjs.min.js</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">script</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">script</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">index.js</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">script</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来打开 index.js 文件，建立与后台 peer 服务的连接：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> peer </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Peer</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">host</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"localhost"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">port</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"3000"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">path</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/video"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里直接使用 peer.js 前端库导出的构造函数 Peer()，它接收一个对象作为参数，这里就分别把后台服务的 host、port 和 path 传递进去就可以了，它会返回 peer 实例，后续有关视频通话的操作就主要使用它来实现。
当成功的连接到后台服务之后，我们首先给自己生成一个唯一的用户 ID，就等同于是一个电话号码，那么这里我们可以监听 peer 的 <strong>open</strong>&nbsp; 事件，当连接打开后，会把生成的用户 ID 返回到事件处理回调函数中，然后我们获取 html 中的 <code>#idText</code>&nbsp; 这个 p 元素来显示自己的 ID：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> idText </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementById</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"idText"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">peer</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">on</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"open"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">id</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  idText</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">textContent</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"我的 id 是："</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> id</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这时在 Live Server 中打开 index.html，就可以看到显示出了 ID，类似于：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">我的 id 是：2573c3ae-ba79-404a-b807-2128856ef3c9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>多打开几个页面，可以看到每个人的 ID 都不同。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="呼叫视频通话">呼叫视频通话<a class="hash-link" href="#呼叫视频通话" title="标题的直接链接">​</a></h2><p>在有了用户 ID 之后，就可以呼叫对方了。这里的逻辑是，用户在输入框输入对方 ID 之后，点击视频通话按钮进行呼叫。那么我们应该先获取视频通话按钮元素，然后监听它的点击事件，在里边发起呼叫：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> joinBtn </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementById</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"joinBtn"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// 发起呼叫</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">joinBtn</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">addEventListener</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"click"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> peerId </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> peerIdInput</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"正在连接："</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> peerId</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token dom variable" style="color:#f8f8f2">navigator</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mediaDevices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getUserMedia</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">video</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">audio</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">then</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">stream</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> call </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> peer</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">call</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">peerId</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> stream</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      call</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">on</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"stream"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> showVideo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在点击按钮的时候，事件处理函数作了如下操作：</p><ul><li>获取用户输入的对方的 ID。</li><li>获取当前用户的视频流，然后调用 <code>peer.call()</code>&nbsp; 呼叫对方， <code>peer.call()</code>&nbsp; 需要对方的 ID 和自己的视频流作为参数，然后返回与呼叫有关的实例，保存到 call 中。</li><li>这时当前用户就开始等待对方应答了，为了简单起见，这里没有做等待的样式。</li><li>下一步监听 call 的 <strong>stream</strong>&nbsp; 事件，这个事件会在对方应答后触发，它会返回对方的视频流作为事件处理函数的参数，然后我们使用 <code>showVideo()</code>&nbsp; 函数处理对方的视频流。</li></ul><p><code>showVideo()</code>&nbsp; 函数的代码如下：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> peerVideo </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementById</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"peerVideo"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">showVideo</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">stream</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  myVideo</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">classList</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"rightTop"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  peerVideo</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">srcObject</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> stream</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  peerVideo</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">style</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">display</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"block"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个函数就是简单的把自己的视频移动到右上角，通过之前定义的 <code>.rightTop</code>&nbsp;class 样式，然后把对方的视频流放到 <code>#peerVideo</code>&nbsp; 视频组件中，之后把它显示出来（之前设置的是 <code>display: none</code>&nbsp; 隐藏）。现在因为一直是等待对方接听，所以需要有一个应答的处理。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="应答视频通话">应答视频通话<a class="hash-link" href="#应答视频通话" title="标题的直接链接">​</a></h2><p>应答的处理是监听 peer 的 <strong>call</strong>&nbsp; 事件，然后通过事件参数中与呼叫有关的实例来应答通话：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// 应答呼叫</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">peer</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">on</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"call"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">call</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token dom variable" style="color:#f8f8f2">navigator</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mediaDevices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getUserMedia</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">video</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">audio</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">then</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">stream</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      call</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">answer</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">stream</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      call</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">on</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"stream"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> showVideo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这一步的代码虽然在同一个文件中，但是应该想象为收到视频通话呼叫的对方，代码作了下边的操作：</p><ul><li>获取自己的视频流。</li><li>调用 <code>answer()</code>&nbsp; 函数应答视频呼叫，并把自己的视频流传回给呼叫者。这里是当有呼叫时直接进行应答，为了简单起见，没有编写点击应答按钮相关的样式和事件。</li><li>监听 <strong> stream </strong>&nbsp; 事件，这一步和之前的一样，应答后这个事件就会触发，然后同样使用 <code>showVideo()</code> 函数加载视频。</li></ul><p>好了，现在打开两个页面试试，在其中一个页面输入另一个页面生成的 ID，然后点击视频通话，就可以看到双方视频显示出来了。如果用的是同一个摄像头，那么显示的画面都是一样的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="实现换脸">实现换脸<a class="hash-link" href="#实现换脸" title="标题的直接链接">​</a></h2><p>实现换脸主要是用到了 Avatarify 这个 AI 换脸库，它是使用 Python 编写的，利用了 First-Order Motion Model 算法来实现换脸。我们这里只需要按照步骤进行安装就可以了，此外还需要安装虚拟摄像头软件，用于把 Avatarify 换脸后的数据作为摄像头视频，然后在前端页面中访问这个虚拟的摄像头。
Avatarify 由于是对摄像头的视频进行实时计算，所以对显卡的要求非常高，且只支持启用了 CUDA 的 Nvidia 显卡来进行 GPU 加速，官方的统计数据是这样的：</p><ul><li>GeForce GTX 1080 Ti: 33 帧/秒</li><li>GeForce GTX 1070: 15 帧/秒</li><li>GeForce GTX 950: 9 帧/秒</li></ul><p>如果配置达不到，可以使用腾讯云或阿里云的 GPU 实例，把显卡有关的计算交给远程服务器去进行，本地只需要建立视频流即可。本文将主要使用这种方法。
如果配置达到了要求，也可以在本地安装运行，不过我没有试过，后边简单的贴一下官方安装指导（Windows 下），你可以自己尝试一下。
要注意的是，如果是在本地运行算法，可以在 Windows 和 Linux 操作系统中进行，或者也可以使用 docker 进行部署，不过只支持 linux 操作系统下的 docker。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="购买服务器">购买服务器<a class="hash-link" href="#购买服务器" title="标题的直接链接">​</a></h3><p>这里以腾讯云 GPU 实例为例，介绍一下服务器的配置，关于计费我们会使用按量计费，完成这篇教程所用的总体费用可能在 30 元左右，
用完之后一定要记得<strong>关机或者销毁来停止计费</strong>。如果是关机，记得先把带宽调整为 0，停止带宽计费，然后关机时选择关机不收费选项。
打开下方链接（或复制 <a href="https://curl.qcloud.com/KiCrCXo9" target="_blank" rel="noopener noreferrer">https://curl.qcloud.com/KiCrCXo9</a> ）：</p><p><a href="https://cloud.tencent.com/act/cps/redirect?redirect=1001&amp;cps_key=2c427bf21a8dbca51ee45224ab31c2a9&amp;from=console" target="_blank" rel="noopener noreferrer">腾讯云服务器购买链接</a></p><p>然后在选择机型中选择如下配置：</p><ul><li>计费模式：按量计费。</li><li>地域：中国香港。这里选择香港地区的原因是安装 Avatarify 需要大量的境外源，例如 Github、Docker、Nividia、Python 等，且数量多，体积也大（有的 700 多 M），在亲身测试过国内区的之后，发现行不通，而香港地区因为延迟相对较低，且访问境外源速度快，所以这里选择了香港。</li><li>实例：选择 GPU 型，在机型列表中选择 GPU 计算型 GN7，这个是最便宜的，7.16 元/小时。</li><li>镜像：选择 Ubuntu 64 位 18.04，不要选过高的版本。显卡驱动可能支持不完善。</li><li>勾选上后台自动安装 GPU 驱动，CUDA 版本选择 10.0.130，cuDNN 版本选择 7.4.2。</li><li>带宽实测需要 20M 起步，大概 1 元/小时，不过在安装 Avatarify 的时候带宽可以小一点，后边真正开启视频的时候再把它改大。</li><li><strong>注意这里系统盘费用是 0.03 元/小时，这个在关机后仍然会收取</strong>。</li></ul><p>在下一步设置主机中：</p><ul><li>新建安全组。</li><li>登录方式这里使用密码，可以选择自行设置，也可以自动生成。</li></ul><p>再下一步确认成功后完成购买，稍后就可以在控制台实例列表中看到刚购买的实例了，新购买的机器可能需要等 5 分钟才能配置完成。如果要修改带宽，可以在列表中找到对应的实例，在最右侧操作栏里选择更多-&gt;资源调整-&gt;调整带宽，进行调整。
因为 Avatarify 需要使用 5557 和 5558 端口，我们需要在安全组中放行这两个端口。点击实例名称超链接，进入实例详情页面，在上方选项卡中选择 <strong>安全组</strong>&nbsp;，在右侧 <strong>规则预览</strong>&nbsp; 中的 <strong>入站规则</strong>&nbsp; 选项卡里，点击 <strong>编辑规则</strong>，在新页面里的入站规则里，点击 <strong>添加规则，</strong>在对话框里填写：</p><ul><li>类型：自定义。</li><li>来源：all。</li><li>协议端口：TCP:5557,5558</li><li>策略：允许。</li></ul><p>点击完成即可。到这里实例配置就完成了，留意一下实例的公网 IP 地址，稍后使用 SSH 登录时需要用到它。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署-avatarify">部署 Avatarify<a class="hash-link" href="#部署-avatarify" title="标题的直接链接">​</a></h3><p>我们使用 Docker 的方式来部署 Avatarify，先登录到我们的 GPU 实例中，可以直接在腾讯云控制台登录，也可以使用 ssh 命令或 putty 工具。这里以 ssh 为例，输入如下命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">ssh</span><span class="token plain"> ubuntu@你的实例ip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后根据提示输入密码，第一次登录可能有一大段英文提示（是否信任设备），直接输入 yes 回车即可。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docker">安装 Docker<a class="hash-link" href="#安装-docker" title="标题的直接链接">​</a></h4><p>登录进去之后先安装 docker，可以直接使用简易的安装脚本：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">curl</span><span class="token plain"> -fsSL https://get.docker.com -o get-docker.sh</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sh</span><span class="token plain"> get-docker.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不过实测香港的实例好像并不能访问这个脚本，我们还可以使用普通方式安装，按照以下步骤复制粘贴命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic"># 第一步</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># 第二步</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    apt-transport-https </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    ca-certificates </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">curl</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    gnupg</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># 第三步</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">curl</span><span class="token plain"> -fsSL https://download.docker.com/linux/ubuntu/gpg </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># 第四步</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">echo</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token string" style="color:#a6e22e">"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">  </span><span class="token string variable" style="color:#f8f8f2">$(</span><span class="token string variable" style="color:#f8f8f2">lsb_release -cs</span><span class="token string variable" style="color:#f8f8f2">)</span><span class="token string" style="color:#a6e22e"> stable"</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">tee</span><span class="token plain"> /etc/apt/sources.list.d/docker.list </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> /dev/null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些步骤都是在配置 Docker 的安装仓库源和密钥，接下来运行下面两条命令来安装 Docker：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> docker-ce docker-ce-cli containerd.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安装完成之后， <code>docker</code>&nbsp; 命令需要管理员权限才能运行，每次都需要输入 <code>sudo</code>，如果要省略 <code>sudo</code>&nbsp;，可以把当前用户（腾讯云默认为 ubuntu）添加到 docker 用户组中：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">usermod</span><span class="token plain"> -aG </span><span class="token function" style="color:#e6db74">docker</span><span class="token plain"> ubuntu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>之后退出 ssh 并重新登录来让配置生效，我们可以运行下面的命令检查 docker 是否安装成功：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">docker</span><span class="token plain"> run hello-world</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>有打印出 hello world 字样和一大段英文就说明成功了。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-nvidia-docker-tookit">安装 Nvidia Docker tookit<a class="hash-link" href="#安装-nvidia-docker-tookit" title="标题的直接链接">​</a></h4><p>要让 docker 使用 GPU，需要安装 Nvidia Docker tookit，这一步也很简单，首先设置 Nvidia 的仓库源：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token assign-left variable" style="color:#f8f8f2">distribution</span><span class="token operator" style="color:#66d9ef">=</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable builtin class-name" style="color:#e6db74">.</span><span class="token variable" style="color:#f8f8f2"> /etc/os-release</span><span class="token variable punctuation" style="color:#f8f8f2">;</span><span class="token variable builtin class-name" style="color:#e6db74">echo</span><span class="token variable" style="color:#f8f8f2"> $ID$VERSION_ID</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   </span><span class="token operator" style="color:#66d9ef">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">curl</span><span class="token plain"> -s -L https://nvidia.github.io/nvidia-docker/gpgkey </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> apt-key </span><span class="token function" style="color:#e6db74">add</span><span class="token plain"> - </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   </span><span class="token operator" style="color:#66d9ef">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">curl</span><span class="token plain"> -s -L https://nvidia.github.io/nvidia-docker/</span><span class="token variable" style="color:#f8f8f2">$distribution</span><span class="token plain">/nvidia-docker.list </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">tee</span><span class="token plain"> /etc/apt/sources.list.d/nvidia-docker.list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后安装 tookit 并重启 Docker：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> -y nvidia-docker2</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> systemctl restart </span><span class="token function" style="color:#e6db74">docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>运行一个示例 container 检查是否安装成功：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">sudo</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">docker</span><span class="token plain"> run --rm --gpus all nvidia/cuda:11.0-base nvidia-smi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果打印出类似的如下信息就算成功了：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">Fri Mar  </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"> 08:47:39 </span><span class="token number" style="color:#ae81ff">2021</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">+-----------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> NVIDIA-SMI </span><span class="token number" style="color:#ae81ff">418.126</span><span class="token plain">.02   Driver Version: </span><span class="token number" style="color:#ae81ff">418.126</span><span class="token plain">.02   CUDA Version: </span><span class="token number" style="color:#ae81ff">11.0</span><span class="token plain">     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">-------------------------------+----------------------+----------------------+</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> GPU  Name        Persistence-M</span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Bus-Id        Disp.A </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Volatile Uncorr. ECC </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Fan  Temp  Perf  Pwr:Usage/Cap</span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">         Memory-Usage </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> GPU-Util  Compute M. </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">=</span><span class="token operator" style="color:#66d9ef">+=</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">=</span><span class="token operator" style="color:#66d9ef">+=</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">=</span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain">  Tesla T4            Off  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> 00000000:00:08.0 Off </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">                    </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> N/A   26C    P8     9W /  70W </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">      0MiB / 15079MiB </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">      </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain">%      Default </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">+-------------------------------+----------------------+----------------------+</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">+-----------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Processes:                                                       GPU Memory </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  GPU       PID   Type   Process name                             Usage      </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">==</span><span class="token operator" style="color:#66d9ef">=</span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  No running processes found                                                 </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">+-----------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="构建-avatarify-docker-镜像">构建 Avatarify Docker 镜像<a class="hash-link" href="#构建-avatarify-docker-镜像" title="标题的直接链接">​</a></h4><p>选择一个文件夹，使用 git 克隆 Avatarify 仓库：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">git</span><span class="token plain"> clone https://github.com/alievk/avatarify.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>进入到克隆下来的 avatarify 仓库中，使用 docker 构建镜像：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token builtin class-name" style="color:#e6db74">cd</span><span class="token plain"> avatarify</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">docker</span><span class="token plain"> build -t avatarify </span><span class="token builtin class-name" style="color:#e6db74">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>构建需要的时间比较长，耐心等待完成之后，启动服务：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">bash</span><span class="token plain"> run.sh --is-worker --docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>看到有 5557 和 5558 端口就说明启动成功了。到现在，Avatarify 的服务端配置完成了，之后就是使用客户端调用服务，把计算部分交给我们的 GPU 实例。这时如果担心计费，可以先把实例关机，在本地安装好客户端后再开机。
接下来的步骤以 MacOS 为例，Windows 版可以直接跳到后边的 <strong>Windows 安装方法</strong>&nbsp; 小节。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-avatarify-客户端">安装 Avatarify 客户端<a class="hash-link" href="#安装-avatarify-客户端" title="标题的直接链接">​</a></h3><p>在本地电脑上，首先安装 Miniconda Python 3.8，可以从这里下载：
<a href="https://docs.conda.io/en/latest/miniconda.html#macosx-installers" target="_blank" rel="noopener noreferrer">https://docs.conda.io/en/latest/miniconda.html#macosx-installers</a>
或者使用 Homebrew：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">brew </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> --cask miniconda</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>克隆 avatarify 仓库并运行安装脚本：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">git</span><span class="token plain"> clone https://github.com/alievk/avatarify.git</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">cd</span><span class="token plain"> avatarify</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">bash</span><span class="token plain"> scripts/install_mac.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下载 CamTwist 虚拟摄像头软件（类似 OBS，但是 OBS 的虚拟摄像头在 Mac 中访问不到）并安装：
<a href="http://camtwiststudio.com/download" target="_blank" rel="noopener noreferrer">http://camtwiststudio.com/download</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="启动-avatarify-客户端">启动 Avatarify 客户端<a class="hash-link" href="#启动-avatarify-客户端" title="标题的直接链接">​</a></h3><p>确保远程 GPU 实例已启动，且运行了 avatarify docker 镜像监听 5557 和 5558 端口，然后在本地克隆的 avatarify 仓库中，运行 mac 客户端：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">./run_mac.sh --is-client --in-addr tcp://server_address:5557 --out-addr tcp://server_address:5558</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>记得把两个 <code>server_address</code>&nbsp; 改成 GPU 实例的公网 IP。服务端可能需要下载一些必要的文件，所以连接会慢一些，稍等启动成功后 Avatarify 会自动打开摄像头窗口。
我们可以根据提示调整好脸部位置，这里我们最好把脸放到红色矩形框中，光线要充足，不能太黑，可以使用 W/D 键缩放画面，调整好之后按 X 键就可以呼出换脸之后的预览视频窗口，它就是作为虚拟摄像头的视频来源。
Avatarify 内置了 9 张示例的人脸照片，可以按 1-9 键进行切换，也可以自定义人脸照片，放到 Avatarify 中的 <code>avatars</code>&nbsp; 文件夹下。
Avatarify 成功显示之后，打开 CamTwist 虚拟摄像头，在左侧选择 Desktop+，然后点击底部的 select，然后在右侧的 settings 下，勾上 Confine to Application Window，然后勾上下方的 Select from existing windows&nbsp;，在下拉框中选择 python (avatarify)&nbsp;，如果找不到可以退出 CamTwist 重新打开，或者多点击下拉框几次试试。现在虚拟摄像头就准备好了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows-安装方法">Windows 安装方法<a class="hash-link" href="#windows-安装方法" title="标题的直接链接">​</a></h3><p>在 Windows 下的安装方法与 MacOS 类似，而且如果显卡配置够高，可以省略购买远程 GPU 服务器步骤。</p><ol><li>首先安装 Minicoda Python 3.8，可以从这里下载：</li></ol><p><a href="https://docs.conda.io/en/latest/miniconda.html#windows-installers" target="_blank" rel="noopener noreferrer">https://docs.conda.io/en/latest/miniconda.html#windows-installers</a></p><ol start="2"><li>安装完成之后打开 Anaconda 命令提示符，克隆 avatarify 仓库，并运行 windows 操作系统下的安装脚本：</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">git</span><span class="token plain"> clone https://github.com/alievk/avatarify.git</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">cd</span><span class="token plain"> avatarify</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">scripts</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">install_windows.bat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>如果要在本地执行换脸算法，那么需要下载 network weights（228 MB）：</li></ol><p><a href="https://openavatarify.s3.amazonaws.com/weights/vox-adv-cpk.pth.tar" target="_blank" rel="noopener noreferrer">https://openavatarify.s3.amazonaws.com/weights/vox-adv-cpk.pth.tar</a>
或
<a href="https://yadi.sk/d/M0FWpz2ExBfgAA" target="_blank" rel="noopener noreferrer">https://yadi.sk/d/M0FWpz2ExBfgAA</a>
或
<a href="https://drive.google.com/file/d/1coUCdyRXDbpWnEkA99NLNY60mb9dQ_n3/view?usp=sharing" target="_blank" rel="noopener noreferrer">https://drive.google.com/file/d/1coUCdyRXDbpWnEkA99NLNY60mb9dQ_n3/view?usp=sharing</a></p><ol start="4"><li>下载完成后放到 avatarify 的根目录下，无需解压。</li><li>运行 avatarify 客户端，如果是在本地运行，可以使用：</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">./scripts/run_windows.bat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>Windows 系统下也可以使用远程 GPU 实例，使用下面的方式启动客户端：</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">./scripts/run_windows.bat --is-client --in-addr tcp://server_address:5557 --out-addr tcp://server_address:5558</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li>两个 <code>server_address</code>&nbsp; 需要替换成远程 GPU 实例的公网 IP。</li><li>启动成功之后和 Mac 的操作一样，使用 W/D 缩放画面，完成之后按 X 键调出 avatarify 预览窗口。</li></ol><p>Windows 下的虚拟摄像头可以使用 OBS，最新版的 OBS 26.1 及以上已经内置了虚拟摄像头插件了，无需再单独安装。</p><ol><li>下载并安装 OBS：</li></ol><p><a href="https://obsproject.com/" target="_blank" rel="noopener noreferrer">https://obsproject.com/</a></p><ol start="2"><li>安装完成之后打开 OBS，在左下角的 Source（源）面板中添加 Windows Capture，把视频输入源设置为某个应用程序窗口，然后选择 <!-- -->[python.exe]<!-- -->: avatarify 程序，点击 OK，可以调整以下大小。</li><li>再在 Tools（工具）菜单中选择 VirtualCam（虚拟摄像头），选择 AutoStart（自动开启），设置 Buffered Frames（缓冲）为 0，然点击开始。（如果 Tools 菜单没有 VirtualCam，看看界面右下角的 start recording 附近有没有 start virtual cam）。</li></ol><p>现在虚拟摄像头就准备好了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="实现换脸-1">实现换脸<a class="hash-link" href="#实现换脸-1" title="标题的直接链接">​</a></h3><p>接下来就是在我们的视频通话前端项目中，使用 CamTwist 或 OBS 提供的虚拟摄像头了。我们需要明确知道它们的设备 ID 才能指定具体使用哪个摄像头。
首先使用 Live Server 打开前端项目的 index.html 文件，在谷歌开发者工具的 console 中，使用下面这段代码打印出视频设备信息：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token dom variable" style="color:#f8f8f2">navigator</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mediaDevices</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">enumerateDevices</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">then</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">devices</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  devices</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">forEach</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">device</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">device</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">kind</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"videoinput"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">device</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这段代码就是访问所有媒体设备，然后获取其中的视频设备并打印出来，从打印结果里找到 label 包含 CamTwist 或者 OBS（视操作系统而定）的那一项，记录 deviceId 属性。
在 index.js 文件中，保存 deviceId 值到一个常量中：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> cameraId </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token string" style="color:#a6e22e">"982947417cf490bae44ffb6a837bddcb813704ee491dd85d9149c45389f5521b"</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在使用 <code>navigator.mediaDevices.getUserMedia()</code>&nbsp; 获取摄像头时，除了可以把 video 设置为 true 之外，还可以把他的值设置为一个对象，用来指定更多的信息，我们把它单独定义出来，在里边使用 cameraId 指定访问哪个摄像头：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> mediaConstrains </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">video</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#f92672">deviceId</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">exact</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> cameraId</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">audio</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>exact 是精确的、只使用指定 ID 的摄像头，不会使用其他备选的。
然后在获取自己摄像头设备的部分，替换成上边这个对象。或者为了方便测试，也可以把所有的都替换掉：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token dom variable" style="color:#f8f8f2">navigator</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mediaDevices</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getUserMedia</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">mediaConstrains</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">then</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token comment" style="color:#8292a2;font-style:italic">/* ... */</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>好了，现在再试试视频通话，是不是成功的换脸了呢？
这里要注意的是，可能是因为 CamTwist 软件和真正的摄像头有冲突，页面会不时的重新刷新，这个暂时还没有比较好的解决方案，如果你有精力的话可以研究一下。
附上本文的源代码：
<a href="https://github.com/MISfang/code-examples/tree/master/webrtc/video-call-change-face" target="_blank" rel="noopener noreferrer">https://github.com/MISfang/code-examples/tree/master/webrtc/video-call-change-face</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>这篇教程所用到的技术都很简单，只是配置比较复杂，本教程提供了换脸的基本步骤，剩下的可以根据需要继续进行完善。示例中实现的的是一对一的视频通话，不过在这个基础上也完全可以实现多方视频会议，只需要调整一下视频显示的样式，然后在有新人加进来时，创建相应的 <code>&lt;video /&gt;</code>&nbsp; 标签，并追加到现有的视频列表中即可。现在我们来回顾一下过程：</p><ul><li>编写前端 HTML/CSS 页面结构和样式，并尝试加载摄像头。</li><li>编写简单的后台应用，利用 epxress 和 peer 建立基于 WebRTC 的视频通话基础。</li><li>前端利用 peer.js 前端库调用后台生成用户 ID，并呼叫、应答视频通话。</li><li>配置 Avatarify 换脸服务器程序，利用云 GPU 服务把显卡计算相关部分转移到 GPU 实例中。</li><li>安装 Avatarify 客户端程序和虚拟摄像头应用，把换脸后的数据用虚拟摄像头展现出来。</li><li>前端获取虚拟摄像头 ID，在视频通话的时候使用此摄像头。</li></ul><p>如果有帮助请点赞并分享，有问题可以评论留言，感谢阅读！</p>]]></content:encoded>
            <category>前端</category>
            <category>WebRTC</category>
            <category>avatarify</category>
        </item>
        <item>
            <title><![CDATA[Web 性能优化：使用 CSS font-display 控制字体加载和替换]]></title>
            <link>https://kuizuo.cn/css-font-display-intro</link>
            <guid>css-font-display-intro</guid>
            <pubDate>Wed, 09 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[在编写网站的时候，或多或少都会用到一些网络上的字体，CSS 3 中虽然加入了对 Web Fonts（网络字体）的支持，但是浏览器对它们的加载和默认处理方式会极大的影响网站的性能和用户体验。例如默认情况下，在 Web Fonts 加载时，使用该字体的地方会显示空白，直到字体下载完成之后才会显示，这时通过改变 CSS 中的 `font-display` 属性，就可以避免这个问题。]]></description>
            <content:encoded><![CDATA[<p>在编写网站的时候，或多或少都会用到一些网络上的字体，CSS 3 中虽然加入了对 Web Fonts（网络字体）的支持，但是浏览器对它们的加载和默认处理方式会极大的影响网站的性能和用户体验。例如默认情况下，在 Web Fonts 加载时，使用该字体的地方会显示空白，直到字体下载完成之后才会显示，这时通过改变 CSS 中的 <code>font-display</code> 属性，就可以避免这个问题。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-web-fonts">什么是 Web Fonts<a class="hash-link" href="#什么是-web-fonts" title="标题的直接链接">​</a></h2><p>在介绍 <code>font-display</code> 之前，先了解一下什么是 Web Fonts。在以前使用 CSS 指定字体时只能使用用户电脑本地上现有的字体，而由于每个用户电脑上的字体可能都不一样，所以能用的基本上就是操作系统内置的一些字体，例如微软雅黑，宋体，苹果苹方，这些也叫做安全字体（Web Safe Fonts）。为了使字体显示正常，我们一般会通过 <code>font-family</code> 属性同时指定多个字体，如果第一个字体没有在操作系统中找到，就会使用下一个后备字体（ Fallback Font ），以此类推：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-family</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"PingFang SC"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Microsoft Yahei"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sans-serif</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>后来，CSS 开始支持 <code>@font-face</code> 这个指令，可以加载自定义的字体文件，这个时候可以把字体随网站一起发布，用户在浏览网站的时候，会下载 <code>@font-face</code> 中指定的字体。例如下边的代码加载了 fonts 目录下的 Raleway 字体：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token atrule rule" style="color:#e6db74">@font-face</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-family</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'Raleway'</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-style</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> normal</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-weight</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">500</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">src</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token url function" style="color:#e6db74">url</span><span class="token url punctuation" style="color:#f8f8f2">(</span><span class="token url" style="color:#a6e22e">/fonts/raleway.woff2</span><span class="token url punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">format</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">'woff2'</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>src</code> 属性用于指定字体的位置，其中 <code>url()</code> 函数也接受网络地址，来加载第三方提供的字体文件，这样也催生了像 Google Fonts 这样的云字体服务。不过，基本上只有英文字体才适合 Web Fonts，因为它只有 26 个英文字母外加数字，体积小，适合在网络上传输，而中文光常用的就有 3000 个字符，所以一般只使用操作系统自带的，不过现在也有字体服务会根据网站上所使用的文字去动态的生成字体文件。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="浏览器加载-web-fonts-的时期">浏览器加载 Web Fonts 的时期<a class="hash-link" href="#浏览器加载-web-fonts-的时期" title="标题的直接链接">​</a></h2><p>浏览器加载 Web Fonts 时按顺序会有三个时期：</p><ul><li>阻塞期（Block Period）。在此期间如果字体没有加载完成，那么浏览器会使用 <code>font-family</code> 指定的字体列表中的后备字体（Fallback）进行渲染，但是显示为空白，也就是对于用户是不可见的。在此期间字体加载完成之后才能正常显示该字体。</li><li>交换期（Swap Period）。跟阻塞期类似，但是在这个时期内，它会在字体加载时，先用后备字体渲染文本并显示出来（而不是显示空白），在此期间字体加载完成之后才能正常的显示该字体。</li><li>失败期（Failure Period）。如果字体加载失败，则使用后备字体显示文本。</li></ul><p>至于每个时期有多长，是根据 <code>font-display</code> 属性的值来确定的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="font-display-介绍">font-display 介绍<a class="hash-link" href="#font-display-介绍" title="标题的直接链接">​</a></h2><p><code>font-display</code> 确切的说不是 CSS 属性，而是专用于 <code>@font-face</code> 指令的描述符，它可以取如下几个值：</p><ul><li><code>auto</code> 。这个是 <code>font-display</code> 的默认值，字体的加载过程由浏览器自行决定，不过基本上和取值为 <code>block</code> 时的处理方式一致。</li><li><code>block</code> 。在字体加载前，会使用备用字体渲染，但是显示为空白，使得它一直处于阻塞期，当字体加载完成之后，进入交换期，用下载下来的字体进行文本渲染。不过有些浏览器并不会无限的处于阻塞期，会有超时限制，一般在 3 秒后，如果阻塞期仍然没有加载完字体，那么直接就进入交换期，显示后备字体（而非空白），等字体下载完成之后直接替换。</li><li><code>swap</code> 。基本上没有阻塞期，直接进入交换期，使用后备字体渲染文本，等用到的字体加载完成之后替换掉后备字体。</li><li><code>fallback</code> 。阻塞期很短（大约100毫秒），也就是说会有大约 100 毫秒的显示空白的后备字体，然后交换期也有时限（大约 3 秒），在这段时间内如果字体加载成功了就会替换成该字体，如果没有加载成功那么后续会一直使用后备字体渲染文本。</li><li><code>optional</code> 。与 fallback 的阻塞期一致，但是没有交换期，如果在阻塞期的 100 毫秒内字体加载完成，那么会使用该字体，否则直接使用后备字体。这个就是说指定的网络字体是可有可无的，如果加载很快那么可以显示，加载稍微慢一点就不会显示了，适合网络情况不好的时候，例如移动网络。</li></ul><p>那么在了解 <code>font-display</code> 之后，那么我们应该不难看出来，对于大部分情况应该把它的值设置为 <code>swap</code> ，这样在加载网络字体期间，使用后备字体进行渲染，加载完成之后在替换为指定的网络字体。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="应用">应用<a class="hash-link" href="#应用" title="标题的直接链接">​</a></h2><p>现在使用谷歌的 Web Fonts 字体服务已经不需要我们用手动去写 <code>@font-face</code> 指令了，而是通过调用它的接口，直接返回一段 <code>@font-face</code> 指令 CSS 代码，同时它也支持 <code>display=swap</code> 参数，来让返回的 CSS 代码中，设置 <code>font-display</code> 为 <code>swap</code> ，这个可以从我的网站上看到：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">/* https://fonts.font.im/css?family=Raleway:500,700&amp;display=swap */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token atrule rule" style="color:#e6db74">@font-face</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-family</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'Raleway'</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-style</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> normal</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-weight</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">500</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> swap</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">src</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token url function" style="color:#e6db74">url</span><span class="token url punctuation" style="color:#f8f8f2">(</span><span class="token url" style="color:#a6e22e">https://fonts.gstatic.font.im/s/raleway/v19/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2</span><span class="token url punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">format</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">'woff2'</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">unicode-range</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> U+</span><span class="token number" style="color:#ae81ff">0460</span><span class="token number" style="color:#ae81ff">-052</span><span class="token plain">F</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> U+</span><span class="token number" style="color:#ae81ff">1</span><span class="token plain">C80-1C88</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> U+</span><span class="token number" style="color:#ae81ff">20</span><span class="token plain">B4</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> U+</span><span class="token number" style="color:#ae81ff">2</span><span class="token plain">DE0-2DFF</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> U+A640-A69F</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> U+FE2E-FE2F</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">/* ... */</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="浏览器支持">浏览器支持<a class="hash-link" href="#浏览器支持" title="标题的直接链接">​</a></h2><p>从 <a href="http://caniuse.com" target="_blank" rel="noopener noreferrer">caniuse.com</a> 网站上可以查到，这个属性在各个浏览器中的支持程度为（最低版本）：</p><table><thead><tr><th align="center">IE</th><th align="center">Edege</th><th align="center">FireFox</th><th align="center">Chrome</th><th align="center">Safari</th><th align="center">IOS Safari</th><th align="center">Android Browser</th><th align="center">Chrome for Android</th><th align="center">FireFox for Android</th></tr></thead><tbody><tr><td align="center">No</td><td align="center">79</td><td align="center">58</td><td align="center">60</td><td align="center">11.1</td><td align="center">11.3</td><td align="center">81</td><td align="center">88</td><td align="center">86</td></tr></tbody></table>]]></content:encoded>
            <category>前端</category>
            <category>css</category>
            <category>性能优化</category>
        </item>
        <item>
            <title><![CDATA[JavaScript 游戏开发 - 物理碰撞引擎实现]]></title>
            <link>https://kuizuo.cn/javascript-collision-physics</link>
            <guid>javascript-collision-physics</guid>
            <pubDate>Mon, 28 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[从原生角度上如何实现游戏里的物理特性，例如运动、碰撞。不用框架编写一个简单的、基于 JavaScript Canvas 的物理引擎，实现小球的碰撞效果。]]></description>
            <content:encoded><![CDATA[<p>年前我看到合成大西瓜小游戏火了，想到之前从来没有研究过游戏方面的开发，这次就想趁着这个机会看看 JavaScript 游戏开发，从原生角度上如何实现游戏里的物理特性，例如运动、碰撞。虽然之前研究过物理相关的动画库，但是我打算试试不用框架编写一个简单的 JavaScript 物理引擎，实现小球的碰撞效果。</p><p>为什么不用现成的游戏库呢？因为我觉得在了解底层的实现原理之后，才能更有效的理解框架上的概念和使用方法，在解决 BUG 的时候能够更有效率，同时对自己的编码技能也是一种提升。在对 JavaScript 物理引擎的研究过程中，发现写代码是次要的，最主要的是理解相关的物理、数学公式和概念，虽然我是理科生，但是数学和物理从来不是我的强项，我不是把知识还给老师了，而是压根就没掌握过 ^o^。过年期间花了有小半个月的时间在学习物理知识，现在仍然对某些概念和推导过程没有太大的自信，不过最后还算是做出了一个简单的、比较满意的结果，见下图。</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/01-gravity-f0885f2d208bba06aa58d35a191fdfd2.mp4" type="video/mp4"></video><p>接下来看一下怎么实现这样的效果。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="基础结构">基础结构<a class="hash-link" href="#基础结构" title="标题的直接链接">​</a></h2><p>我们这里使用 canvas 来实现 JavaScript 物理引擎。首先准备项目的基础文件和样式，新建一个 index.html、index.js 和 style.css 文件，分别用于编写 canvas 的 html 结构、引擎代码和画布样式。</p><p>在 index.html 的 <code>&lt;head /&gt;</code> 标签中引入样式文件：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">link</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">stylesheet</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">./style.css</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 <code>&lt;body /&gt;</code> 中，添加 canvas 元素、加载 index.js 文件：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">canvas</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">gameboard</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">canvas</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">script</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">./index.js</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">script</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这段代码定义了 <code>id</code> 为 <code>gameboard</code> 的 <code>&lt;canvas /&gt;</code> 元素，并放在了 <code>&lt;main /&gt;</code> 元素下， <code>&lt;main /&gt;</code> 元素主要是用来设置背景色和画布大小。在 <code>&lt;main/&gt;</code> 元素的下方引入 index.js 文件，这样可以在 DOM 加载完成之后再执行 JS 中的代码。</p><p>style.css 中的代码如下：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">box-sizing</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> border-box</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">padding</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">margin</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-family</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> sans-serif</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector" style="color:#a6e22e;font-style:italic">main</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token unit">vw</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token unit">vh</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">hsl</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">deg</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">%</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token unit">%</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>样式很简单，去掉所有元素的外边距、内间距，并把 <code>&lt;main/&gt;</code> 元素的宽高设置为与浏览器可视区域相同，背景色为深灰色。</p><blockquote><p>hsl(hue, saturation, brightness) 为 css 颜色表示法之一，参数分别为色相，饱和度和亮度，可通过我<a href="https://www.bilibili.com/video/BV1E64y1Z79Q/" target="_blank" rel="noopener noreferrer">之前出过的视频</a>进行学习。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="绘制小球">绘制小球<a class="hash-link" href="#绘制小球" title="标题的直接链接">​</a></h2><p>接下来绘制小球，主要用到了 canvas 相关的 api。</p><p>在 index.js 中，编写如下代码：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> canvas </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementById</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"gameboard"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> ctx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> canvas</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getContext</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"2d"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">canvas</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">innerWidth</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">canvas</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">height</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">innerHeight</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> width </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> canvas</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> height </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> canvas</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">fillStyle</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hsl(170, 100%, 50%)"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">beginPath</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">arc</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">Math</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token constant" style="color:#e6db74">PI</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">fill</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>代码中主要利用了二维 context 进行绘图操作：</p><ul><li>通过 canvas 的 id 获取 canvas 元素对象。</li><li>通过 canvas 元素对象获取绘图 context， <code>getContext()</code> 需要一个参数，用于表明是绘制 2d 图像，还是使用 webgl 绘制 3d 图象，这里选择 2d。context 就类似是一支画笔，可以改变它的颜色和绘制基本的形状。</li><li>给 canvas 的宽高设置为浏览器可视区域的宽高，并保存到 <code>width</code> 和 <code>height</code> 变量中方便后续使用。</li><li>给 context 设置颜色，然后调用 <code>beginPath()</code> 开始绘图。</li><li>使用 <code>arc()</code> 方法绘制圆形，它接收 5 个参数，前两个为圆心的 x、y 坐标，第 3 个为半径长度， 第 4 个和第 5 个分别是起始角度和结束角度，因为 <code>arc()</code> 其实是用来绘制一段圆弧，这里让它画一段 0 到 360 度的圆弧，就形成了一个圆形。这里的角度是使用 radian 形式表示的，0 到 360 度可以用 0 到 2 * Math.PI 来表示。</li><li>最后使用 <code>ctx.fill()</code> 给圆形填上颜色。</li></ul><p>这样就成功的绘制了一个圆形，我们在这把它当作一个小球：</p><p><img loading="lazy" alt="image.png" src="/assets/images/02-circle-3120003417bbc449cbb677b03b1ab830.png" width="770" height="542" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="移动小球">移动小球<a class="hash-link" href="#移动小球" title="标题的直接链接">​</a></h2><p>不过，这个时候的小球还是静止的，如果想让它移动，那么得修改它的圆心坐标，具体修改的数值则与运动速度有关。在移动小球之前，先看一下 canvas 进行动画的原理：</p><p>Canvas 进行动画的原理与传统的电影胶片类似，在一段时间内，绘制图像、更新图像位置或形状、清除画布，重新绘制图像，当在 1 秒内连续执行 60 次或以上这样的操作时，即以 60 帧的速度，就可以产生连续的画面。</p><p>那么在 JavaScript 中，浏览器提供了 <code>window.requestAnimationFrame()</code> 方法，它接收一个回调函数作为参数，每一次执行回调函数就相当于 1 帧动画，我们需要通过递归或循环连续调用它，浏览器会尽可能的在 1 秒内执行 60 次回调函数。那么利用它，我们就可以对 canvas 进行重绘，以实现小球的移动效果。</p><blockquote><p>由于 <code>window.requestAnimationFrame()</code> 的调用基本是持续进行的，所以我们也可以把它称为游戏循环（Game loop）。</p></blockquote><p>接下来我们来看如何编写动画的基础结构：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">process</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里的 <code>process()</code> 函数就是 1 秒钟要执行 60 次的回调函数，每次执行完毕后继续调用 <code>window.requestAnimationFrame(process)</code>进行下一次循环。如果要移动小球，那么就需要把绘制小球和修改圆心 x、y 坐标的代码写到 <code>process()</code> 函数中。</p><p>为了方便更新坐标，我们把小球的圆心坐标保存到变量中，以方便对它们进行修改，然后再定义两个新的变量，分别表示在 x 轴方向上的速度 <code>vx</code>，和 y 轴方向上的速度 <code>vy</code>，然后把 context 相关的绘图操作放到 <code>process()</code> 中：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> x </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> y </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> vx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">12</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> vy </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">25</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">process</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">fillStyle</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hsl(170, 100%, 50%)"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">beginPath</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">arc</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">Math</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token constant" style="color:#e6db74">PI</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">fill</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>要计算圆心坐标 x、y 的移动距离，我们需要速度和时间，速度这里有了， 那么时间要怎么获取呢？ <code>window.requestAnimationFrame()</code> 会把当前时间的毫秒数（即时间戳）传递给回调函数，我们可以把本次调用的时间戳保存起来，然后在下一次调用时计算出执行这 1 帧动画消耗了多少秒，然后根据这个秒数和 x、y 轴方向上的速度去计算移动距离，分别加到 x 和 y 上，以获得最新的位置。注意这里的时间是上一次函数调用和本次函数调用的时间间隔，并不是第 1 次函数调用到当前函数调用总共过去了多少秒，所以相当于是时间增量，需要在之前 x 和 y 的值的基础上进行相加，代码如下：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> startTime</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">process</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">now</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">!</span><span class="token plain">startTime</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    startTime </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> seconds </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">now </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> startTime</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1000</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  startTime </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// 更新位置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  x </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> vx </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  y </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> vy </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// 清除画布</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">clearRect</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> width</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// 绘制小球</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">fillStyle</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hsl(170, 100%, 50%)"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">beginPath</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">arc</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">Math</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token constant" style="color:#e6db74">PI</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">fill</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>process()</code> 现在接收当前时间戳作为参数，然后做了下面这些操作：</p><ul><li>计算上次函数调用与本次函数调用的时间间隔，以秒计，记录本次调用的时间戳用于下一次计算。</li><li>根据 x、y 方向上的速度，和刚刚计算出来的时间，计算出移动距离。</li><li>调用 <code>clearRect()</code> 清除矩形区域画布，这里的参数，前两个是左上角坐标，后两个是宽高，把 canvas 的宽高传进去就会把整个画布清除。</li><li>重新绘制小球。</li></ul><p>现在小球就可以移动了：</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/03-moving-ball-86b4a7221dfaa5740d6238d3c9b4869c.mp4" type="video/mp4"></video><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重构代码">重构代码<a class="hash-link" href="#重构代码" title="标题的直接链接">​</a></h2><p>上边的代码适合只有一个小球的情况，如果有多个小球需要绘制，就得编写大量重复的代码，这时我们可以把小球抽象成一个类，里边有绘图、更新位置等操作，还有坐标、速度、半径等属性，重构后的代码如下：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">constructor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> r</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vx</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vy</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">context</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> y</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> vx</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> vy</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 绘制小球</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">draw</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">fillStyle</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hsl(170, 100%, 50%)"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">beginPath</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">arc</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">Math</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token constant" style="color:#e6db74">PI</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">fill</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * 更新画布</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * @param {number} seconds</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">update</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">seconds</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>里边的代码跟之前的一样，这里就不再赘述了，需要注意的是，Circle 类的 context 画笔属性是通过构造函数传递进来的，更新位置的代码放到了 <code>update()</code> 方法中。</p><p>对于整个 canvas 的绘制过程，也可以抽象成一个类，当作是游戏或引擎控制器，例如把它放到一个叫 <code>Gameboard</code> 的类中：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Gameboard</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">constructor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">startTime</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">12</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">25</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">70</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">45</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">process</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">bind</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">process</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">now</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">!</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">startTime</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">startTime</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> seconds </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">now </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">startTime</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1000</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">startTime</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i</span><span class="token operator" style="color:#66d9ef">++</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">update</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">seconds</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">clearRect</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> width</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i</span><span class="token operator" style="color:#66d9ef">++</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">draw</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token dom variable" style="color:#f8f8f2">window</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">process</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">bind</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Gameboard</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 Gameboard 类中：</p><ul><li><code>startTime</code> 保存了上次函数执行的时间戳的属性，放到了构造函数中。</li><li><code>init()</code> 方法创建了一个 <code>circles</code> 数组，里边放了两个示例的小球，这里先不涉及碰撞问题。然后调用 <code>window.requestAnimationFrame()</code> 开启动画。注意这里使用了 <code>bind()</code> 来把 <code>Gameboard</code> 的 this 绑定到回调函数中，以便于访问 <code>Gameboard</code> 中的方法和属性。</li><li><code>process()</code> 方法也写到了这里边，每次执行时会遍历小球数组，对每个小球进行位置更新，然后清除画布，再重新绘制每个小球。</li><li>最后初始化 <code>Gameboard</code> 对象就可以开始执行动画了。</li></ul><p>这个时候有两个小球在移动了。</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/04-two-moving-balls-863e75c16aaf4bae856fee7c1a2e7d19.mp4" type="video/mp4"></video><h2 class="anchor anchorWithStickyNavbar_LWe7" id="碰撞检测">碰撞检测<a class="hash-link" href="#碰撞检测" title="标题的直接链接">​</a></h2><p>为了实现仿真的物理特性，多个物体间碰撞会有相应的反应，第一步就是要先检测碰撞。我们先再多加几个小球，以便于碰撞的发生，在 Gameboard 类的 <code>init()</code> 方法中再添加几个小球：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">50</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">390</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">20</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">275</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">262</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">150</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">130</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">190</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">210</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">280</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">220</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">240</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">142</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">350</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">260</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">135</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">460</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">285</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">165</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">370</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">140</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">290</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">125</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">230</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">160</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">380</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">175</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">310</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">115</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">440</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">310</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">195</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">325</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">150</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">420</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">70</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">430</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">45</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">135</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">230</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">250</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">290</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">40</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">140</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">335</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后给小球添加一个碰撞状态，在碰撞时，给两个小球设置为不同的颜色：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">constructor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> r</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vx</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vy</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 其它代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">colliding</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">draw</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">fillStyle</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">colliding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token operator" style="color:#66d9ef">?</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hsl(300, 100%, 70%)"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hsl(170, 100%, 50%)"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 其它代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在来判断小球之间是否发生了碰撞，这个条件很简单，判断两个小球圆心的距离是否小于两个小球的半径之和就可以了，如果小于等于则发生了碰撞，大于则没有发生碰撞。圆心的距离即计算两个坐标点的距离，可以用公式：</p><p>$$
\sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2}
$$</p><p>x1、y1 和 x2、y2 分别两个小球的圆心坐标。在比较时，可以对半径和进行平方运算，进而省略对距离的开方运算，也就是可以用下方的公式进行比较：</p><p>$$
(x_1 - x_2)^2 + (y_1 - y_2)^2 \leq (r_1 + r_2)^2
$$</p><p>r1 和 r2 为两球的半径。</p><p>在 Circle 类中，先添加一个<code>isCircleCollided(other)</code>方法，接收另一个小球对象作为参数，返回比较结果：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">isCircleCollided</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">other</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> squareDistance </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> squareRadius </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> squareDistance </span><span class="token operator" style="color:#66d9ef">&lt;=</span><span class="token plain"> squareRadius</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再添加 <code>checkCollideWith(other)</code> 方法，调用 <code>isCircleCollided(other)</code> 判断碰撞后，把两球的碰撞状态设置为 true：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">checkCollideWith</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">other</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">isCircleCollided</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">other</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">colliding</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">colliding</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接着我们需要使用双循环两两比对小球是否发生了碰撞，由于小球数组存放在 Gameboard 对象中，我们给它添加一个 <code>checkCollision()</code> 方法来检测碰撞：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">checkCollision</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// 重置碰撞状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">forEach</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">circle</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">colliding</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i</span><span class="token operator" style="color:#66d9ef">++</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> j </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> j </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> j</span><span class="token operator" style="color:#66d9ef">++</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">checkCollideWith</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">j</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>因为小球在碰撞后就应立即弹开，所以我们一开始要把所有小球的碰撞状态设置为 false，之后在循环中，对每个小球进行检测。这里注意到内层循环是从 i + 1 开始的，这是因为在判断 1 球和 2 球是否碰撞后，就无须再判断 2 球 和 1 球了。</p><p>之后在 <code>process()</code> 方法中，执行检测，注意检测应该发生在使用 for 循环更新小球位置的后边才准确：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword control-flow" style="color:#66d9ef">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i</span><span class="token operator" style="color:#66d9ef">++</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">update</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">seconds</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">checkCollision</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在，可以看到小球在碰撞时，会改变颜色了。</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/05-collision-detect-40076661583ef0ecd0114c8d4c47b600.mp4" type="video/mp4"></video><h2 class="anchor anchorWithStickyNavbar_LWe7" id="边界碰撞">边界碰撞<a class="hash-link" href="#边界碰撞" title="标题的直接链接">​</a></h2><p>上边的代码在执行之后，小球都会穿过边界跑到外边去，那么我们先处理一下边界碰撞的问题。检测边界碰撞需要把四个面全部都处理到，根据圆心坐标和半径来判断是否和边界发生了碰撞。例如跟左边界发生碰撞时，圆心的 x 坐标是小于或等于半径长度的，而跟右边界发生碰撞时，圆心 x 坐标应该大于或等于画布最右侧坐标（即宽度值）减去半径的长度。上边界和下边界类似，只是使用圆心 y 坐标和画布的高度值。在水平方向上（即左右边界）发生碰撞时，小球的运动方向发生改变，只需要把垂直方向上的速度 vy 值取反即可，在垂直方向上碰撞则把 vx 取反。</p><p><img loading="lazy" alt="edge-collision-diagram.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANUAAAEECAYAAAC/VXG9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABS8SURBVHgB7d1tbFxVegfw577MeMY2eCyykLCkGZeU5kMgk3alAiutHKFFi7RByYcuS7/YUVdAVqgJZBe2LCVjdgMsEAgVSxS0Eo6oFMKulAhWpV+2sSItbaWVPIG0iqq0HicpJMHBk5DY83LvOT3PMGMcr+3MjOfO3HPv/yeNPPa83EuY/5xzz73nOUQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTCojU688gNJDVjz+K/aut8AizEJAJoKoQJoMoQKoMlsgtB5a2wyEeumlOGKTYZhrlJH1qnKQ8nqcwyDclJSltRNkDhGpjmSv0yZLX29OYJFIVQhUQ5SF21SXZMB2zBS3aaR6LYt6rb4ZpY/CDHzq/EfR8pEXlIqL0TqsgpfzhU7c12CDp6fHFH9m+EHlvXuJ5gXQhVwHKbubtqmhlm395hmYnnEpmW2CpGx+AAqP96tntJtWur5VvlvKmg04Yj+CcftV+FKqwwOOw7tf3BFb5ZgBo6pAuzdC5Pburpp7EbbSv9VZyyR6uyg5RHrmoFaCL+OX782HqU7u2JJfl+VuSPvnL2wnWAGWqoAOvDpZFJ92A/1kJla0xm9qlvXLPyea2JRSkZl8mSh+KpqubYJlzag1UJLFTi/mZgciNrG6OpYJMUtkxeBmo3ff228g9T2krxdtFoIVaD8+rPJnREyhr/R2ZG4JdLaTghvj7cbt6xXeT8oxBCqgOAPcqdhpFNx71unhfB2uXXk/QhzsBCqAJgJVGf7AlWFYCFU2uMRvqj6APNxTaOjes3G+8H7EyUjffDcpQEKGYRKYzzKZ4n2dvkWUm2xbFPs4f2kEEGoNMbniJIddsJvgari/eL94+F9ChGESlPc7VtmW8lWj/LVi/cvYZmpMA21I1Qa4u6UdGn76o4I6YBPEpNp7uRLpigEECoN2TYNLI9YSb92++bi/VwRsRKxThGK1gqh0pCQNJiM6tFKVfH+Goa5LQytFUKlmQPnJwb5WEqXVqqK97fXMhOxLncTBRxCpRmTrAGeuqEjnnbC+08Bh1Bp5NBkuevUX53fNJ8P3nuPTo+P07+on8ePHSv/7heVeVypoHcBESqN5POUSliLTzA8feoUfXj0KH3n/vvppV27aO26deQX5YmPplGeyk8BhlDpxBT9HKrF3LdxIx3/6Fi5tfrmt75Fv1cB85Nu0ySujUEBhkmKbfbi6FjKMc11T61bdc2aD6Z6Hn8oF7Ny1Sr62Usvl+8/9Oij5Dfd5S8FI0kBhpaqjThQrmEcsoU4VtMLJGk36jdXt2WQYRr+6ZN6AKFqk2qgLCk3P7G+L1PLa1SctA+VTXrvfy3Q/WuDSqCOqLsjJaJNu0bHajrG+PyLfOLjgkteicRtmlBnlpNRm5IeXQJV+VJIUoChpYIZHCiWLToEjUNL1Qbc3VOt1Qbu/qn2YKjW7t/B85M7118XJ69wmLKFEt1g4Lt2KfCv1yYcJD6e4mBxd7DGl2XzQpBXuNvXo7qXTr5EXuGCnKo9DHTpaISqjarB4iH1Wl/jNLSil3/kVajUUVWWAgzdvzardP1q6v6pT2PmshDJbkvf78K8Om6TQo5TgKGl0oiUYvyy6133rxV4/6Uha/sS0RRCpRHpmocvC737fzn+UjDNEQowhEojsRh3/2SOD/Z1xPvNoeJ1rijAECqNbO7t5UBlJhzvTgB7acIRPPI3EvSF4xAqzQhy958ttSdU1blaB99+my7lcnXP1ZpwHDKkNUwBh1BpJhaxDl90RS7fhmOrr+ZqbaR9v3y9vIZprXh/J0oi+8BN1wd+BUaESjPcBXSleC1b9O4E7UKqc7V6ehLlFot/rxXvrxqiCMWSpgiVhmJRc8+5ktvy1qo6V4sDtfaO2mdv8H6eLbpZlaphCgGESkPcWglBQyfyRWoHDlc9EyBPFkrqHBu9FpZVFhEqTX1/ee8eNTydOePzK8p5/yZKbpb3l0ICodKYcGlztui0ZdCiFrxfvH+qVd1AIYJQaYy7U0VHPpaZLpDfgsX7k5kqUMmVQ2FbXBuh0pz6wA5fzhmvH1fB8suVFrwfHKgpIYfC1O2rQqg091w6f9sn/9T5xcVpepE/yO1usaotFAfqwZt60xRCCJXGXkiX7o6QtbUjbr/xNysTT15SXa12dgWrgeL9CGugGEKlKQ6URfTdUtT++d89aZzhv/EHeVodY/1hqpBr9aggb4+3OyXlljAHiiFUGvrFUOmeSqB2P/WUcWH2Y3wMowYv1p/Ml7LHp4uet1rV1kltL8PbffDG3mEKOcz81cwLzzgbTSnvmi9QVZXRtr53zk5uV+eIti2PWkleH6qZNQO/HC4vEV/ZwSeiwzggsRC0VBrhQFnm4oGajT/ofI7ok6I79O+X8+WW62zJaXiUkF/Hr+eW6T+u5HP8vleuUB8CdTW0VJqoN1BVlVYrzbcD5ycHP3PcAYNK5YUO+NatWq+YaZZbsdmriXDVJi4yc1n95CnwPOOYJ0iWpMyoP+/PX6HDQZ8X1SiESgMcKINkqt5AzVU53hnm9aFETKQ+N51+XvSAa7RzSWkVlsRk5er33JVCln+qnGWkK8alNA/n85RBkK4NofK5aqCmTXt3+iljipqgEoyRyu0qu0bH0vzzkVtXpAkaglD52Ivp4qAUcmU5UOnmBAq8h4EKn+JAmYYpESj9oKXymXRadnZS6XscqB/ttEMxUzZo0FL5CAcqLpwdCJTe0FL5RDVQdsQY3fEP9m8JtIVQ+cBzz8kbrLzzQwQqGND9azMOVKSIFipIEKo2qgbKtIwPEajgQKjaxE+Ben50bHC+hef4b88dGx8gqAtC1QYzgRL0Oz+0UBZRZu6KjpXFvg/ZQhwjqAtC1WLVQJFpv7/j2cjvyAdmL5VqGsY6vvF9/lut6xHDVxCqFvrHX8hbVKCe5kD9+Bnj38hHqsFSd/v5hkA1DqFqEQ5UYdr5oUn2Xr8FqqoSrA18Q6Aah/NULcAVj1SgBrlAS7WehF8hTEuHUHmsUqDlr1Wgdvs9UNAcCJWHZlc8+vGTjU8uBL0gVB7hikempHuWOlsX9INQeaCWikcQXBj9a7JGC7RAcCBUTYRAAUOomqRZFY9AfzimagIvKh6BvhCqJULFI5gL3b8lQMUjmA9aqgag4hEsBi1VnVDxCK4FLVUdUPEIaoFQ1QgVj6BW6P7VABWPoB4I1TWg4hHUC6FaBAIFjcAx1QKuqniUtn1RoAX0gFDN46qKR2l/1pMA/0L3bw4/VzwCPaClmmV2xaMdzxj/TQANQKgqdKp4BP6GUBEqHkFzhT5UqHgEzRbqUKHiEXghtKFCxSPwSiiH1FGgBbwUulAhUOC1UIUKFY+gFUJzTIWKR9AqoQgVKh5BKwW++4eKR9BqgW2pUPEI2iWQLRUqHkE7Ba6lQsUjaLdAhQoVj8APAtP9Q8Uj8ItAhAoFWsBPtAvVJXdleZi8+jsCBX6j3TGVS5GZ+6h4BH6kXaiKsoskmROoeAR+peXon2GIlZGivEcF6l1UPAK/MaiNTrzyA0l1OufcTn/REyvff+PTv91ouvJC0ZLTP01HM1/s23fV+zlC9PVu3Zqt/n5p374x9R+cbPTxL9588whJ2T+zASE2XLd160ijj0shtly/detw9feLe/cOm6Y5sITH0+rxnV9tXgz1bN2arvXxS3v3Dhqm+Vb1d8MwhrsfemhLo4+r/9aR6x55ZEP118m9e/tt0zyyhMeT6vGxme0TZbsffriv0cfZdQ8/fFUGqp+huX+vh3ahuiJupH+98uyvhSs/JtMYtQy6wZE0/ZO0/S4B+IB23b8u8zx1xKzHC9PODpfk5z/aGcGIH/iKluepuIwYVz/iKkhcDYkAfETbk788c5dn8JaDNZTfSAA+ofUVFTPBktZdCBb4hfaXKSFY4DeBuPYPwQI/CcxV6ggW+EWgZv5ysK7Q+Z+bZK1DsKBdAjedPp3++tSUPP8KB2v21ewArRLQGhVfBosMiiNY0GraXabE1jz+q5r3++UhZ0CQ0Tn1f+b+9JsoUQbeC3zdP66mZJKcii93dqQfkp0E4LFQ1FLnYNmmPYpgQSuEZoGCHWnjtxysrpudp3mCIwF4JFSrfnCwTLI/5BnDCBZ4JXTrUyFY4LVQrqSIYIGXQhkqhmCBV0IbKsbB4mpMCBY0U6hDxcrVmMrBEk/v/qlcSQBLFPpQMQ6WJHe/iDpbESxYKoSq4ol0NNMRs9/gYL2YLqYIoEEI1SxcUIaDZZAxgIIy0CiEag5UaoKlQqjmgUpNsBQI1QIwPR8ahVAtAsGCRiBU14BgQb0QqhogWFAPhKpGqNQEtUKo6oBKTVALhKpOqNQE1xL4akpeQqUmmA9aqiVApSaYD0K1RKjUBHMhVE2ASk0wG0LVJJieD1UIVRMhWMAQqiZDsACh8gCCFW4IlUdQqSm8ECoPoVJTOCFUHkOlpvBBqFoAlZrCBaFqEVRqCg+EqoVQqSkcEKoWQ6Wm4EOo2gDT84MNoWoTBCu4EKo2QrCCCaFqMwQreBAqH0ClpmBBqHwClZqCA6HyEVRqCgZUU/IpVGrSF1oqn0KlJn0hVD6GSk16QvdPA7vT8ruCnLt56J1HCmmJ3hqbTKxJ2Km+jsgmwzRWkZSpbKFI2aKbrD7nTyJW7k/jHVl1NytccSxbdEZO5JzMlr7eHMGiECpNLDVYHKRYF21SXZMB2zBSyyNWYnVHZOZxR0pSf1/w9SfzJTpTcvjuiOrfDD+wrHc/wbwQKo00EqwxKRPd+eK2opDbTxSKiWW2Rctsc9EALYSDN+EIdXPp1o5Itss0hx0S+1fE41mCGTim0shCBWVeSDvf2/2sXDf3+efz+W1d04UxQTKtcpRYG4+SaqEaChTj1/Hr+X3ippHk9zXJODJ2eWo7wQyESjPzBUt91uOqBZsZyDjw6WTy4PnJ0dMFZ480KEHeSn4uxKtqe2O8XQKESkdzKzWpXtm0cKgcqt9MTA5EbWN0dSySuiVqUyvcErFJbS/J233n7IXQt1oIlaZmV2oyDeMGMo34uUJh59csa/gbnR0J/qC3Em+Pt7syFn31s+nCTgqx1v7LQ1PsShdTUdeIC+HeYBjyAkkjdde33U0k5L1rYlFql5hpEI8o8rGWChZ9Ld4xRCGElkpDFpm3GbZxG9+X0sjc+W03ufLP5L3kI5VghbLFQkuloZ+k7Xer99+9MLnNMu17O2MR8pv/yhfSB89dyj5w0/WhOqeFlkpjPNpmCSPdqgGJeiWjEbJNsSdso4IIlcZMi44kO+wEH8v4Ee8X75/az0MUIgiVpsan8tt4GLvVo3z1Kg+3d0RSZ6fyoRlqR6g09On0dDJm0Ha/B6qKu6eGSTv5kikKAYRKQ6ZpDqgfSdKJpERnSForhEpD064YJA05hrGNr5angEOoNHPg/MTg/+RLSdLQiXwhEetSJ6kDDqHSjEnWAE/d0NEy2y7vPwUcQqWRQ5PlrlM/z4nSUWUeVyroXUBcUaGR5WSnREQ2PB/KK78/epRuv+MO+vijj8qzXi/mcnTf/ff/0fMq87ESNyeIF74boYBCqDSSjNr9ps9O9H7w/vu0ctUq+mf1syeRKAdqMXzBrZTEx1UjFFDo/mnEtMx15DP3bdxIa1Ur9Z+qleL7ly7m6PT4+LVelqQAQ40KjZybyo+q/2NBWDM4e1M81rfQg8+Pjg2qo8bME+v7MqQhtFQa+d9iMUma4+Ix2YKz6HM4UK5hHHpxdEzLLxCESiOniq72o2Y8WJEtLn6ejVsoS8rNugYLAxUw4/iVPE0IScvUB7+Ud8grk8US7RodSy/2nBKVv/G5xTqigrVBp64gWiqYwYEq/5QNHepCBVoqjSSjkaw6Jkl6dZ4qqYa7s4US3WCYdPuyOHnl+kIpd/etK9KLPYe7fS7RgOoGatVKMbRUGkl22J6e+FXnwain4JKTL5GXVqsvh8UeLwdKHU/xcZWOI4AIlU4MQ8sh5rkE0aInslQLldI1UAzdP41I4Y4bhv7fg1LKRcPy9+v7hkljaKk0MlZwD5/0uGvmtZN5XrLHGaEAQ0ulkbPkZIRj5JLSTvjtotpa8InfMyWXpq5QILqxC0FLpZHNvb059cHM8FI2OuJleNRg/UjQF45DqDQjyN3PH04dTTgOGdIapoBDqDQTi1iH/7wj2pZv+g/ee698BfrBt9+mS7lc+fd63NoRDUW1WoRKM9wFtEz5GrXB6VOn6MOjR+k792+kfb98vbwwVj3U6eRQlH9GqDQUy+f3GJJa3lrxfKnjHx2jnp5EucXi3+uQFSYNUwggVBrq5QELk4bOFL276HU+PMP3Zy+9XA7U2jtqny/J+zklxWthWRsYodLUzbHYnpOFUqbVwWIcrocefbSm5/L+qXNr2b7Ozj0UEgiVxoRLm9WJ1Fxe+POqct4v3j8haAOFCEKlsQdX9KrPrHwsW/TnVRZnSg6VXDnE+0khgisqNKc+sMO8YIG667tVC1dH7KFvJq4LTbevCi1VAKgBgLQg6a/1dYUcuqkrnqYQQqgCohosvmC1XcdYvN0TavthDhRDqAKEg3W64D72h6lCrtWjgrw93u4nJXdLmAPFEKqA+f7y3j1q8GI9D2O3KliVYfMMb/fBG3uHKeQwUBFAldG2vrHLU7zI2jbysCIsX9nxdTUg8Zc93aEbkFgIWqoA6+vu3KOOszbwsda0kNnj00U6q4a5nQarJfHr+PX8PiVBOX7fK/GOvuWdMQRqFrRUAVe5NCjNtwPnJwc/c9wBg0r95QWuY5EFX8cBmj0Rkmccn3XcXEnKjIrk/lMXpw8HfV5UoxCqEKkc7wzz+lBmglJCyH7TMtaRoCSXlOYKuJOVE8mJopvt67C52n7GFTSuujSHL12WGQTp2hCqEKoEY4TmWc6mWjn2zmvU5YOFtTVUYV29A4INAxUATYZQATQZQgXQZAgVQJMhVABNhlABNBlCBdBkCBVAkyFUQM+Pjg3Ot2A1/+25Y+MDBHVBqICsLxesvmol+OpqhrYQxwjqgsuEoKwaInW3usyN1qsZthNCBTMqwTrC93VcwBrAlzhY8x1fAQAAAAAAAAAAAMD/A9/xjW/4udowAAAAAElFTkSuQmCC" width="213" height="260" class="img_ev3q"></p><p>现在看一下代码的实现，在 Gameboard 类中添加一个 <code>checkEdgeCollision()</code> 方法，根据上边描述的规则编写如下代码：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">checkEdgeCollision</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">forEach</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">circle</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 左右墙壁碰撞</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> width </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> width </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 上下墙壁碰撞</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> height </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> height </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在代码中，碰撞时，除了对速度进行取反操作之外，还把小球的坐标修改为紧临边界，防止超出。接下来在 <code>process()</code> 中添加对边界碰撞的检测：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">checkEdgeCollision</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">checkCollision</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这时候可以看到小球在碰到边界时，可以反弹了：</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/07-edge-collision-3ab5eed0bed90c053d1944cdb0817615.mp4" type="video/mp4"></video><p>但是小球间的碰撞还没有处理，在处理之前，先复习一下向量的基本操作，数学好的同学可以直接跳过，只看相关的代码。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="向量的基本操作">向量的基本操作<a class="hash-link" href="#向量的基本操作" title="标题的直接链接">​</a></h2><p>由于在碰撞时，需要对速度向量（或称为矢量）进行操作，向量是使用类似坐标的形式表示的，例如 &lt; 3, 5 &gt; (这里用 <code>&lt;&gt;</code> 表示向量)，它有长度和方向，对于它的运算有一定的规则，本教程中需要用到向量的加法、减法、乘法、点乘和标准化操作。</p><p>向量相加只需要把两个向量的 x 坐标和 y 坐标相加即可，例如：$&lt;3, 5&gt; + &lt;1, 2&gt; = &lt;4, 7&gt;$
减法与加法类似，把 x 坐标和 y 坐标相减，例如：$&lt;3, 5&gt; - &lt;1, 2&gt; = &lt;2, 3&gt;$</p><p>乘法，这里指的是向量和标量的乘法，标量指的就是普通的数字，结果是把 x 和 y 分别和标量相乘，例如：$3\times&lt;3, 5&gt; = &lt;9, 15&gt;$。</p><p>点乘是两个向量相乘的一种方式，类似的还有叉乘，但是在本示例中用不到，点乘其实计算的是一个向量在另一个向量上的投影，它的计算方式为两个向量的 x 的积加上 y 的积，它返回的是一个标量，即第 1 个向量在第 2 个向量上投影的长度，例如：$&lt;3, 5&gt; \cdot &lt;1, 2&gt; = 3 \times 1 + 5 \times 2 = 13$</p><p>标准化是除掉向量的长度，只剩下方向，这样的向量它的长度为 1，称为单位向量，标准化的过程是让 x 和 y 分别除以向量的长度，因为向量表示的是和原点(0, 0)的距离，所以可以直接使用 $\sqrt{(x^2 + y^2)}$ 计算长度，例如 &lt; 3, 4 &gt; 标准化后的结果为：$&lt;3, 5&gt; \cdot &lt;1, 2&gt; = 3 \times 1 + 5 \times 2 = 13$。</p><p>了解了向量的基本运算后，我们来创建一个 Vector 工具类，来方便我们进行向量的运算，它的代码就是实现了这些运算规则：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">constructor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">x</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> y</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> y</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * 向量加法</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * @param {Vector} v</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">v</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> v</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> v</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * 向量减法</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * @param {Vector} v</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">substract</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">v</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> v</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> v</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * 向量与标量乘法</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * @param {Vector} s</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">multiply</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">s</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> s</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> s</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * 向量与向量点乘（投影）</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * @param {Vector} v</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">dot</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">v</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * 向量标准化（除去长度）</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   * @param {number} distance</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">normalize</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> distance </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">Math</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">sqrt</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> distance</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> distance</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>代码中没有什么特殊的语法和操作，这里就不再赘述了，接下来我们看一下小球的碰撞问题。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="碰撞处理">碰撞处理<a class="hash-link" href="#碰撞处理" title="标题的直接链接">​</a></h2><p>碰撞处理最主要的部分就是计算碰撞后的速度和方向。通常最简单的碰撞问题是在同一个水平面上的两个物体的碰撞，称为一维碰撞，因为此时只需要计算同一方向上的速度，而我们现在的程序小球是在一个二维平面内运动的，小球之间发生正面相碰（即在同一运动方向）的概率很小，大部分是斜碰（在不同运动方向上擦肩相碰），需要同时计算水平和垂直方向上的速度和方向，这就属于是二维碰撞问题。不过，其实小球之间的碰撞，只有在连心线（两个圆心的连线）上有作用力，而在碰撞接触的切线方向上没有作用力，那么我们只需要知道连心线方向的速度变化就可以了，这样就转换成了一维碰撞。</p><p><img loading="lazy" alt="collision-diagram.png" src="/assets/images/08-collision-diagram-6bb8a2bd4a59f89712985d8a73620862.png" width="1096" height="584" class="img_ev3q"></p><p>计算碰撞后的速度时，遵守动量守恒定律和动能守恒定律，公式分别为：</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="动量守恒定律">动量守恒定律<a class="hash-link" href="#动量守恒定律" title="标题的直接链接">​</a></h5><p>$$
m_1v_1 + m_2v_2 = m_1v_1' + m_2v_2'
$$</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="动能守恒定律">动能守恒定律<a class="hash-link" href="#动能守恒定律" title="标题的直接链接">​</a></h5><p>$$
\frac{1}{2}m_1v_1^2+\frac{1}{2}m_2v_2^2=\frac{1}{2}m_1v_1'^2+\frac{1}{2}m_2v_2'^2
$$</p><p>m1、m2 分别为两小球的质量，v1 和 v2 为两小球碰撞前的速度向量，v1' 和 v2' 为碰撞后的速度向量。根据这两个公式可以推导出两小球碰撞后的速度公式：</p><p>$$
v_1'=\frac{v_1(m_1-m_2)+2m_2v_2}{m_1+m_2}
$$</p><p>$$
v_2'=\frac{v_2(m_2-m_1)+2m_1v_1}{m_1+m_2}
$$</p><p>如果不考虑小球的质量，或质量相同，其实就是两小球速度互换，即：</p><p>$$
v_1'=v_2
$$</p><p>$$
v_2'=v_1
$$</p><p>这里我们给小球加上质量，然后套用公式来计算小球碰撞后速度，先在 Circle 类中给小球加上质量 mass 属性：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">constructor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> r</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vx</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vy</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> mass </span><span class="token parameter operator" style="color:#66d9ef">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 其它代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> mass</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后在 Gameboard 类的初始化小球处，给每个小球添加质量：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">50</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">390</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">20</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">275</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">20</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">262</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">150</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">130</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">190</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">210</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">280</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">220</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">240</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">142</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">350</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">260</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">135</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">460</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">285</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">165</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">370</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">140</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">290</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">125</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">230</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">160</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">380</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">175</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">310</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">115</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">440</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">310</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">195</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">325</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">150</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">420</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">70</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">430</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">45</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">135</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">230</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">45</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">250</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">290</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">40</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">140</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">335</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">40</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 Circle 类中加上 <code>changeVelocityAndDirection(other)</code> 方法来计算碰撞后的速度，它接收另一个小球对象作为参数，同时计算这两个小球碰撞厚的速度和方向，这个是整个引擎的核心，我们一点一点的来看它是如何实现的。首先把两个小球的速度使用 Vector 向量来表示：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">changeVelocityAndDirection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">other</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 创建两小球的速度向量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> velocity1 </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> velocity2 </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>因为我们本身就已经使用 vx 和 vy 来表示水平和垂直方向上的速度向量了，所以直接把它们传给 Vector 的构造函数就可以了。<code>velocity1</code> 和 <code>velocity2</code> 分别代表当前小球和碰撞小球的速度向量。</p><p>接下来获取连心线方向的向量，也就是两个圆心坐标的差：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> vNorm </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来获取连心线方向的单位向量和切线方向上的单位向量，这些单位向量代表的是连心线和切线的方向：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> unitVNorm </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> vNorm</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">normalize</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> unitVTan </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Vector</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">unitVNorm</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> unitVNorm</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>unitVNorm</code> 是连心线方向单位向量，<code>unitVTan</code> 是切线方向单位向量，切线方向其实就是把连心线向量的 x、y 坐标互换，并把 y 坐标取反。根据这两个单位向量，使用点乘计算小球速度在这两个方向上的投影：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v1n </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity1</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">dot</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">unitVNorm</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v1t </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity1</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">dot</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">unitVTan</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v2n </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity2</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">dot</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">unitVNorm</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v2t </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity2</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">dot</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">unitVTan</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>计算结果是一个标量，也就是没有方向的速度值。<code>v1n</code> 和 <code>v1t</code> 表示当前小球在连心线和切线方向的速度值，<code>v2n</code> 和 <code>v2t</code> 则表示的是碰撞小球 的速度值。在计算出两小球的速度值之后，我们就有了碰撞后的速度公式所需要的变量值了，直接用代码把公式套用进去：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v1nAfter </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v1n </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v2n</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v2nAfter </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v2n </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v1n</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>v1nAfter</code> 和 <code>v2nAfter</code> 分别是两小球碰撞后的速度，现在可以先判断一下，如果 <code>v1nAfter</code> 小于 <code>v2nAfter</code>，那么第 1 个小球和第 2 个小球会越来越远，此时不用处理碰撞：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v1nAfter </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> v2nAfter</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后再给碰撞后的速度加上方向，计算在连心线方向和切线方向上的速度，只需要让速度标量跟连心线单位向量和切线单位向量相乘：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v1VectorNorm </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> unitVNorm</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">multiply</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v1nAfter</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v1VectorTan </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> unitVTan</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">multiply</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v1t</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v2VectorNorm </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> unitVNorm</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">multiply</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v2nAfter</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v2VectorTan </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> unitVTan</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">multiply</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v2t</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样有了两个小球连心线上的新速度向量和切线方向上的新速度向量，最后把连心线上的速度向量和切线方向的速度向量进行加法操作，就能获得碰撞后小球的速度向量：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> velocity1After </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> v1VectorNorm</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v1VectorTan</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> velocity2After </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> v2VectorNorm</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v2VectorTan</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>之后我们把向量中的 x 和 y 分别还原到小球的 vx 和 vy 属性中：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity1After</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity1After</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity2After</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> velocity2After</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>最后在 <code>checkCollideWith()</code> 方法的 if 语句中调用此方法，即在检测到碰撞时：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">checkCollideWith</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">other</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">isCircleCollided</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">other</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">colliding</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">colliding</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">changeVelocityAndDirection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">other</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// 在这里调用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这时，小球的碰撞效果就实现了。</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/09-ball-collision-f056cfb02b7e88c1663226fa45fa49b9.mp4" type="video/mp4"></video><h2 class="anchor anchorWithStickyNavbar_LWe7" id="非弹性碰撞">非弹性碰撞<a class="hash-link" href="#非弹性碰撞" title="标题的直接链接">​</a></h2><p>现在小球之间的碰撞属于完全弹性碰撞，即碰撞之后不会有能量损失，这样小球永远不会停止运动，我们可以让小球在碰撞之后损失一点能量，来模拟更真实的物理效果。要让小球碰撞后有能量损失，可以使用恢复系数，它是一个取值范围为 0 到 1 的数值，每次碰撞后，乘以它就可以减慢速度，如果恢复系数为 1 则为完全弹性碰撞，为 0 则是完全非弹性碰撞，之间的数值为非弹性碰撞，现实生活中的碰撞都是非弹性碰撞。</p><p>先看一下边界碰撞，这个比较简单，假设边界的恢复系数为 0.8，然后在每次对速度取反的时候乘以它就可以了，把 Gameboard <code>checkEdgeCollision() </code>方法作如下改动：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">checkEdgeCollision</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> cor </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.8</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">                  </span><span class="token comment" style="color:#8292a2;font-style:italic">// 设置恢复系统</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">forEach</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">circle</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">// 左右墙壁碰撞</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> cor</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// 加上恢复系数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> width </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> cor</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// 加上恢复系数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> width </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">// 上下墙壁碰撞</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> cor</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// 加上恢复系数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> height </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> cor</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// 加上恢复系数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> height </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> circle</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">r</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来设置小球的恢复系数，给 Circle 类再加上一个恢复系数 cor 属性，每个小球可以设置不同的数值，来让它们有不同的弹性，然后在初始化小球时设置随意的恢复系数：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">constructor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> r</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vx</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> vy</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> mass </span><span class="token parameter operator" style="color:#66d9ef">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:#ae81ff">1</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> cor </span><span class="token parameter operator" style="color:#66d9ef">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// 其它代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">cor</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> cor</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Gameboard</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">circles</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">50</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">390</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">20</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">275</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">20</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">262</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.3</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">150</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">130</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">190</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">210</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">280</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">220</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">240</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">142</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">350</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">260</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">135</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">460</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">120</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">285</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">165</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">370</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">140</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">290</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">125</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">230</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">160</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">380</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">175</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">180</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">310</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">115</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">440</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">310</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">195</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">325</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">150</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">138</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">420</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">70</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">430</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">45</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">135</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">230</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">45</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">250</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">290</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">40</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">140</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">335</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">40</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>加上恢复系数之后，小球碰撞后的速度计算也需要改变一下，可以简单的让 <code>v1nAfter</code> 和 <code>v2nAfter</code> 乘以小球的恢复系数，也可以使用带有恢复系数的速度公式（这两种方式我暂时还不太清楚区别，有兴趣的小伙伴可以自己研究一下），公式如下：</p><p>$$
v_1'=\frac{m_1v_1+m_2v_2+m2C_R(v_2-v_1)}{m_1+m_2}
$$</p><p>$$
v_2'=\frac{m_1v_1+m_2v_2+m1C_R(v_1-v_2)}{m_1+m2}
$$</p><p>接着把公式转换为代码，在 Circle 类的 <code>changeVelocityAndDirection()</code> 方法中，替换掉 <code>v1nAfter</code> 和 <code>v2nAfter</code> 的计算公式：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> cor </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">Math</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">min</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">cor</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">cor</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v1nAfter </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v1n </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v2n </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> cor </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v2n </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> v1n</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> v2nAfter </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v1n </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> v2n </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> cor </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">v1n </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> v2n</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> other</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">mass</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里要注意的是两小球碰撞时的恢复系数应取两者的最小值，按照常识，弹性小的无论是去撞别人还是别人撞它，都会有同样的效果。现在小球碰撞后速度会有所减慢，不过还差一点，我们可以加上重力来让小球自然下落。</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/10-coefficient-of-restitution-b7ed02b791e9ef0f75adc74fee56e3d1.mp4" type="video/mp4"></video><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重力">重力<a class="hash-link" href="#重力" title="标题的直接链接">​</a></h2><p>添加重力比较简单，先在全局定义重力加速度常量，然后在小球更新垂直方向上的速度时，累计重力加速度就可以了：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> gravity </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">980</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Circle</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">update</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">seconds</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> gravity </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// 重力加速度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>重力加速度大约是 $9.8m/s^2$，但是由于我们的画布是以象素为单位的，所以使用 9.8 看起来会像是没有重力，或者像是从很远的地方观察小球，这时候可以把重力加速度放大一定倍数来达到更逼真的效果。</p><video autoplay="" loop="" muted="" playsinline=""><source src="/assets/medias/01-gravity-f0885f2d208bba06aa58d35a191fdfd2.mp4" type="video/mp4"></video><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>现在我们这个简单的 JavaScript 物理引擎就完成了，实现了物理引擎最基本的部分，可以有一个完整的掉落和碰撞的效果，要做一个更逼真的物理引擎还需要考虑更多的因素和更复杂的公式，例如考虑一下摩擦力、空气阻力、碰撞后的旋转角度等，并且这个 canvas 的帧率也会有一定的问题，如果有的小球速度过快，但是如果来不及执行下一次回调函数更新它的位置，那么它可能就直接穿过碰撞的小球到另一边了。</p><p>来总结一下开发过程：</p><ul><li>使用 context 绘制小球。</li><li>搭建 Canvas 动画基础结构，主要使用 <code>window.requestAnimationFrame</code>方法反复执行回调函数。</li><li>移动小球，通过小球的速度和函数执行时的时间戳来计算移动距离。</li><li>碰撞检测，通过比对两个小球的距离和它们半径的和。</li><li>边界碰撞的检测和方向改变。</li><li>小球之间的碰撞，应用速度公式和向量操作计算出碰撞后的速度和方向。</li><li>利用恢复系数实现非弹性碰撞。</li><li>添加重力效果。</li></ul><p>代码可以在以下地址中查看：</p><p><a href="https://github.com/MISfang/html-css-examples/tree/master/35-collision-physics" target="_blank" rel="noopener noreferrer">https://github.com/MISfang/html-css-examples/tree/master/35-collision-physics</a></p><p>希望这篇文章对你有所帮助，如果文章中的代码、公式或表述有不正确的地方，请留言指正，感谢阅读！</p>]]></content:encoded>
            <category>前端</category>
            <category>游戏</category>
            <category>JavaScript</category>
        </item>
        <item>
            <title><![CDATA[来自未来世界的机能服：科技带来便利（实测）]]></title>
            <link>https://kuizuo.cn/uppervoid-jacket</link>
            <guid>uppervoid-jacket</guid>
            <pubDate>Fri, 28 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[品牌 UPPERVOID，创始人为 Vis，毕业于沃顿商学院，坚持理性逻辑和艺术审美应当结合起来，这一点与本 UP 主的理念保持一致。在体验过诸如喜马拉雅、北极圈之类的极端环境之后，Vis 认为应该将防护作为生存之根本，加上对科技从业者的敬佩，于是就有了 UPPERVOID，专门为互联网从业人士打造的生活方式品牌。通过把最新的科技融入到生活中，把未来机械世界的场景提前带入到了日常生活中来，让我们体验到技术究竟会引领大家到何方。这款机能服是 UPPERVOID 的第一个产品，从面料、功能和设计上来看已经完全可以看到未来高科技生活的影子了。]]></description>
            <content:encoded><![CDATA[<img loading="lazy" src="/assets/images/19-实拍-d4acaf0ae78f1b40e1dabd616c68edba.webp" class="img_ev3q"><p>作为一名对时尚，尤其是衣服也非常感兴趣的前端工程师，我从来没有停止过对既时尚又实用还舒适的衣服的追求。在众人印象里，程序员就是千篇一律的格式衫加双肩包，典型的刻板印象，但其实我们程序员还是非常注重自身形象的。说起双肩包，还不是因为程序员外出经常需要带电脑，还要带钥匙、钱包、数据线、充电宝之类的杂物，总不能用手拿着，身上的口袋也不够。由于双肩包体积过大，在人多的地方会影响正常行走，如果碰上下雨，且双肩包不防水的话，那里边的东西就全遭殃了。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>注意：这篇文章中有推广链接，对你的阅读体验并没有影响，不过如果你通过链接购买了商品，那么会帮助 UP 主恰饭，以支持 UP 创作更多优质的内容。谢谢支持🍙！</p></div></div><p>记得在国外的时候，看到过有专门面向不同职业的服装品牌，它们结合特定人群的需求，推出了极具功用性且兼具时尚的衣服，所以我就找了下国内是否有这样的品牌。一个偶然的机会在 36 氪上看到了 UPPERVOID，看描述是专注于互联网人生活方式的品牌，瞬间感觉自己受到了重视。这个品牌推出了 C 系列机能服，号称是来自于未来世界：想象一下在未来机械化的世界里，每个人都需要携带战术装备和防护用具，随时应对危机，这样的场面让人感觉到既神秘又危险，而 C 系列机能服则提前把这种体验带到了我们当前的生活中，并把之前提到的问题全部解决了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="规格">规格<a class="hash-link" href="#规格" title="标题的直接链接">​</a></h2><p>C 系列机能服有 C、C+ 和 C++ 三种，可以想像跟手机一样有低、中、高配，它其实是冲锋衣的一种，但是更适合程序员的上班和通勤。因为我入手了 C+ 款，所以重点看一下 C+ 有哪些配置。（全文中的配图大部分为实拍，小部分来自品牌方）。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="包装">包装<a class="hash-link" href="#包装" title="标题的直接链接">​</a></h3><p><img loading="lazy" alt="包装盒" src="/assets/images/01-包装盒-871c8553690f1f8a3bd99353ff487fd9.webp" width="1136" height="757" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="颜色尺码">颜色尺码<a class="hash-link" href="#颜色尺码" title="标题的直接链接">​</a></h3><p>C+ 机能服有三种颜色及多种尺码，可以参考下图：</p><p><img loading="lazy" alt="尺码" src="/assets/images/02-尺码-46900f6533f219004a59b6b414dc56bf.webp" width="1074" height="671" class="img_ev3q"></p><p>UP 主身高 183，体重不到 60，穿的 M 码，合身。</p><p>购买链接（手机复制淘口令，电脑可直接点击链接打开）：</p><p>5.0￥LXdjcvL5y2v￥👉氵匋包👈 <a href="https://m.tb.cn/h.4j8OkBW" target="_blank" rel="noopener noreferrer">https://m.tb.cn/h.4j8OkBW</a>【UPPERVOID冲锋衣C+多方系统全功能机能服多口袋防水保暖外套】</p><p>或使用淘宝客户端扫描二维码：</p><img loading="lazy" alt="购买链接" src="/assets/images/03-购买链接-e128e6188d4eb3293d068e7007c1c2a5.webp" width="30%" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="整体配置">整体配置<a class="hash-link" href="#整体配置" title="标题的直接链接">​</a></h3><ul><li>面料：Voidtech Pro 三层复合面料</li><li>收纳位：10</li><li>特性：抗菌、免洗、防水、防火、防割</li><li>特殊配件：可充气颈枕、缓压眼罩、余光窗、背包遮罩</li></ul><p>从配置上可以看到衣服提供了超多收纳口袋，以及特殊的特性和配件，接下来分别看一下它们解决了哪些实际问题。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决收纳问题摆脱双肩包">解决收纳问题，摆脱双肩包<a class="hash-link" href="#解决收纳问题摆脱双肩包" title="标题的直接链接">​</a></h2><p>这款衣服的设计基于包豪思（Bauhaus）理念，以简洁为主且强调功能性，科技界的产品有很多受此主义影响，例如苹果。由于主打功能性，在我刚拿到这款 C+ 机能服的时候，看到上边遍布的口袋和拉链瞬间觉得有点不知所措，不过作为一名具有极客精神的程序员，那就结合“官方文档” 开始研究吧！口袋整体分布图如下：</p><p><img loading="lazy" alt="口袋分布示意图" src="data:image/webp;base64,UklGRiIlAABXRUJQVlA4IBYlAAAwrgCdASpVARwCPhEIg0GhBBo4BABBLS3fgAORgNnvZ7bo/v/e/8SPxfrNvgf//227n3nkbzWvpP65/hu+H/Cf8Txd8s/sr91/a7kG9i+an8m+9/6X/B/tR+VX3u/qe9/gC+2/8v+S/9x/ankBwCfpf9X/0n5bf5P4B/of+/+WHud9k/+V+Yv0AfzX+k/6X+4/uT8c/+DxCfsH/T9gf+T/2v/of5f9wP+J9RX+f/6/9j+Tfvg+uf+7/rPx2+xH+Zf1//P/4P/Lf8n/Hf///leSb9xfZT/WhOFdXuEKvt92mFdXuEJ6XH9grLuxQrJnRLE/uY6D3aYV1QuvRespR8osxH9vhiD1E65kqwrq9whK9VkrCyzylEFc8v+OvhFCAQR2mFdXuEKP9WO2u8UHoeRofFq11e4Qq+2jF7BJQ0N9oWZ1I3wIeYV1e4P+lD2/YAj9S61nPqWxTNykl434X7j/vIrw/b7tMK6qjRp/WhD+7EgUgMEG+yto/OJdT1sKavcIVfb7d/LWTW2RJEOX+VKHxRJX9xUerZNDG9rq31QWfZ+JP3lyHrU1XzCfITkprNWfUX1LR5WyodDKe5cnuLP2lnh2RkGsDEQFfPDTeUC092mFVveWOlnJ3wRHvaV7gM+O85lGPZ3ueQA417+mfY9gGZ/O2PcIMvglZt6Q0s1JUxgBmoDEAXn49IYwxeK51QccTsTxIX1zMlgVe4KUe56c4uX7/x3v56H8d7rSard+GOeXkNJFgawHkGXvHiEZU8G20pBuEKstuuZOKcr7kQnjeQNg0OkcQvAfc1SHVoXNmixDsIoChI17hG2SQypJPH8Q9e2R1r3GBZC+32/EVobjHYPBnXD7BTy4F8UQqkrJOrApZ2k2OzzDx6bxNEVQ7Qn27kMhXVUJE5NDUoeumX5awlPOL6m2wbpifcLSOThb0/S7TtMHb4hArpvBpTq1g2G9MWzG6Zj1DQ92ivyOXhaKV+/o045qdrYqZCXcQbSglGTFXt1FXMd2VRyonVR51Wp3Inz+MbPU6+QX6TDLn0Ht+zPJxzDhC/x+GFYZXiEdNR2ppejpJSVlva8+qn9B7fZz+jMtiknPNEIjI5qK0icblpFQumAC99i4Xrnhh35MURLOww7dkbZceG302+gZ/dpK+reaB8Gh+j0J1OyGeS1JDxvQQUxiAIse/CnTT8lY/uUoB0t5Bb7haarV5m3lFtuHi00auV4rqKVLnL7Di5a1g/7LfnYsw/te/txLCst1wmSf3oBKrCt3sInyO7UGX3ZWY6Sig5447yCY84Q/PQlIDPmsKZ43oDRDy7qbp8sMPEeif0CP7SRHOYA2JwWGn86+ZlFBQHsYRri30E4fov776kcDtqPCFX2iVpznl6DK1qFk5XIrGlSz0F8O0D8v83wl2ZfdRSzOA7aRY0+b+OG+jcdwt0KGx7hCrZ4h6IG4jVNZc7czy0yocOg92jbbhWyOsXy/bxLTrWl257677kxr87RdE3Y/1kOCrlbfBQQifudLt0YVklDKjK8f5HiSsDZEBYBMFHajstsao9Zr+yBublCwyPYUw6l7P54lFRFw3R07xYwe8ofPGJngUcLOMfP7lWlBwPIEqWKv6qlRqPBisS7X5mF3AYjGr5ds29m6VsJF44sReRb5TCqfY+tzNdZoRN/g/2dUisxOGkMfs3A/ElAJ3BiLCgN9rOo6oATRTFPuwpzF302wa1zy8Mogawx1UxC72XyElfqu1275ykSYC24PcI2d/eL9qv0FpXOrZD5WMF1MLFqaCj9TeAG9/9bxsbpNr1pnVfu2m8sSP7gqwW2qGAXws4OfaPn9no6JcH3Yq8E/VizYddRmJhPD/rsfr1UlM7CcAwXAAP7/9tOAAADhAmnVGPQ1pb8omk1aXobabMLT0bfoRZ9PDj3KFt9zthSGci9tp2pYV78FTWZN0Woxzu62FUEQcsag50n4QYEeBhtUr2fGFE+EaUXsTNQHB3784CKanjGBtUEABG/IxlqfQjQobl/zpaGqV4PLiPHbVwiqPOBXRKhX4Ktgua1c550css/GBo1wVD+vEkDZcOGI1UlXdv7FmvU08FPRssUOHtoSHMaz1DPfhGQk7iCM6jH/S5hWeTvFSqQjFFlxhJezuIMfYqhwBwoXUD6Gy6BGSxbH5Uzkolmmc0zXYKc+YovEyxQqAUquw9mQeAZmMBNnbweK9OJJmTcn+CtUQDZ9uNppyB1mySUh2AF9Os5TdWBL4sZ8AnRZ27ntWIi/bycLHa+1QDVM/rF4PGtDlMMnkkrtafHwqpe1B/iZcYF/hvqU3gabVYqYqh6wZoDuRPnBcTmSzhAXzzT3q+TbUTvimpCfJOoUfT/elQGHoqsRbN1CuujbKLP5WX2olfTulEYwUWRa/h4iAejb58TLruGsMhyEOtFtvL1JpFPCeIzPBGKg2kxv302/84ZkSpvhB1gHsun+ektWVBGNHsexoNE8V4dK6RagQGYSbnt8U1AF08YY6tfgkt08LdAtk3Hdc6vWnVL1WeaOKZ0LLLBEhYsx8oZoo0wt0BzsEPLVxtrlDnLcNtoBp7W178p/INk0B6AMaPFk4owvat4PtkupEzho5YVOJtYxZ//x+QGSz5CzS4qRYJqJLIO06VjL1tOQ8HuP3JUnQUNQ1qEs6h9cM2D7Yp4+5NZAVPskB9YDZ/6fB3bzO4AT/Nl9Av7pyIuTQ5Ds16x9Z/W8oUPbM54MDslKucQa+dr2UXxmznJ3PGsJ7sbE5VhMko+h1ZZmzqWJoaUU/miwOqIVKR3BxvPsM9u0g/pFA4de0TKM+RTNuoQ2gVXkD9mBC2a/LMpDX5lSphGLPImZDsCbNz130Z48jMv2lnNSfVWxhw2Xvfvm5COq34T7Oz0POwVDm2QZyG0pgZrROrJ42MwASN9A0HvBAjQog0DO5o2n2FEjL4WhbSf0JwzVBX3lc8WP0gqOJj97P6JlAXQ3ctwcw4uKraFsqt1pUIwU537GvNQ+9MRiabpNZ6aJ8jTXP9M5p5PnA8zpmVoxQ2WzWXR/+DdN5Jc+K48TcH5Nj/SZhJ0x3uBwSEjGtvYpGJR4BbK0g5s3ub2Rcc+AgHUqOuRmJgg5p/F0UYSZdJ1V6m49nTYbT+x2gBphGKFI1L1pUOug7wAD3Qm7rJW9cWLsJO+l9kSnwKzOL+z+OYls9eQ1a3v9OO1eLxAhGRJqBbkU/IgSm8nFB8gbJ00Gjqklc11dYQnAS0UyoaOfnpLrRfcnPSt+9wHmxpt3yYk1JLkCrv62wn3+O7iF0tCh/3NJkA8VHR5Q1XePNQUF7KvjcuOJ8hlmoscWzFpfw9v6NJ4GtjzdQqM1YRUATgiF0rre4QD7Q//6Lq+6oFH4vXh6Q6YhTz8QqT8nyoW6LQTLgnGGiiHl8+fH0Orb06nN0FSAqJ2W7qihke6EO7T6csTG8ly6W2ls6/nvOty/VnJwOBQLGOoSTrapTV0AgmD2Y2k+/6mJQBHTMmLpcpsZgeTcHpWsJkGtaCcMIzaOhElmp31G+BmvyxLTbiceGcpVwuB+8ye+EH1EQlYWuUhDulGgZVX/okR08EO1WXwFaoZY+kJRGpxi/PpxYciDjrQ9ArpiiCOKUWbVYlbeYGMHtfmGAGmJsu6Izcd4yTUo0O4hqMfrJqXtyBE31BD2tJu+0vnENm7UUtZhKNFlkRFWTwJUoX2heRrm6/vn16qfOZwjXaZ4MAQfTwJBroCyf8haxHiruGdp102YC9IcHxKyF72D07JxuqjPuMcqkN7D2UPAqwi3Sd1Fu6Rbs2nJnAuiXHBKnsqsHf4tQQYr1w9IoPv6q0URNQVl+HnKPst+W9hOXVL6mq6MAUHTg1puGCUcQIF0A6TZBRJB+0xZPJd1il1/BjzM8wNJ6MB0TuH2iScol0lYVPkz3KAiNK9tH3ZPvvbe4bvD4D1pjwyA3KtPdQBpHnr2/uc88f8v57aUuWX1OJumfFv01wFYxtxMkFmcH81bR4UEJHQA+T1FUweEAMmdC+a+wtwOJavzvpakaTfqTNvr5XxqOpQXL5KYKVM8/6gSlKfTI6uBPaYYrCAOBQdUpLuFtMsAS7FqzKdzOwFbHnroT/x9F7yGMhrjH2ukj0l/LiP7L0+CTyOEaKhtT1h51Z6gpEMSjfuL8la+IzHRxj2Zj0UrlY+Q6ohZ6ywJlh1xVbXpuKe1tUgNxKOnZo5hsJls/Zd7CFdFQu1GveOG6WZykcWkHQmuG4H44mK7MEFyua7wUwhSccJpAWOGwoFDkCMwDC2k2OzR4gCdtfZbKJ6X4ZgCoQCKCslB8rKywjeciWoXQCjrNNmGgj9MJSZrI2o3dnyp9AdPCkiZMIaz2MInqyHeYEu467H+bjW5GkzAIJUrB/j5S2qTbcIEKFnX0I0zT/DEB/et5D08HCLOsNReuj50AnEq+iApnzzoMskg48NcvCTs3xtCMlwIy1q2rizF5uFecbbi+viQMSnog9D0F0AlIcGgIth3Rx0CYGvav601DVV5nY4c+G6p/+GpQy1b1uKZOOoAUcPsCT7pUX0C0sAWb623AI2UowccHg3KOBI7ju718W2ZeRzSy0YujfeQvEpKy8tH/ffotzOZmDmgHouLZ3rJSt2+amHtLxFyVhFoutIMh7W9mdzdSKmtX3Nm5YylsrppvgKVCx240yLBglmy02D5aHQDx421eVfKqP1JegNLGGMCU7Qe2fkd9GHu1rNa/aP4ueev9Fv+A98PMNEOyM+DPzzAV/2uzXrgUNprBR6RDrwY7MX0HhlB4K/Y2rwyr58XigOfF2OltbdAOLNSgOoBTcTdcaZS2/8xgIc+DVrm9zMUXf6Yqo6WEy1/JAoCNckGqxkyz+kIcdimZcweESPJP1fN9QseNMryDTuFnNMu7jU9Whc5y95teLv+WiF8X8sxoj+YOOnP/hqOnKmnKzx/OJ2WoUWtTyT0M8gCLOlJOuyL5CNENJY5+Vhitg0SXGJsXl7iych6+ovrX42vCk17ebBvMrrsNiybWoekD5JXx/l9CFw2BGsjSVyaPg35Vi+gJYcG5y4HmPkpya39ozD0wItLa+8lMX1BcBAZvQvzJu7pKJIQnAq7lpqFLqXhPS/Z41glvOqZvBPb9Z2DvrF6eM8jy6sWenRjgdKu+TcsRTDp8JNZXASUjwbD0yWnVR+QW3gRHSYvpv494JPmuFONKHaGIMrpEDkI/cQ3a10ZVm4UArPN4o+oRFR7d/vcsdbD2zEx6HcQea7quCRPhmpCfMiLMLC629N8ehbKHKji+gtm1Xl/NodCL/iRgI2n3iAzbe6duI9ILlHirLXCIX2/zLzBaqiX66DE7/W36iEGMkNWQpCjIlI4EXcnTRzkQn2nGPkYYScagP1SlPrgY+AorZ4tCITxDaMR3TqyiPQ9dUttgRUc2rej9Pgj+UwNh5wqHISNQWI2HKMWJnD71rj7MM+khv/9K7MVJp2iOVsX5fqlTDIPVg3DrFVgnkI9av7S4jP8VvY5dTBsFwEoeT22JBvsx+fvDsQAMJNEHjkFacEXSEr32Plw2zpNhoPX95EFKBasBx3VlFanh01Ni/OUeo4O1ph7yaRrancKbwn3W/wwszkHbsutr5szGLX3/iFlUWf92KHXFKbEW3CIjaiQDkOz89hwrj27hgO+Heev1f85Wp9jk8G4m970zCoAX9yo8Aua5ILcJaVmSG1UHGrGVp3CjGaoI8ajv8Pgao/shXOCSnfLeUqncK2so/5rW8i2TrNn/defmmL4Coju4PcWiVFXsijcnfNiNnGgJr6m5MLS8WY2f9KfNulkhTQUERcOcGGnWKw7ZdZPNJ+rvZdwodI79b0Tckb/4eAi9mvi1s1/xOHyEC1gHSw+EO6Tl6bLpnGK4dfTsKrfgu33me4HkNSv35YdPhlTJw58BStd7zQq+AbplAO01lIJ//wsU+VK8Mhjg0b433LviK1VUh58rLB5F3p4tnYnMrYrP9V0HMsqQsH4RifSCUgfkhKDabOuMm2Vp2422Ar+pf2CzsVMJbzLk24eTDXIYVsMrYkYxKSPJqPM7SsEpgUf+yS8H5Rr9xm3aR42xbkoH28aLlVzvB6jRp4Rwg9cKxw+HwrQ8lLL1yIFKqjsyGkcvA0GMUroqqkMB8qUSgBcQ4/picN/KVQygTtBTV1FECaBsY3Sn9+jLG16GiwBv0Zhe3ITUG9A9xWGt+6O7hmUh2tkXaVgwhXjUkkpJt4bQ6RP4mm46yAresFEeJKC5iutEGGpvT/SMTg4XfSg4W/gdQt2DUtseiwATgkvxhg3Sei4v/HZ7l6CQGri+1diRy6KbHjKuf2CUX2qvLYJYa8RKv1Gc08zlsjBd7dXr4wacIGFkQRQWRuw/gIIMxuTYAa1mrUaA9gkFwNBpyo4s3jlDa9e+Itk9FQ6Iec1LNWh9tzA1LMSK9RkBAjf3/wJxxa4nF99Dcd5N+ZYQRkwc53KIf7XzCzSUZdVR4JC0I+2wI1KEbYYRSfCI0o3dpvPb6/q9wuqLBD2SFmMWO0imwl1WiahP+wSgFNQ+j2A2gkYGJfoH6Dbz++KNjdBsDi/je9Ynzm6otYweJyUugmP4D9DuLXUDKvVA/LHyDVhDD+PBLWYI+RLK8/MaqMOuhGz4qcaQzvtt3/WWTjwdfJupZ+x32IPWr+fRsQX1mxB70SMKLYuOCKaq90SevB9Iffuyc5Kk8YEtx9jIgIqXRC2aAEdGGRb/QqgGlkbL7F2dr5ngBhtut8QrjLtVznN9puve/7rqgQCQuYRSTo36vBLWhLv3KLNb9yoqT9ohQcf4IYmq03bA+BxRipB6UGFj9jFcJKET2RwU6x9t9IE4Y0z4T5Yypahn8JuT7fcBFzn0jZ0DuH7Se/8QuZYCIFa1I8398bNlTuLxWpS6JcS4gaB+hv52Dv6Av9kvsXVfc1dBRLr56zpHfGVpVq2D1Zr09BsvcmbvMhXSkZmVu/t6J+9Tqa4AGk0zzddAcmNYrX/MaHpYoRTSnBLBWwt0Rogi/THaAeuXByqMyO4K8TnUVYNDTAKnrsEver6bx8aQKn/Ynhth2cV287vbR1qLqmMwdX1cUDnbJZoPl9pcGevbOb0z5j1ehMIiR6m0HKO/5ro82pIC3MUteIB3EjE4K3iVq2BuMBiYH8mXzqGYcj7njKCWsMWczMS/Q3G9SZKv1tvUEyNpRLZ0JtV5cC/4Z1qxr9vZTP4OcIRcvM5fFT1mc7sGHmqvbtaenpuAJvtgkiquL2DkkAdWqZJP+R/eVgRO9MTjb9Yo/+VKenrNLDt7bMrfHp+oWn0I1n5V5WynIXbI5mJm2PyKfEBKDul/E+3LEtJg9SphvsVxm+u8X3G5vhA8lmnf91v5zF1I57jqKXuP11BK9bfGqZtT9KGP5g/ggdgAo8HbuCDPpX60vsek0DqnYpsNZCZtsHXC7SOGXEL92g/kY/c/vnJymZw9cCMMz6kZgBMKgbm+0f8dfxk3C37VcG/yQ0hb2lklnibQ0/YnxlV6J+JcC6hEbPbJ7RzdTIpZKAeWdk/DBQKqdeEIbNW0+/WSa4K9J3lFBVGUFma6BCNNRHQOPTDNJs0b62j3sz3LeUfn/C5pqsT3RbTMtWfko74xOjfOefaIVl20Ti7llr/cQBE2TZ/DwuGjmJ+9TsX+LdhRA2PNz1Om34E+bv0d5ccNuI73slIcnzyz9ePjYkzu8/mpAL3K/xcIcAc4EtDv4svhxq4JMrduAGxr/VHIYSF/kv6gwvRpNbnMfe0AGzGAk1ftXlBbJIyoCUqfplqE4vA6JALHJ/YPQf7+Y6edsdP825bvmm7WIlL9ZWKYFFJoRZgnbdHUXE6KbpSnVxRjoF2uwXZsnPaVKMen/648dZK7Pdf/oeNRhyNFrzfuXTcvP/8GsLerQMiLhYJu96HGip1bYuHm+DPtdsEN3sOAPhT8XGG8gZaz/Ez1IhSqRsssQOKcumx38jWNZAMY70SXHTScwEDTpVfa6Pc1vAMVs8GTFRZ1F5ns2sKUkP+2jfilsGgyXmfdnuvS8xLDnOi90XNTdYgy99kdwt96J0AG22Qej1Yf9D5+7dwSxrlVsIXeaSnlXEY5VN5W+ISzXD1+XRoCM0tPFiPzIRbNkB3VEOgs6gm9aStLq36Wg4l09C4zvk7HJSEJgmud22hULXghrLVCa9Fcjj5EdUiSjOLbZA20lyHRKhXp+2c5q7UECwp6ByHHbX5+IVx2s25OzypNeommDFf0IVWSwW7sL7KhjrNmZnMPVQbi/XbKP35NusM0T4BLFXZihwyAcXPiP7LnJKBa9yqeaDw1FhWrgyM9/oBbnOXV5VHLLpxRX+lL6Ps0ece6qa5KSCcZuooD8uFGK847QN3ye+XwAJDsLQSPuXsojnRg8yqz2sFd45eZldeUDJ2zmkkcTxBk4KD4JDiOdbfYYG3RJkcTQH2nJfYloXTThZRtcO2444B70k3QNtxJxRcH3m8q8Dr2GGLNEpxanydQeL7zBCFcP8ZhuqhW2f2xteKtWKL7K76RIPEp2ufAu3/+K4T5v+QcenYIerSbxT+ta+a8ktmyxDucS480Ouycn0MbR/R9gYbLr83p62gYcVqYORClUXzZYDwkAjDso6AdornLseem+hLN/ABacjNGIBKY4KQxg0Ar7zPDu+m/xvBLwb6HJxaake5Afn8Z2ZnHnL6ptAejTMmuSIaqrju6T7AJoIHOKc0qgsJUvDUjkNhTD//sZdZcB7BTBGyBCFNe71dHWSke6Cvwd3Ko7vW0g3YGDuA64SlWcUaw17xgfQnEUTO64vMe1qKtCx/Bz1wKGLJuU3mJZK2XtWBJ2dTTp3ljaRP9Rr6J6U8+MgoOB/sYthVusrmys/DOQsl0hd5maedagzgINZGZ8LAUbdRsQxQZY1HJaExyqQvKlSmUlvoEY5+r4jqTUhe24pNh0F2kSmEP0YnYah3rzVGzVqlkMuWmrrCQqzU2OweL7B68rhj/fPIUBhbswMH+jHJY+gwCOJ7xx/ZOPEoSk7a4D40W/dfeIIbkG1B8GtNZ2ThG51T9eJlu/XcglURiLYCansGS8sQ1qy/VT2CVF0ZZvsW7ufdhxtaGa12ManZzUxjY1UU5COZPGEoosANoH4nl2UTyfFsmOTa/pvy7i3OWkj6Kq3T/Hgr5WGodG/bRrH7GbGzbB8KOWOAeJO7iI3m79dzJXmUWQOpBSYvlR2PPqWx9ZN09c8r/hEIE02DhzmQ5NWoHNyb4YZTvkeardaH9F0Nj8NEQzzcUJv82AN/Jfi2/eVhPsficKv4UkZiNXvxYEgUpyUi0iZTDhRS/lJ0HgxbnrKfFlOyU4SIWB/Zi3drDi/KqhpLpgOOMDODT9ZR8bDP0f74nGzX+MCzySyJP5qyWMdnIEeX5PnUMnd35xNx2yp04Kn3EA8hYud+7DyGcJf2xMAzuW7V+p425Ob9XSl4IIbiLqvxGIzRjtcb4kgh0WghznwA2GBnmKEACjjpKyxuXraC6u/JMI5mfl37rd7JJQq+s4BDtFmtrzKB9gX9NbKnZqjYYCXs58gEeF0pdI8WlOGO91LfYXEm4ZkemKBtPOIbxFNAFfy5i3PTj4NXWiXCteyg1gl7tbZ09s08PcEjildY/IHpzRAWdRVPTwsiIjYrnHuy4jEh75aSFR0NnZE4Hv+ygvKwUei2GrCnFySBYl4ExAB1KlFAcKtgpMggMoofvIQ1+bFd3hGkMHM3snSq/x/UJxZLJ2uLavLMo0+28wZfMpxPjA+hpgt+tVmA6vJphD3usDDI7EBawDrsS11UVKCETijAz5Eu9y2Amepns+MMd9ePXB+zL/hbMeu1kjaMYiYkotY3MPxCSABO+XqRG2txM00Ej0htmpzXH31rFY54lw01Tm99RIgzErzv2cfFH+xIjT2sdAAlW0Jpzadn+yuZd3e6gs9CaQuyad8S5qabkAFJkKXaKT7VjZ/oEdPRyIXxm44xZHrGNg7R9+0E0tewVtgKzpEQMDF1U1AwZrTpvzXtqcD2E4vX5pRtzTrMsJSBjFUM0t+OyNSKZLrlS/KAABa3XtWfGnuzTa2agbyLfjZrslklXLqI0xMsu9HnKEQpgGbksFtdfCKK7uZ7OOx36VBlkmSqHrbOAy5c4Oso/Wn5MGgWhoxDLkHj74I/wQFeBHKeVW6koboFuL0NZPrT6JfiYZGUB0afzGlIu1d+douW15PP6g+MDMZVKHvLlqODOG1hIsnSNQ6r2kHRrL+CgoLGOXDNUVqvSUeykaEyVl0j36DmeghMnWKsBJK6OEAsohheabuLR7GGwCohNl4r93Y2xxuMiWh9WVoWxSXNcdKTJ18EYiVohlYrHtNBfN5WPVrYW0+0AhXoq/pAzmR87B63Su6ZqIgxzuaT7kTlkCqRfLVAtTXv+buP6/CjrKYyg8tLZTRX5VtxAx5Bw6IXAkPl39iAZSZ4vLKBwqT3QBnZsEws/x2hmOFJpXh2OpsfaWCeRXW+Xqz0CMEXz+zFnE6jmrETkU2LqOisDx1tNkfPk2yh7O9op71VA9brAIMFzMPEY+tCGo/jyU8faapWWYNOm0A47DeDdr48HKZa58EQeNUNITYvxE3iMUlwUP3kKxf6baDk+VTvJxrBpfIIP+SF7HzBjs29DpIPaCItnjmtxCrlLy1DOAUDPpF0jJhwUmhedM4dyUAL5XBsjeVE52q6DNTChL8cUwJ8PtEfrzIJk/aGMdnXGGc14A+ma38CKg0WP0K1e5Hxxf8CpcbwdhNMd8sOyDcRWpW2p2B+0e3NaA6uTdxRtxyBE/ZPr1CaSDexjX5w2CruNz5QiQ2k/ReyM3aTVoKt+aYAzdy8mjGIXJR4wN5u/rc/6u4AfC8AWKnwasYQ2AZdn+X/QZ8FTmBX4GAmFrOs2HJQldQ3gAlR5qzkQosz6Z72BuDujnZk2UnBja6J+/qFkh94Dk1cjChyWkjxa3ShU/rqrpSB0bnC/efcDh/L+2gofIodcOtIZXm9GcBIFfPJQtidPsSqY6RThRLVcUWXvph1VtWiufOqkEb6DxMyUksD+XLztdMdBDfiQny5/8RazDTxdwGL2L2OsCpo7851mXFigFoJ9turSyf7B6cBAHDpZyZ3xolelgzX+rfb/Mpxqa2VwgNvwjPvxdLLyzAs/A6d9pT9BhN8/lCdgOkwJsf/maw3TisOb5jM0bFgo6bh3u0Mxz6WqHT7CAKQ581X4efueY8MB0cufcggJmo6iLWuy2UDh+x9y2M6D/w03K0SQOTW+jA70HRcdome51yAAk9jy9ru7cltB1PJlN5PgB50YyDpZzc+iV/wv9xj5eFo8JYhHkoRj9ahoEUKpc+NbmBUNYRpvJxXEIr7jbFyK6bJRWCjpU/7Ea+jf7gd+vobJ4szzZKn9sAqs9/xim8ApzdhgXLx3CqnhKzr/aaTXpo3pzbkJMn2MwPlXbd2VJ8MJxfi1TpPxtxGspOSs/ZWpMtfqNs9LSq0aePcSiJYoEosbECpSEIYUTVA9WSibFHSV+Zfo6lRAp9NnHN9Gbidk0ppASfVxtDTVCdHDUTwsz7g05qtTlm1YhLYvSHM9B9yTDCxJFEhEGxZlWckU2sPm7TkXWLvvg21OBhTmY4kG9upkFXApi41WSrDnjGF9HdpHIzatPpjQxSCyWDLvxX/yHLeds3VSI/9c6jR6gDkOy8ZI8f7UxznacYR4E2bphmEgSl9u925hYSWijCSH4fLxLmBD2Z996CHvvKBdMbp0FCjn4PVl+fyA/rlpNqVo4jBC3+t88H34V6qP/7IisW89Ib1Zvq7VSVdeWNIC6pyaGhKzY9rikax+iDn6eewJMGkRDnvDyYhi8k/t5gdb5XwdYZ7gJGj92ZLQ5AB5oN41Er3CAMXSBgSZWjI2VJ/W++kTtwfPEkUK0lV/bdFlKJARWpISbEeYn9KIExj1PYrtXLjFzQTC9BHed2+jMWOE4dsTQpFb6h/swTJ5IB2JZLhedmztof1aWuth9aAqvMP2L5uApE4i2mQrUKiwe/GPklPfaK4CssQZviEPUbUQS6qnn85G7/BwlGJwhsNgfd4B5wqMPKD5rnHJS8yLXtWRNQwgh5nlyNY4PhgMQra777pTIoDWVY6yXBAW1XO6HjUGSEv4VSZnweis5Oje8rs3NswPR2BohWviSJ2P8ru3q2gWv8qHYtqVqIUsHy6a2Uubnt7esbUVoLxzLtqkOd6dwY95rWx/jOSHeLYFIwN2ycTWZCYaNSles1W/Z0BKJxpNkqlKfyJMm/a8v93rxYTg0houZyC7tBMHy3ON0GAYGCWceejiC8ADbMQRm2Awe3jO2wzE7Ptbb4ZVyKR0sFPk0yxhq8ZKxiFK7+l8duOHLChl9SmyPZJx+jRbfcKiwZLrTQzsc3PiAp/fE21z7T0XcsT5hwizii1ey2CVyuLj0S+idc4rSPxl31yFXOYY7uoTG3PL8/XRK/eY1WZ3UhzPSXcxT/FElfdj8F4lXl8mTEpBAsiMwmz2uWgEBhLPu6rcih+UN1hyYH+H/dCs/qY3ixKF1SdmEwT3RMvC0gLyZ5BQaWPlZKjiUzPdZv0M/MV7Lk4q0/WcD1kOvx90f2toA3Ux+ei96CryPO/m0AgwlFJKqVRVdKVNmFpslAfQvAAAA==" width="341" height="540" class="img_ev3q"></p><p>这衣服最显眼的地方应该就是胸前这个灰色的 1 号口袋，它叫作机械心，其实它最主要的作用并不是收纳，在后边再介绍它的特色。</p><p><img loading="lazy" alt="机械心" src="/assets/images/05-机械心-da8ed57c823126bd8366fe9c2040ff23.webp" width="1158" height="864" class="img_ev3q"></p><p>先看平时抄兜用的口袋 4 和 5，刚开始手放进去的时候觉得哪里不对，感觉空间很大，好像是漏的？再仔细一番摸索似乎两边都有尽头，原来这俩口袋是双向的，这样的设计在内部增大了空间，不过在拿东西的时候要注意前后都找一找，不要以为丢了。口袋的入口有拉链，遮罩也是前向的，可以防盗，拉链的底部也有暗扣，多上一层保险。</p><p><img loading="lazy" alt="左右口袋" src="/assets/images/06-左右口袋-72d8fda5f45f810863dcbacddad10da7.webp" width="1158" height="772" class="img_ev3q"></p><p>再来看袖子上的口袋，两边的有些不一样。右手边的 2 号口袋是透明的，叫工牌窗，里边可以放工牌等彰显身份的证件，比如你是阿里、腾讯、网易的员工，把工牌放到工牌窗里，在玩手机的时候就能不经意间炫耀一下，同时在打卡的时候也只需要抬下手，无需从口袋里拿出来或者从脖子里扯出来。</p><p><img loading="lazy" alt="工牌窗" src="/assets/images/07-工牌窗-fa59f105d983c9cb5e967c890a9f65af.webp" width="1164" height="776" class="img_ev3q"></p><p>左手边的 3 号口袋有一点特别，除了袖子表面上的拉链入口外，在内部还有一个魔术贴入口。它的用处是，在只有左手是空闲时，想要从这个口袋中快速拿出物品，可以直接用左手解开魔术贴，里边的东西就能直接滑出来，非常适合放手机，而且这个口袋的设计就像是刺客抽取暗器的地方，非常酷炫。不过要注意魔术贴两边不是密封的，所以不能放小东西，否则会滑落。</p><p><img loading="lazy" alt="魔术袖兜" src="/assets/images/D02-魔术袖兜-472f9aaba2ee9f844bdfa1139c06f6ca.webp" width="640" height="360" class="img_ev3q"></p><p>再来看衣服的后背部，在稍微靠上一点的位置还有一个大的口袋，叫 DEEPVOID，可以放笔记本、平板电脑一类较大的物品，C+系列试了放 10.9 寸的 iPad Air 完全没问题，最大可以放下苹果的 15 寸笔记本。这个口袋的重量可以分散在全身，所以不会累到肩膀。</p><p><img loading="lazy" alt="deepvoid" src="/assets/images/08-deepvoid-720a3010169d1074d45d011412f76fa3.webp" width="1178" height="786" class="img_ev3q"></p><p>上边帽子右下侧有磁石耳机收纳，随着真无线耳机的出现（例如苹果的无线耳机），无线耳机最后的一条连接线也去掉了，只剩了两只跟孤独的蝌蚪一样的耳机，如果不放到收纳盒会非常容易丢失，而这里的磁石耳机收纳可以完美解决这个问题。由于我没有无线耳机，就拿 Apple Pencil 测试了一下，吸力还是很强的。</p><p><img loading="lazy" alt="磁吸口袋" src="/assets/images/09-磁吸口袋-c0e5031a61a289fb4f10a68d5f2cb41b.webp" width="1170" height="780" class="img_ev3q"></p><p>除了这些口袋之外，机械心下方有一隐藏口袋（9 号）、右侧有胸前口袋（10 号），衣服内部还有两个内口袋（6 号和 7 号），这些都可以根据自己的需求放置合适的物品。</p><p><img loading="lazy" alt="其它口袋" src="/assets/images/10-其它口袋-2d3c3a78ab188ec0bfe4a28a10f8287c.webp" width="1176" height="392" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="人性化设计应对恶劣环境"><strong>人性化设计，应对恶劣环境</strong><a class="hash-link" href="#人性化设计应对恶劣环境" title="标题的直接链接">​</a></h2><p>接下来说说这款衣服的重点部分，因为创始人是以用户为中心、以功用性为目标的，所以这款衣服有着十分贴心和人性化的设计。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="透气">透气<a class="hash-link" href="#透气" title="标题的直接链接">​</a></h3><p>我们知道普通的冲锋衣为了防水防风会做到密不透风，这就影响了皮肤的呼吸和排汗。C+ 机能服则安排了通风设计，在后背处留有网状暗窗用于排气：</p><p><img loading="lazy" alt="镭射切割透气孔.webp" src="/assets/images/10.5-镭射切割透气孔-10004d8e78c4c3796335d6572bfe2199.webp" width="1126" height="751" class="img_ev3q"></p><p>在腋下则有拉链可以直接打开进行散热。这两个部位是男生最爱出汗的地方，这样直接与外界通气之后能最大的发挥散热和排气作用。</p><p><img loading="lazy" alt="腋下口袋" src="/assets/images/11-腋下口袋-2b427cbb01b99d9235ba3e96e482ea92.webp" width="1128" height="752" class="img_ev3q"></p><p>另外 C+ 机能服采用了 VOIDTECH PRO 三层复合面料，其中第二层微孔超薄透气 PU 膜的孔隙大于人体汗汽，所以整体上也是透气的，再加上第三层的 25D 柯特底布，能够避免如同穿着塑料袋的感受，进一步提高了舒适度。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="防水">防水<a class="hash-link" href="#防水" title="标题的直接链接">​</a></h3><p>再来看防水性能，第二层的微孔超薄透气 PU 膜的孔隙虽然大于人体汗汽，但却小于水分子的直径，所以在透气的基础上还能够防水，结构如下：</p><blockquote><p>人体汗汽&lt;PU膜孔隙&lt;水分子直径</p></blockquote><p>我在拿到衣服之后，把它放到水龙头冲洗了近 5 分钟的时间，面料也没有湿，水流直接顺着衣服滑走了，想必下雨的时候也不怕忘带伞了。</p><img loading="lazy" alt="防水测试" src="/assets/images/D01-防水-62c763cdf1f159091e22d29ab01bb5e7.webp" class="img_ev3q"><p>而下雨天在需要戴帽子时，上边的余光窗也能增加视野，不必费力扭头去观察周围路况，帽檐的设计也可以让雨水更快滑走。</p><p><img loading="lazy" alt="余光窗" src="/assets/images/12-余光窗-29676879981ee80f3a1785ef9b73a3f1.webp" width="1146" height="764" class="img_ev3q"></p><p>另外，如果必须要背双肩包时，遇到下雨天，可以利用 C+ 机能服的背包交互功能，防止淋湿。背包交互功能是衣服后背最下边的两条拉链，在拉开后可以增加后背空间，以容纳双肩包，这样利用衣服的防水性能，能够很好的保护包内物品。</p><p><img loading="lazy" alt="背包交互" src="/assets/images/13-背包交互-26567b1fe985d5e4ce8195cfa8753289.webp" width="1150" height="1725" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="抗菌耐磨">抗菌耐磨<a class="hash-link" href="#抗菌耐磨" title="标题的直接链接">​</a></h3><p>C+ 机能服三层复合面料中的第一层，90D X 90D 超高纱密度面布，密度比市面上的冲锋衣高 3 倍，表面更加光滑，细菌和灰尘更不易附着，从而可以减少洗涤次数，甚至可以做到免洗的效果，想象一下把节省下来的水费和时间用到其它其它正事上，能提高多少效率。这种布料也极度耐磨，即使经常在户外极端环境下，或者室内办公桌的摩擦，都不会轻易造成衣服的磨损。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="午睡福音">午睡福音<a class="hash-link" href="#午睡福音" title="标题的直接链接">​</a></h3><p>程序员由于脑力劳动较多、且时常加班到半夜，所以需要午睡来恢复能量，但是办公室的条件一般不适合午睡，多数人只是趴在桌子上将就，但是趴着睡的坏处很多：压迫眼球、肠胃和颈椎，睡醒之后还很可能会有一段时间会看不清眼前的东西，所以能仰睡最好就仰睡。C+ 机能服让我感到最贴心的是，它在领部有一个可充气的气囊，能够充当护颈枕的作用，这样无论是午睡还是休息，当靠在椅子上的时候，颈椎有了支撑会感到很舒服。</p><p><img loading="lazy" alt="护颈枕" src="/assets/images/14-护颈枕-677d298b50d02b816a28c7428f038dfb.webp" width="1176" height="784" class="img_ev3q"></p><p>衣服的帽子上还有遮光眼罩，避免了光线对休息的影响，不要看它是粉嫩的颜色，据调查这个颜色能有效减缓心跳、脉搏和呼吸，从而帮助人们从焦虑的状态变为平静，它还有一个名字，叫做 P-618 粉。</p><p><img loading="lazy" alt="遮光眼罩" src="/assets/images/15-遮光眼罩-da42bde42d7865aac4337d58f7ec7f42.webp" width="1176" height="794" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="战术防护">战术防护<a class="hash-link" href="#战术防护" title="标题的直接链接">​</a></h3><p>现在来看一下胸前最显眼的口袋，机械心（MACHINEHEART），听这个名字就应该知道它大概的用途了。没错，它就是为了保护我们的心脏不被利器伤害。机械心的布料采用了浴火防割伤面料 ADAMANX，因为是军工级别的材料，因此成分不明。对于它的防割特性，一开始我也持怀疑态度，但是在实地拿锋利的刀片用力切割几次之后，面料仍然没有损坏，不愧是一套战术防护服！（注意：不防弹）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="时尚">时尚<a class="hash-link" href="#时尚" title="标题的直接链接">​</a></h2><p>时代的进步，让男生也越来越注重外表了，市面上的冲锋衣大多只注重功用而忽略了设计感，而 C+ 机能服在功能的基础上，添加了不少时尚细节，另外裁剪也适合亚洲人体型。衣服整体是机能风，因为面向的是未来机械时代的场景，经常逛淘宝的或者玩吃鸡的对这个风格应该并不陌生，以多口袋、立体有型、硬朗、暗色系为特色，给人增加神性感和威严感，提高整个人的气场和自信。</p><p><img loading="lazy" alt="全身图" src="/assets/images/16-全身图-39dce13c7a034c60abb20202c634e01b.webp" width="1190" height="997" class="img_ev3q"></p><p>右侧袖标其实为品牌 LOGO，相当的低调，在暗色系中使用一点亮色给衣服增加了点缀装饰，且不浮夸。另外紧挨右侧袖子部分，有同样颜色的一块悬空的布带，可以悬挂一些能够悬挂的物品，例如签字笔等。</p><p><img loading="lazy" alt="袖标" src="/assets/images/17-袖标-edc48470799aaaef27a64762b14b54e1.webp" width="1188" height="792" class="img_ev3q"></p><p>后背部也有暗花设计，除了增加质感外，还起到了防滑的作用，如果同时背了双肩包可以防止滑落。</p><p><img loading="lazy" alt="后背防滑暗花" src="/assets/images/18-后背防滑暗花-485476faea4d34a9ea1deed96bbb955b.webp" width="1198" height="799" class="img_ev3q"></p><p>胸前的机械心的设计其实有一些突兀，跟朋友看过之后也有人也这么认为，虽然功能上很特别，但是我个人认为可以把它隐藏在内部，然后在原本的位置设计成更优雅一些的元素。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="价格与保修">价格与保修<a class="hash-link" href="#价格与保修" title="标题的直接链接">​</a></h2><p>C+ 机能服的定价是 1499，C 是 899，C++ 为 2499。综合上边的特点，这款衣服的耐用程度几乎可以一辈子只入手一件（或者穿到腻了为止- -），再加上“世纪保修”服务，只要是非人为损坏的自然磨损都提供保修服务，时限为 100 年。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="上身实拍">上身实拍<a class="hash-link" href="#上身实拍" title="标题的直接链接">​</a></h2><p>（为了装酷极力避免露脸- -）</p><p><img loading="lazy" alt="实拍" src="/assets/images/19-实拍-d4acaf0ae78f1b40e1dabd616c68edba.webp" width="2318" height="1737" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="关于品牌方">关于品牌方<a class="hash-link" href="#关于品牌方" title="标题的直接链接">​</a></h2><p>品牌 UPPERVOID，创始人为 Vis，毕业于沃顿商学院，坚持理性逻辑和艺术审美应当结合起来，这一点与本 UP 主的理念保持一致。在体验过诸如喜马拉雅、北极圈之类的极端环境之后，Vis 认为应该将防护作为生存之根本，加上对科技从业者的敬佩，于是就有了 UPPERVOID，专门为互联网从业人士打造的生活方式品牌。通过把最新的科技融入到生活中，把未来机械世界的场景提前带入到了日常生活中来，让我们体验到技术究竟会引领大家到何方。这款机能服是 UPPERVOID 的第一个产品，从面料、功能和设计上来看已经完全可以看到未来高科技生活的影子了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="购买方式">购买方式<a class="hash-link" href="#购买方式" title="标题的直接链接">​</a></h2><p>购买链接（手机复制淘口令，电脑可直接点击链接打开）：</p><p>5.0￥LXdjcvL5y2v￥👉氵匋包👈 <a href="https://m.tb.cn/h.4j8OkBW" target="_blank" rel="noopener noreferrer">https://m.tb.cn/h.4j8OkBW</a>【UPPERVOID冲锋衣C+多方系统全功能机能服多口袋防水保暖外套】</p><p>或使用淘宝客户端扫描二维码：</p><img loading="lazy" alt="购买链接" src="/assets/images/03-购买链接-e128e6188d4eb3293d068e7007c1c2a5.webp" width="30%" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>在拿到衣服以前，我对它还是持谨慎态度，因为我个人处事比较小心，但是在收到衣服之后，发现跟产品介绍中的丝毫不差，在认真研究各部分的结构和功能之后，我对它们开始逐一测试，从口袋的作用、防水性能、透气性能、防刀割性能上都一一作了测试，结果可以说是超出预期，让我打破了以往衣服只是为了遮蔽和时尚的用途。 在上身实装试了效果之后，我感觉总体从功能和设计上都很满意，值得入手。另外，这是件有学习曲线的衣服，本文并未介绍全部功能和特性，如果你打算入手，可以对它的各项功能特色进行测试，以便更好的体验到这件衣服的独特之处。对于这件承载着对未来世界憧憬的机能服，你有什么看法呢？欢迎给品牌方反馈。</p>]]></content:encoded>
            <category>男装</category>
            <category>生活方式</category>
        </item>
        <item>
            <title><![CDATA[从 0 仿微信 8.0 动态表情实现过程]]></title>
            <link>https://kuizuo.cn/wechat-stickers-effect</link>
            <guid>wechat-stickers-effect</guid>
            <pubDate>Thu, 27 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[微信 8.0 更新的一大特色就是支持动画表情，如果发送的消息只有一个内置的表情图标，这个表情会有一段简单的动画，一些特殊的表情还有全屏特效，例如烟花表情有全屏放烟花的特效，炸弹表情有爆炸动画并且消息和头像也会随之震动。本着作为前端工程师的职业精神，我就想看看能不能实现一个类似的特效。折腾许久之后，做出来的效果如下：]]></description>
            <content:encoded><![CDATA[<p>微信 8.0 更新的一大特色就是支持动画表情，如果发送的消息只有一个内置的表情图标，这个表情会有一段简单的动画，一些特殊的表情还有全屏特效，例如烟花表情有全屏放烟花的特效，炸弹表情有爆炸动画并且消息和头像也会随之震动。本着作为前端工程师的职业精神，我就想看看能不能实现一个类似的特效。折腾许久之后，做出来的效果如下：</p><video autoplay="" loop="" muted="" playsinline="" width="300"><source src="/assets/medias/2021-01-24-wechat-stickers-demo-37e0fda81f1011c7892931a5389c7ffd.mp4" type="video/mp4"></video><p>集中贴出需要的链接：</p><ul><li>示例地址：<a href="https://zxuqian.github.io/html-css-examples/31-05-wechat-emoji-effect/" target="_blank" rel="noopener noreferrer">https://zxuqian.github.io/html-css-examples/31-05-wechat-emoji-effect/</a></li><li>代码地址：<a href="https://github.com/MISfang/html-css-examples/tree/master/31-05-wechat-emoji-effect" target="_blank" rel="noopener noreferrer">https://github.com/MISfang/html-css-examples/tree/master/31-05-wechat-emoji-effect</a></li><li>lottie: <a href="https://cdnjs.com/libraries/bodymovin" target="_blank" rel="noopener noreferrer">https://cdnjs.com/libraries/bodymovin</a> ，下载 lottie.min.js</li><li>南瓜表情：<a href="https://lottiefiles.com/43215-pumpkins-sticker-4" target="_blank" rel="noopener noreferrer">https://lottiefiles.com/43215-pumpkins-sticker-4</a></li><li>炸弹表情：<a href="https://lottiefiles.com/3145-bomb" target="_blank" rel="noopener noreferrer">https://lottiefiles.com/3145-bomb</a></li><li>爆炸动画：<a href="https://lottiefiles.com/9990-explosion" target="_blank" rel="noopener noreferrer">https://lottiefiles.com/9990-explosion</a></li></ul><p>项目的核心是使用到了 lottie 动画库。Lottie 是 Airbnb 出品的、全平台（Web、Android、IOS、React Native）的动画库，它的特点在于能够直接播放使用 Adobe After Effects 制作的动画。设计师在 After Effects 中，利用 Bodymovin 插件把动画导出为 JSON 格式之后，开发者就能够通过相应平台的 SDK 进行播放。</p><ul><li>Lottie 官网：<a href="https://airbnb.io/lottie/#/" target="_blank" rel="noopener noreferrer">https://airbnb.io/lottie</a></li></ul><p>在做完这个项目之后我感觉到自己的前端储备又丰富了一层，在以后应对复杂特效时又有了新的思路，如果你也想进一步提升前端开发技能，可以跟着这篇文章实践一下。本篇文章除了使用 lottie 库之外，全部都是使用原生 HTML/CSS/JavaScript 实现的，这样无论你是 React、Vue 还是其它工程师，都可以快速掌握。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一编写界面">一、编写界面<a class="hash-link" href="#一编写界面" title="标题的直接链接">​</a></h2><p>本来想跳过 HTML/CSS 部分，但是想到 CSS 可能是大部分人的弱项，所以我决定还是把实现界面的思路写一下，想看核心部分的可以直接跳到：<strong>二、发送普通消息</strong>部分。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-html-部分">1. HTML 部分<a class="hash-link" href="#1-html-部分" title="标题的直接链接">​</a></h3><p>首先看 HTML 部分，从效果图来看：</p><ul><li>上边有一个标题栏，显示与 XXX 聊天。</li><li>中间是聊天信息面板，包含着双方发送的消息，每条消息由发送者头像和消息内容组成，我发送的在右侧，对方发送的在左侧。</li><li>下方是底部信息，有表情选择按钮、编辑消息文本框和发送按钮。</li></ul><p>那么根据这个结构编写的 HTML 代码如下所示：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">chat</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">titleBar</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">与 XXX 聊天</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">panel</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">message mine</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">img</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">./me.png</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">span</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">你好</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">span</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">message yours</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">img</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">avatar</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">./you.png</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">span</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">Hi</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">span</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!-- 省略其它消息 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">footer</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">chooseSticker</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">img</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">./emoji.svg</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">stickers</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">             </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">messageInput</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">             </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">text</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">             </span><span class="token tag attr-name" style="color:#a6e22e !important">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">             </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">             </span><span class="token tag attr-name" style="color:#a6e22e !important">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">请输入聊天信息</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">             </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">send</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">发送</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">footer</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>各个元素所对应的界面部分为：</p><ul><li><p><code>&lt;main /&gt;</code> 元素是一个整体的容器，用于把聊天窗口居中对齐</p></li><li><p><code>&lt;div class="chat"&gt;</code> 是聊天应用的容器，用于布局标题栏、聊天面板和底部发送框。</p></li><li><p><code>&lt;div class="titleBar"&gt;</code> 用于显示标题栏。</p></li><li><p><code>&lt;div class="panel"&gt;</code> 是消息面板，用于布局其中的消息。</p></li><li><p><code>&lt;div class="message"&gt;</code> 为消息容器，使用不同的 class 来区分发送方， <code>mine</code> 代表我发送的， <code>yours</code> 代表对方发送的。每条消息里边使用 <code>&lt;img class="avatar" &gt;</code> 来展示头像，使用 <code>&lt;p&gt;</code> 元素来显示文本， <code>&lt;p&gt;</code> 元素里边的 <code>&lt;span&gt;</code> 元素将会作为 lottie 的容器来播放表情动画。</p></li><li><p><code>&lt;footer&gt;</code> 用于布局底部操作按钮和消息发送框。其中：</p><ul><li><code>&lt;button class="chooseSticker"&gt;</code> 是表情选择按钮，使用一个笑脸 svg 图片表示，里边的 <code>&lt;div class="stickers"&gt;</code> 是表情选择框弹出层，里边的表情将在 JS 中动态加载，目的是为了实现动画预览。</li><li><code>&lt;input class="messageInput" /&gt;</code> 是聊天消息输入框，没什么特别的。</li><li><code>&lt;button class="send"&gt;</code> 是发送按钮</li></ul></li></ul><p>这个是 HTML 的基本结构，接下来看一下 CSS 样式。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-css-部分">2. CSS 部分<a class="hash-link" href="#2-css-部分" title="标题的直接链接">​</a></h3><p>在项目根目录下创建一个 style.css 文件并在 index.html 的 <code>&lt;head&gt;</code> 标签中引入：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">&lt;link rel="stylesheet" href="style.css" /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1全局样式">1）全局样式<a class="hash-link" href="#1全局样式" title="标题的直接链接">​</a></h4><p>首先定义一些 CSS 变量，CSS 变量是为了方便我们引用同一属性值的，后边如果更新样式时，可以避免多次修改：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">:root {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --primary-color: hsl(200, 100%, 48%);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --inverse-color: hsl(310, 90%, 60%);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --shadow-large: 0 0px 24px hsl(0, 0%, 0%, 0.2);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --shadow-medium: 0 0 12px hsl(0, 0%, 0%, 0.1);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些变量的含义分别是：</p><ul><li><code>--primary-color: hsl(200, 100%, 48%)</code> ，主色调，例如我发送的消息的蓝色背景。</li><li><code>--inverse-color: hsl(310, 90%, 60%)</code> ，反色调，或强调色调，与主色调形成鲜明对比，例如发送按钮的背景色。</li><li><code>--shadow-large: 0 0px 24px hsl(0, 0%, 0%, 0.2)</code> ，大阴影，例如标题栏、底部栏的阴影。</li><li><code>--shadow-medium: 0 0 12px hsl(0, 0%, 0%, 0.1)</code> ，小阴影，例如输入框和表情选择弹出层。</li></ul><p>接下来是一些重置样式：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">* {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  box-sizing: border-box;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  padding: 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  margin: 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  font-family: Helvetica, "PingFang SC", "Microsoft Yahei", sans-serif;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些样式对所有元素都有效，设置盒子模型为 <code>border-box</code> ，这样内边距、边框都算在宽高之内，设置内间距和外间距为 0，最后设置默认字体。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2main-容器">2）Main 容器<a class="hash-link" href="#2main-容器" title="标题的直接链接">​</a></h4><p>Main 容器用于定位聊天应用容器到浏览器中间，使用 grid 布局，宽高分别设置为浏览器可视区域的 100%，并把背景色设置为黑灰色：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">main {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  display: grid;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  place-items: center;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  width: 100vw;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  height: 100vh;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  background-color: hsl(0, 0%, 10%);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3聊天应用容器">3）聊天应用容器<a class="hash-link" href="#3聊天应用容器" title="标题的直接链接">​</a></h4><p>聊天应用容器设置了固定宽高，模拟手机屏幕，并使用 grid 布局来控制标题栏、聊天面板和底部操作栏的位置：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.chat {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  width: 375px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  height: 700px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  background: hsl(0, 0%, 100%);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  border-radius: 8px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  display: grid;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  grid-template-rows: max-content 1fr max-content;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里使用了 <code>grid-template-rows</code> 把聊天应用分成了 3 行，第一行的标题栏和最后一行的标底部操作栏的高度分别为内容的最大高度，中间的聊天面板则是浮动高度。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4标题栏">4）标题栏<a class="hash-link" href="#4标题栏" title="标题的直接链接">​</a></h4><p>标题栏简单的设置了一个内间距、文字居中方式和阴影：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.titleBar {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  padding: 24px 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  text-align: center;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  box-shadow: var(--shadow-large);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>界面优化提示：内间距用来增加留白，在视觉上引起放松，阴影则为了和下边的聊天面板区分开</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="5聊天面板">5）聊天面板<a class="hash-link" href="#5聊天面板" title="标题的直接链接">​</a></h4><p>聊天面板使用 flex 布局对其中的消息进行排列，并设置方向为按列排布，然后设置 overflow 为 auto，在消息整体高度超出面板高度时，出现滚动条：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.panel {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  display: flex;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  flex-direction: column;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  padding: 24px 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  overflow: auto;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>界面优化提示：这里的 padding 同样是为了留出足够多的空白，来与其它元素隔开一段距离，以避免拥挤感。</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="6消息">6）消息<a class="hash-link" href="#6消息" title="标题的直接链接">​</a></h4><p>消息分为消息容器、头像和消息体 3 个部分。其中消息体和头像包含在消息容器中，先来看消息容器的样式。消息容器使用 flex 布局来把消息体和头像放在一行，宽度最大为面板宽度的 80%，并设置字体和外边距：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  display: flex;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  max-width: 80%;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  font-size: 14px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  margin: 8px 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  position: relative;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里的 <code>position</code> 设置为 relative 是为了定位后边的全屏特效动画。</p><p>头像简单设置了宽高、圆角和距离消息体的间距：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message img {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  width: 40px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  height: 40px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  border-radius: 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  margin-right: 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>界面优化提示：这里不得不再提一下间距的重要性，一定不要把各个元素安排的太过紧凑，否则十分影响视觉效果，最直接的影响就是引起视觉上的拥挤感，造成视觉疲劳。</p></div></div><p>消息体同样的设置了间距和圆角，这里的圆角和头像的保持一致，以增加和谐感。它还设置了阴影，并使用 flex 布局，把里边的文字或表情消息居中对齐：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message p {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  padding: 8px 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  border-radius: 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  box-shadow: var(--shadow-large);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  display: flex;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  align-items: center;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些样式默认都是基于对方的消息的，如果是我发送的消息需要放到右边，并作一些调整。首先对于我发送的消息，把 flex-flow 改为 row-reverse 这样头像和消息体的位置就互换了，然后使用 align-self 对齐到面板的右边：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message.mine {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  flex-flow: row-reverse;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  align-self: flex-end;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>调整头像的外边距，现在应该是距离<strong>左边</strong>的消息体的边距了：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message.mine img {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  margin-right: 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  margin-left: 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>设置消息体的背景色为蓝色，文字为白色：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message.mine p {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  background-color: var(--primary-color);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  color: white;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="7底部操作栏">7）底部操作栏<a class="hash-link" href="#7底部操作栏" title="标题的直接链接">​</a></h4><p>先看底部操作栏容器的整体布局，使用 grid 布局把表情选择按钮、消息发送框和发送按钮分成 3 列，其中除消息发送框为浮动宽度外，其它的两个按钮为固定宽度，默认居中对齐，最后设置阴影和间距：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">footer {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  display: grid;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  grid-template-columns: 48px 1fr 75px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  justify-items: center;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  padding: 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  box-shadow: var(--shadow-large);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>表情选择按钮把自己进行了靠左对齐，并设置相对定位，用于定位表情选择弹出层，然后设置按钮图标的大小：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.chooseSticker {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  justify-self: start;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  position: relative;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">.chooseSticker img {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  width: 36px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  height: 36px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>表情选择弹出层的 CSS 代码比较多但都很简单，先看一下代码：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.stickers {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  display: grid;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  grid-template-columns: repeat(auto-fill, 24px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  column-gap: 18px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  border-radius: 8px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  background-color: white;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  box-shadow: var(--shadow-medium);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  padding: 6px 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  font-size: 24px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  position: absolute;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  top: calc(-100% - 18px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  width: 300px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  opacity: 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这段代码的含义是：</p><ul><li>弹出层使用 grid 布局，repeat(auto-fill, 24px) 指的是在宽度允许的条件下，在一行中尽可能放置最多的列元素，每列的宽度固定为 24px。然后设置列间距为 18px。</li><li>设置圆角、背景色、阴影、内间距和字体大小。</li><li>定位设置为绝对定位，把它向上移动<strong>包含元素高度</strong>（也就是 .chooseSticker 的高度）的 100% 并减去 18px，调整到合适的位置。宽度设置为 300px，透明度设置为 0 把它隐藏。</li></ul><p>消息输入框和按钮的样式比较简单，消息输入框的宽度占满整列，发送按钮使用 <code>justify-self: end</code> 把自己进行靠右对齐。这里把代码一次性贴出来：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.messageInput {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  box-shadow: var(--shadow-medium);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  padding: 0px 12px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  border-radius: 8px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  width: 100%;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">.send {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  height: 100%;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  width: 90%;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  border-radius: 8px;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  justify-self: end;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  color: white;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  background-color: var(--inverse-color);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>最后再添加一个 <code>.show</code> 样式，用于在点击发送表情按钮时，给表情弹出层添加该样式以显示出来：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.show {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  opacity: 1;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-js-部分">3. JS 部分<a class="hash-link" href="#3-js-部分" title="标题的直接链接">​</a></h3><p>在给聊天界面加上功能之前，先编写一些基础的 JS 代码。在项目根目录创建一个 index.js 文件，并在 index.html 中引用，注意放到 <code>&lt;/body&gt;</code> 关闭标签的上方，这样当 HTML DOM 加载完成之后才会执行 js 中的代码，防止找不到元素：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &lt;body&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   &lt;!-- 其它代码省略 --&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   &lt;script src="index.js"&gt;&lt;/script&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &lt;/body&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 index.js 中，先获取要操作的 DOM 元素：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">const panelEle = document.querySelector(".panel");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">const chooseStickerBtn = document.querySelector(".chooseSticker");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">const stickersEle = document.querySelector(".stickers");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">const msgInputEle = document.querySelector(".messageInput");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">const sendBtn = document.querySelector(".send");</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中：</p><ul><li><code>panelEle</code> 是消息面板元素，用于追加新消息。</li><li><code>chooseStickerBtn</code> 是选择表情按钮，点击它会弹出表情选择框。</li><li><code>stickersEle</code> 就是弹出的表情选择框。</li><li><code>msgInputEle</code> 是消息输入框。</li><li><code>sendBtn</code> 为发送按钮。</li></ul><p>然后引入 lottie 的 js 库，可以到示例代码仓库中下载，也可以在 <a href="https://cdnjs.com/libraries/bodymovin" target="_blank" rel="noopener noreferrer">https://cdnjs.com/libraries/bodymovin</a> 中下载 lottie.min.js，下载完成之后放到项目根目录，然后在 index.html 中，在引入 index.js 的上方引入它：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">&lt;script src="lottie.min.js"&gt;&lt;/script&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下载表情动画资源文件，它们都是 json 格式的文件，下载完成之后直接放到项目根目录即可：</p><ul><li>南瓜表情：<a href="https://lottiefiles.com/43215-pumpkins-sticker-4" target="_blank" rel="noopener noreferrer">https://lottiefiles.com/43215-pumpkins-sticker-4</a></li><li>炸弹表情：<a href="https://lottiefiles.com/3145-bomb" target="_blank" rel="noopener noreferrer">https://lottiefiles.com/3145-bomb</a></li><li>爆炸动画：<a href="https://lottiefiles.com/9990-explosion" target="_blank" rel="noopener noreferrer">https://lottiefiles.com/9990-explosion</a></li></ul><p>接下来看一下各部分功能是怎么实现的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="二发送普通消息">二、发送普通消息<a class="hash-link" href="#二发送普通消息" title="标题的直接链接">​</a></h2><p>发送普通消息时，用户在输入框输入完消息之后，点击发送，就会把该条消息追加到消息列表中，并清空输入框中的内容。那么这里先给发送按钮添加点击事件：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">sendBtn.addEventListener("click", () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  const msg = msgInputEle.value;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  if (msg) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    appendMsg(msg);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在事件处理函数中：</p><ul><li>判断用户是否输入了消息。</li><li>如果输入了就追加到消息列表中。</li></ul><p>来看一下 <code>appendMsg()</code> 函数的代码：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">function appendMsg(msg, type) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 创建消息元素</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  const msgEle = panelEle.appendChild(document.createElement("div"));</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  msgEle.classList.add("message", "mine"); // 设置为“我“发送的样式</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  msgEle.innerHTML = `</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    &lt;img class="avatar" src="./me.png" alt="" /&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    &lt;p&gt;&lt;span&gt;${msg}&lt;/span&gt;&lt;/p&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  `;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 滚动到最新消息</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  panelEle.scrollTop = panelEle.scrollHeight;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  msgInputEle.value = "";</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>函数接收两个参数，msg 和 type，分别是要追加的消息内容和类型，type 为可选的，不传则认为是普通文本消息，如果传递了 "stickers" 则为表情消息，现在还用不到它。在这个函数中主要做了下面几件事情：</p><ul><li>按照消息的 HTML 结构创建一个新的消息元素 msgEle，并追加到消息列表中。</li><li>把消息的样式设置为我发送的。</li><li>内部的元素分别为头像和文本消息，使用模板字符串的形式赋值给 msgEle 的 innerHTML 属性中，并在 <code>&lt;p&gt;</code> 中使用 msg 变量的值。</li><li>最后把滚动条滚动到最新的消息处，并清空输入框中的消息。</li></ul><p>这样就可以发送普通的文本消息了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="三发送动画表情">三、发送动画表情<a class="hash-link" href="#三发送动画表情" title="标题的直接链接">​</a></h2><p>在发送动画表情之前，需要先加载动画表情。在 index.js 的最上方先定义表情名称和表情动画文件路径的键值对信息：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">const stickers = {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  bomb: {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    path: "./3145-bomb.json",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  pumpkin: {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    path: "./43215-pumpkins-sticker-4.json",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我们会根据 <code>bomb</code> 、 <code>pumkin</code> 这样的 key 来找到对应的动画路径。接着初始化弹出层中的表情以供用户选择：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">// 初始化表情面板，也可以在表情选择窗弹出时再初始化</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Object.keys(stickers).forEach((key) =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  const lottieEle = stickersEle.appendChild(document.createElement("span"));</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 对每个表情创建 lottie 播放器</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  const player = lottie.loadAnimation({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    container: lottieEle,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    renderer: "svg",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    loop: true,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    autoplay: false,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    path: stickers[key].path,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 当选择表情时，发送消息，并设置类型为 sticker 表情消息</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  lottieEle.addEventListener("click", () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    appendMsg(key, "sticker");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 当鼠标划过时，播放动画预览</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  lottieEle.addEventListener("mouseover", () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    player.play();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 当鼠标划过时，停止动画预览</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  lottieEle.addEventListener("mouseleave", () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    player.stop();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里的代码分别作了下边这些操作：</p><ul><li><p>遍历存储表情信息的对象。</p></li><li><p>创建一个 lottie 的容器，使用 span 元素，因为 lottie 动画的播放器需要挂载到一个具体的 html 元素中。</p></li><li><p>调用 lottie 的 loadAnimation() 加载动画，它需要传递这样几个参数：</p><ul><li>container: 播放器要挂载到的容器。</li><li>renderer：可以选择是使用 svg 还是 canvas 渲染动画。</li><li>loop: 是否循环播放，由于此处是在表情选择弹出层中预览动画，所以支持循环播放。</li><li>autoplay：是否自动播放，这里设置为了否，后边让它在鼠标划过时再播放动画。</li><li>path：动画 json 文件路径，直接从对象中获取。</li></ul></li><li><p>loadAnimation() 会返回 lottie 的实例，把它保存在 player 中。</p></li></ul><p>然后后边则注册了几个事件：</p><ul><li>当 lottieEle 也就是表情被点击时，发送表情消息，给 appendMsg() 的 msg 参数设置为表情的 key，type 参数设置为 "sticker"。</li><li>当鼠标划过表情时，开始播放动画。</li><li>当鼠标划出表情时，停止动画。</li></ul><p>接着给发送表情按钮添加事件，点击时，切换表情弹出层的显示状态：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">chooseStickerBtn.addEventListener("click", () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  stickersEle.classList.toggle("show");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这时点击发送表情按钮就可以看到表情选择弹出层了。现在还不能发送表情，因为还没在 appendMsg() 函数中处理，现在来修改一下它里边的代码。首先判断：如果是表情消息，则不在消息中的 <code>&lt;p&gt;</code> 元素里添加任何信息：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">function appendMsg(msg, type) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  msgEle.innerHTML = `</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    &lt;img class="avatar" src="./me.png" alt="" /&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    &lt;p&gt;&lt;span&gt;${type === "sticker" ? "" : msg}&lt;/span&gt;&lt;/p&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  `;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后在它的下方，调用 playSticker() 函数来播放动画：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">// 处理表情消息，播放相关动画</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">if (type === "sticker") {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  playSticker(msg, msgEle);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>playSticker() 函数接收两个参数，一个是表情的 key，一个是消息元素。此时的 msg 变量的内容就是在 lottieEle 点击事件中传递过来的表情 key。函数中的代码如下：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">function playSticker(key, msgEle) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 表情消息，创建 lottie 动画</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  const lottieEle = msgEle.querySelector("span");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  lottieEle.style.width = "40px";</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  lottieEle.style.height = "40px";</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  lottie.loadAnimation({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    container: lottieEle,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    renderer: "svg",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    loop: false,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    autoplay: true,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    path: stickers[key].path,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在这个函数里主要做了下边几项操作：</p><ul><li>获取消息中的 span 元素，它将作为 lottie 的动画容器。</li><li>设置表情动画的宽高为 40px。</li><li>使用 lottie 加载动画，并设置循环播放为  false，自动播放为 true，来让表情发送时自动播放动画，且只播放一次。</li></ul><p>现在可以发送表情消息了，相关的动画也会自动播放，接下来看一下怎么实现炸弹的全屏动画和对消息元素的晃动效果。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="四发送带全屏特效的表情">四、发送带全屏特效的表情<a class="hash-link" href="#四发送带全屏特效的表情" title="标题的直接链接">​</a></h2><p>对于这种带全屏特效的表情可以单独进行判断，也可以在保存表情的对象中定义相关的操作，这里为了简单起见，我们单独判断用户是否发送了炸弹表情，然后施加相应特效。</p><p>首先在 appendMsg() 函数里，进行判断，如果发送的消息是表情消息，且表情为炸弹，则播放全屏动画并晃动消息：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">function appendMsg(msg, type) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  if (type === "sticker") {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    playSticker(msg, msgEle);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    if (msg === "bomb") {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      // 播放爆炸动画</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        playExplosion(msgEle);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      }, 800);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      // 晃动消息列表</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      shakeMessages();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里爆炸全屏动画延迟了 800 毫秒之后再执行，目的是在炸弹表情播放到合适的时间时，再播放全屏动画，播放动画使用了 playExplosion() 函数，并传递了消息元素进去。在爆炸全屏动画结束之后，调用 shakeMessages() 来晃动消息。这里先看一下 playExplosion() 函数的代码：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">function playExplosion(anchor) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  const explosionAnimeEle = anchor.appendChild(document.createElement("div"));</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  explosionAnimeEle.style.position = "absolute";</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  explosionAnimeEle.style.width = "200px";</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  explosionAnimeEle.style.height = "100px";</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  explosionAnimeEle.style.right = 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  explosionAnimeEle.style.bottom = 0;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  const explosionPlayer = lottie.loadAnimation({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    container: explosionAnimeEle,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    renderer: "svg",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    loop: false,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    autoplay: true,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    path: "./9990-explosion.json",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  explosionPlayer.setSpeed(0.3);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  // 播放完成后，销毁爆炸相关的动画和元素</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  explosionPlayer.addEventListener("complete", () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    explosionPlayer.destroy();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    explosionAnimeEle.remove();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>playExplosion() 函数接收一个 anchor 锚点，就是说基于哪个位置开始播放全屏动画，由于示例中的动画画幅比较小，所以把它固定在了最新发送的消息的下方，这里爆炸动画的 anchor 就是消息元素，之后函数做了下边的这些操作：</p><ul><li>添加全屏动画元素，设置为绝对定位，宽度 200px，高度 100px，放在最新消息元素的右下角。</li><li>加载 lottie 动画，不循环、自动播放。</li><li>由于原动画速度过快，这里调用 lottie 实例的 setSpeed() 方法，把速度设置为 0.3 倍速。</li><li>之后给 lottie 实例设置事件监听："complete"，它会在动画执行完成时触发，里边销毁了 lottie 实例和全屏动画元素。</li></ul><p>这样全屏动画的效果就实现了。接下来看消息晃动的代码：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">function shakeMessages() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  [...panelEle.children]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .reverse()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .slice(0, 5)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    .forEach((messageEle) =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      const avatarEle = messageEle.querySelector("img");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      const msgContentEle = messageEle.querySelector("p");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      avatarEle.classList.remove("shake");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      msgContentEle.classList.remove("shake");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        avatarEle.classList.add("shake");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        msgContentEle.classList.add("shake");</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      }, 700);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个函数的操作是：</p><ul><li>使用 reverse()  和 slice() 对最新的 5 条消息进行晃动，也可以把 5 改大一点，对更多消息进行晃动。</li><li>然后在循环中，分别给头像和消息添加 shake class 执行晃动动画，这个 class 的内容稍后再介绍。</li><li>要注意的是，在添加 shake  class执行动画前，需要先删除 shake，因为有的消息可能在之前已经晃动过了，例如当连续发了多个炸弹表情时。后边在添加 shake class 时，使用 setTimeout() 延迟了 700 毫秒，目的是在全屏动画执行到一定程度时再晃动消息。</li></ul><p>接下来看一下 shake class 的定义，在 style.css 中添加下方代码：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.shake {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  animation: shake 0.8s ease-in-out;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">@keyframes shake {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  from {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(0, 0px, 0px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  10% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(6px, -6px, 0px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  20% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(-5px, 5px, 0px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  30% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(4px, -4px, 0px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  35% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(-3px, 3px, 0px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  39% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(2px, -2px, 0px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  41% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(-1px, 1px, 0px);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  42% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(0px, 0px, 0px) rotate(20deg);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  52% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: rotate(-15deg);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  60% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: rotate(8deg);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  65% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: rotate(-3deg);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  67% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: rotate(1deg);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  70% {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: rotate(0deg);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  to {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    transform: translate3d(0px, 0px, 0px) rotate(0);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>.shake</code> 中使用了 shake keyframes 定义的动画，执行时间为 0.8s，动画执行函数为 ease-in-out。Keyframes 里的代码比较多，但是都是很简单的，就是模拟了爆炸时的效果，移动 x 轴和 y 轴的偏移，每次的偏移幅度越来越小，并且越来越快，可以看到百分比的间隔越来越小。在动画进行到 42% 的时候，加了一些旋转动画，这样就有了落地时的震动效果。由于使用 rotate() 旋转时的轴心在元素中间，我们可以把消息气泡的轴心修改一下来实现更真实的效果：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message p {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  transform-origin: left bottom;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">.message.mine p {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  transform-origin: right bottom;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里把对方发送的消息的轴心设置在左下角，自己发送的消息则设置在了右下角。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>现在，这个模拟微信 8.0 动画表情的功能就实现了。主要就是下边几点：</p><ul><li>使用 lottie 库加载并播放动画。</li><li>确定全屏动画的位置和播放时机。</li><li>消息晃动动画的 CSS 实现。</li></ul><p>你学会了吗？如果有问题或建议可以留个评论，喜欢此文章请点个赞或关注我，后边还有更多更精彩的文章，感谢！</p>]]></content:encoded>
            <category>前端</category>
            <category>React</category>
        </item>
        <item>
            <title><![CDATA[Docusaurus配置Gitalk评论插件]]></title>
            <link>https://kuizuo.cn/docusaurus-gitalk-plugin</link>
            <guid>docusaurus-gitalk-plugin</guid>
            <pubDate>Sat, 22 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[之前使用 vuepress 的时候，使用的评论系统是Valine，可是匿名用户也能直接评论，虽说会过滤垃圾信息，但是后台查看评论与通知总感觉没有那么实在。]]></description>
            <content:encoded><![CDATA[<p>之前使用 vuepress 的时候，使用的评论系统是<a href="https://valine.js.org/" target="_blank" rel="noopener noreferrer">Valine</a>，可是匿名用户也能直接评论，虽说会过滤垃圾信息，但是后台查看评论与通知总感觉没有那么实在。</p><p>然后换到了 docusaurus，并没有内置评论相关的，原本是打算自己写一个评论系统，MongoDB 存储评论数据相对方便些。然后这一拖就是拖到了过年前。。。无意间发现有一个插件<a href="https://gitalk.github.io/" target="_blank" rel="noopener noreferrer">Gitalk</a>，基于 Github Issue 的，而我平常又经常刷 github，加上需要 github 账号才能评论，所以就使用<a href="https://gitalk.github.io/" target="_blank" rel="noopener noreferrer">Gitalk</a> 来作为博客的评论（注：Gitalk 是基于 react 编写的）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="操作步骤">操作步骤<a class="hash-link" href="#操作步骤" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1创建评论仓库">1、创建评论仓库<a class="hash-link" href="#1创建评论仓库" title="标题的直接链接">​</a></h3><p>首先需要 github 账号，创建一个仓库用于存放评论，由于我的博客是同步上传到<a href="https://github.com/kuizuo/blog" target="_blank" rel="noopener noreferrer">github</a>上，所以就无需新建仓库</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2开启-issues-功能">2、开启 issues 功能<a class="hash-link" href="#2开启-issues-功能" title="标题的直接链接">​</a></h3><p>默认开启，可在 Settings -&gt; Features -&gt; Issues 中设置</p><p><img loading="lazy" src="https://img.kuizuo.cn/20220122141447.png" alt="image-20220122141447919" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3注册一个-github-applications">3、注册一个 Github applications<a class="hash-link" href="#3注册一个-github-applications" title="标题的直接链接">​</a></h3><p>点击<a href="https://github.com/settings/developers" target="_blank" rel="noopener noreferrer">此处</a>创建或在 github 右上角路径 settings -&gt; Developer settings -&gt; OAuth Apps</p><p><img loading="lazy" src="https://img.kuizuo.cn/20220121225106.png" alt="image-20220121225059192" class="img_ev3q"></p><ul><li>Homepage URL：就是博客的网址（如果是 github.io 的 page）</li><li>Authorization callback URL: 就是 github 权限验证的回调地址，一般默认就是域名</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4获取-client-id-和-client-secret">4、获取 Client ID 和 Client Secret<a class="hash-link" href="#4获取-client-id-和-client-secret" title="标题的直接链接">​</a></h3><p>创建成功后，就可以获取到 Client ID 和 Client Secret 了，保存下来。</p><p><img loading="lazy" src="https://img.kuizuo.cn/20220122130222.png" alt="image-20220122130221871" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5安装">5、安装<a class="hash-link" href="#5安装" title="标题的直接链接">​</a></h3><p><a href="https://github.com/gitalk/gitalk/blob/master/readme-cn.md#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">官方教程</a></p><ul><li>直接引入</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">link</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">stylesheet</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">script</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">script</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!-- or --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">link</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">stylesheet</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">https://unpkg.com/gitalk/dist/gitalk.css</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">script</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">https://unpkg.com/gitalk/dist/gitalk.min.js</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">script</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>npm 安装</li></ul><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm i --save gitalk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'gitalk/dist/gitalk.css'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Gitalk</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'gitalk'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6使用">6、使用<a class="hash-link" href="#6使用" title="标题的直接链接">​</a></h3><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">gitalk-container</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>用下面的 Javascript 代码来生成 gitalk 插件：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> gitalk </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Gitalk</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">clientID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GitHub Application Client ID'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">clientSecret</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GitHub Application Client Secret'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">repo</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GitHub repo'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">owner</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GitHub repo owner'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">admin</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token string" style="color:#a6e22e">'GitHub repo owner and collaborators, only these guys can initialize github issues'</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">location</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">pathname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// Ensure uniqueness and length less than 50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">distractionFreeMode</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// Facebook-like distraction free mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gitalk</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">render</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">'gitalk-container'</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="react-中使用">react 中使用<a class="hash-link" href="#react-中使用" title="标题的直接链接">​</a></h5><p>导入 Gitalk 组件与样式</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'gitalk/dist/gitalk.css'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">GitalkComponent</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'gitalk/dist/gitalk-component'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用组件与配置参数</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">GitalkComponent</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">  </span><span class="token tag attr-name" style="color:#a6e22e !important">options</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">    </span><span class="token tag script language-javascript literal-property property" style="color:#f92672">clientID</span><span class="token tag script language-javascript operator" style="color:#66d9ef">:</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript string" style="color:#a6e22e">'...'</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">,</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">    </span><span class="token tag script language-javascript comment" style="color:#8292a2;font-style:italic">// ...</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">    </span><span class="token tag script language-javascript comment" style="color:#8292a2;font-style:italic">// options below</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">  </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672"></span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我的配置</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> options </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">clientID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GitHub Application Client ID'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">clientSecret</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GitHub Application Client Secret'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">repo</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'blog'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">owner</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'kuizuo'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">admin</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token string" style="color:#a6e22e">'kuizuo'</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> title</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> title</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">labels</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> labels</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">distractionFreeMode</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>具体参数<a href="https://github.com/gitalk/gitalk/blob/master/readme-cn.md#%E8%AE%BE%E7%BD%AE" target="_blank" rel="noopener noreferrer">gitalk</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题<a class="hash-link" href="#问题" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="error-not-found">Error: Not Found<a class="hash-link" href="#error-not-found" title="标题的直接链接">​</a></h3><p>options 有个选项 repo，填写的是仓库名称，不是链接，像上面我所填写的就是<code>blog</code>，而不是填写<a href="https://github.com/kuizuo/blog" target="_blank" rel="noopener noreferrer">https://github.com/kuizuo/blog</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="未找到相关的-issues-进行评论请联系-xxxxx-初始化创建">未找到相关的 <a href="https://github.com/kuizuo/blog/issues" target="_blank" rel="noopener noreferrer">Issues</a> 进行评论，请联系 @xxxxx 初始化创建<a class="hash-link" href="#未找到相关的-issues-进行评论请联系-xxxxx-初始化创建" title="标题的直接链接">​</a></h3><p>这里的 xxxxx 就是选项 admin 的内容，首次载入文章的话需要用管理员账号登录初始化一下（也就是新建一个 issues），否则其他人访问也将会提示该信息。</p><p>目前暂时没找到有效办法一键加载所有博客的 issues，只要用登录 github 的管理员账号去访问每一篇博客。</p><p>其中在<a href="#3%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA-github-applications">第 3 步</a>的 Authorization callback URL 地址一定要填写成现在博客线上环境 <a href="https://kuizuo.cn" target="_blank" rel="noopener noreferrer">https://kuizuo.cn</a> ，否则也无法正常使用</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validation-failed">Validation failed<a class="hash-link" href="#validation-failed" title="标题的直接链接">​</a></h3><p>原因是 id 参数不能超过 50 个字符，但是默认是 location.href，有可能会导致长度超过。所以我的做法是 id: title，同时访问页面的时候，会自动为仓库创建一个 issue，标题为文章的标题。</p><p>也有可能是请求过于频繁，触发了 Github 的限流机制，需要等待几分钟后恢复。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="react-编译遇到的问题">react 编译遇到的问题<a class="hash-link" href="#react-编译遇到的问题" title="标题的直接链接">​</a></h3><p>插件中会使用到浏览器的 window 对象，开发时正常，但是编译就会报错（提示 window is not defined），这边引用了 docusaurus 的<a href="https://docusaurus.io/zh-CN/docs/docusaurus-core#browseronly" target="_blank" rel="noopener noreferrer">BrowserOnly</a>，将代码封装成如下便可正常编译</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">BrowserOnly</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag script language-javascript tag" style="color:#f92672">div</span><span class="token tag script language-javascript tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag script language-javascript tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag script language-javascript tag" style="color:#f92672">div</span><span class="token tag script language-javascript tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">GitalkComponent</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">options</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">options</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">BrowserOnly</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/kuizuo/blog/blob/main/src/theme/BlogPostPage/index.jsx" target="_blank" rel="noopener noreferrer">查看完整源码点我</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-api">Github Api<a class="hash-link" href="#github-api" title="标题的直接链接">​</a></h2><p><a href="https://docs.github.com/cn" target="_blank" rel="noopener noreferrer">GitHub Documentation</a></p><p>通过 github api 还可以获取 issues 列表</p><p>访问 <a href="https://api.github.com/repos/kuizuo/blog/issues%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B" target="_blank" rel="noopener noreferrer">https://api.github.com/repos/kuizuo/blog/issues，返回结果如下</a></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/issues/24"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"repository_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"labels_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/issues/24/labels{/name}"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"comments_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/issues/24/comments"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"events_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/issues/24/events"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"html_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://github.com/kuizuo/blog/issues/24"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1111300101</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"node_id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"I_kwDOF7NJDM5CPRgF"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"number"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"title"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Docusaurus配置Gitalk评论插件"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"user"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"login"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"kuizuo"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">61005888</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"node_id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"MDQ6VXNlcjYxMDA1ODg4"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"avatar_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://avatars.githubusercontent.com/u/61005888?v=4"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"gravatar_id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">""</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"html_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://github.com/kuizuo"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"followers_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/followers"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"following_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/following{/other_user}"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"gists_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/gists{/gist_id}"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"starred_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/starred{/owner}{/repo}"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"subscriptions_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/subscriptions"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"organizations_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/orgs"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"repos_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/repos"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"events_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/events{/privacy}"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"received_events_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/users/kuizuo/received_events"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"type"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"User"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"site_admin"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"labels"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3754161267</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"node_id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"LA_kwDOF7NJDM7fw_Rz"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/labels/Gitalk"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"name"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Gitalk"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"color"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"ededed"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"default"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"description"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3754411279</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"node_id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"LA_kwDOF7NJDM7fx8UP"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/labels/blog"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"name"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"blog"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"color"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"ededed"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"default"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"description"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3754517867</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"node_id"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"LA_kwDOF7NJDM7fyWVr"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/labels/Docusaurus%E9%85%8D%E7%BD%AEGitalk%E8%AF%84%E8%AE%BA%E6%8F%92%E4%BB%B6"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"name"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Docusaurus配置Gitalk评论插件"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"color"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"ededed"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"default"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token property" style="color:#f92672">"description"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"state"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"open"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"locked"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"assignee"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"assignees"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"milestone"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"comments"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"created_at"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"2022-01-22T06:47:34Z"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"updated_at"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"2022-01-22T06:47:34Z"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"closed_at"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"author_association"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"OWNER"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"active_lock_reason"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"body"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://kuizuo.cn/develop/Docusaurus配置Gitalk评论插件\n前言"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"reactions"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/issues/24/reactions"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"total_count"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"+1"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"-1"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"laugh"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"hooray"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"confused"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"heart"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"rocket"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token property" style="color:#f92672">"eyes"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"timeline_url"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://api.github.com/repos/kuizuo/blog/issues/24/timeline"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">"performed_via_github_app"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#66d9ef">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>相关 api 文档 =&gt; <a href="https://docs.github.com/cn/rest/reference/issues#comments" target="_blank" rel="noopener noreferrer">github docs</a></p><p>也许后续可能考虑使用<a href="https://github.com/octokit/octokit.js" target="_blank" rel="noopener noreferrer">octokit.js</a>来编写一个后台查询与删除的管理页。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="最终效果">最终效果<a class="hash-link" href="#最终效果" title="标题的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="评论页">评论页<a class="hash-link" href="#评论页" title="标题的直接链接">​</a></h4><p><img loading="lazy" src="https://img.kuizuo.cn/20220122164034.png" alt="image-20220122164034147" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-页面">issues 页面<a class="hash-link" href="#issues-页面" title="标题的直接链接">​</a></h4><p><img loading="lazy" src="https://img.kuizuo.cn/20220122163957.png" alt="image-20220122163957435" class="img_ev3q"></p>]]></content:encoded>
            <category>blog</category>
            <category>gitalk</category>
        </item>
        <item>
            <title><![CDATA[回顾2020，程序员转型的起步]]></title>
            <link>https://kuizuo.cn/review-2020</link>
            <guid>review-2020</guid>
            <pubDate>Thu, 06 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[对未来的焦虑应该是每个程序员都能体会到的吧，面对招聘的年龄门槛、工作与生活的平衡、不良的生活习惯，以后的路要怎么走充满了不确定性。但是又因为程序员是技术工种，自己所掌握的技能可以从接外包、作产品、写博客、录视频等多方面进行输出，看似又不缺出路，只是怀疑能不能做好，所以一边担心自己能不能转型或改行，一边又极其期望逃离没有出头之日的 996 ，这是一个难题。]]></description>
            <content:encoded><![CDATA[<p>对未来的焦虑应该是每个程序员都能体会到的吧，面对招聘的年龄门槛、工作与生活的平衡、不良的生活习惯，以后的路要怎么走充满了不确定性。但是又因为程序员是技术工种，自己所掌握的技能可以从接外包、作产品、写博客、录视频等多方面进行输出，看似又不缺出路，只是怀疑能不能做好，所以一边担心自己能不能转型或改行，一边又极其期望逃离没有出头之日的 996 ，这是一个难题。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>注意：这篇文章中有带货链接，对你的阅读体验并没有影响，不过如果你通过链接购买了商品，那么会帮助 UP 主恰饭，以支持 UP 创作更多优质的内容。谢谢支持🍙！</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="契机">契机<a class="hash-link" href="#契机" title="标题的直接链接">​</a></h2><p>2019 年我再一次从公司离职，感觉在公司里很难做到工作和生活的平衡，在失去放松的时间之后，换来的是低下的工作效率和疲惫不堪的身体，更有的公司如果领导不走自己就不敢下班，就算耗也要先把领导耗走，单纯的把该有的放松时间完全浪费掉了，这种有损健康的事情每位奋斗在前线的程序员都应该考虑一下值不值得。我一直想摆脱这样的生存方式，后来想到在留学的时候曾一腔热情的想创业，那么为何不现在开始试一下呢？于是我打算走内容创作的路线了。</p><p>在离职前，我的 Team Leader 送给了我一本书，<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRtaEAYUBFYYXRUyEgZQHV8XABYAXR5rUV1KWQorAlBHU0VeBUVNR0ZbSkdETlcNVQtHRVNSUVNLXANBRA1XB14DS10cQQVYD21XHgdUHl0RABADUhNeJVVuWg5DUkpRcXQzEgZ9SlVxV2g6XXIeC2UaaxUDEwRXGlwTAxs3ZRtcJUN8DlYaWBIyEzdVHFodBxoAXBxcHQYRN1IbUiUCGwBVElsSBhoOXXUaJTIiBGUraxUyETcXdVIQV0VSXBIOEwFGBFBIC0ELE1NdGwxACkUFABJZQgZHN1caWhEL" target="_blank" rel="noopener noreferrer">软技能-代码之外的生存指南</a>，是 <a href="https://simpleprogrammer.com/" target="_blank" rel="noopener noreferrer">SimpleProgrammer.com</a> 博主写的，这本书从程序员学习、找工作、自由职业、财务自由和身心健康等各个方面提供了一整套的指南，虽然各部分的内容都比较笼统，但是给程序员的发展路线提供了很好的参考。在看了其中关于写博客、做 Youtube 和录课的部分，又看了之前同学给我推荐的几个 Youtube 学编程的视频之后，我决定试试自己能不能通过传播知识来实现自己的梦想。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="发布第一个视频">发布第一个视频<a class="hash-link" href="#发布第一个视频" title="标题的直接链接">​</a></h2><p>在决定通过内容创作来帮助他人并实现自己的人生价值之后，我在抖音上发布了第一个编程视频，内容是编写一个有渐变效果的卡片，当时什么录音设备也没有，直接用的耳机自带的麦，在录完之后发现自己说话的语速又慢声音又难听，都不好意思发出去。后来想着以后要走这条路脸皮一定要厚（现在还是不够厚），一咬牙就发出去了。结果还好，除了家人和朋友之外没人看，这下放心了，不怕别人说我声音难听、又不会讲课了。我妈说她给她朋友看了，都说我的声音很好听，有磁性。我想，敢情是你亲儿子……</p><p>此时我正式迈出了第一步。由于实在是嫌弃自己的声音，而又在 Youtube 上看过那种没声音、只写代码的展示类视频，这种视频似乎也能学到写代码的过程，于是我索性也就不录声音了，还省事。后来又做了一个视频，这次只是单纯的展示写代码的过程，还是传到抖音上，发现仍然没有人看，所以就想是不是平台有问题？在琢磨良久之后，突然醒悟过来，抖音只适合做娱乐、搞笑、放松一类的短视频，对于严肃的知识类的视频，谁还在忙了一天之后有精力去看呢？而且上边的人群一般也不是想学编程的吧……我观察了抖音上其它比较火的几个前端账号，几乎全部都是带有一些段子和糗事片段的视频，而里边的代码则并不是重点（后来发现无论在哪个平台这都是涨粉的秘诀），但是我实在不想做这样的视频，而是想做类似 Youtube 上专业知识类的视频，因此需要找一个类似的平台。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="来到-b-站">来到 B 站<a class="hash-link" href="#来到-b-站" title="标题的直接链接">​</a></h2><p>在研究了一段时间平台之后，突然灵光一现，想起来 2018 年找工作之前在 B 站上看过一系列的 Adobe Illustrator 的教学视频，意识到没准 B 站上才是认真学习人群的聚集地。正好我有已经转正的 B 站账号了，发视频也就投下稿的事，于是陆续发了几个无声快进写代码的视频，这时因为全身心的投入在做视频上，所以基本上是日更。发了几天之后开始慢慢的有了粉丝、评论和三连，这些给了我巨大的动力。后来看到评论里有一些是要求出带讲解的视频，这时我心里又痒了，要不就出个声？出吧。决定之后拿之前为公司年会准备的麦克风（年会没用上）开始讲解，不过听着自己的声音仍然刺耳，而且会磕绊很多，录 20 多分钟的视频大概要剪辑 1 个多小时，不过因为有人看，这点劳动还是值得付出的。后来一个多月过去了，粉丝破千可以开创作激励了，收到 1 块、2 块的激励金感觉真的是凭自己本事赚到了人生的第一桶金。</p><p>劲头十足的我开始尝试做了几种不同的视频类型，有整套的教程，例如 <a href="https://www.bilibili.com/video/BV1P741147CT/" target="_blank" rel="noopener noreferrer">JavaScript 基础语法教程</a>，<a href="https://www.bilibili.com/video/BV117411n7R1/" target="_blank" rel="noopener noreferrer">从零开发一个响应式的网站</a>，也尝试过 <a href="https://www.bilibili.com/video/BV18p411A7JB/" target="_blank" rel="noopener noreferrer">2 分钟动画解释概念</a>系列。从不同类型视频的反馈来看，效果比较好的还是2 分钟动画系列，当时做的第一个是学习 AE 后制作的 <a href="https://www.bilibili.com/video/BV1P7411m7Nu/" target="_blank" rel="noopener noreferrer">Flex 布局视频</a>，做了 2 天的时间，耗时简直是做视频之最，从这个体验中意识到 AE 有点大材小用了，后来又在剪辑软件中直接做，发现也挺烦的。琢磨了好久之后，突然想到 PPT 不就能做动画么？于是在尝试了微软的 PowerPoint 和 Mac 的 Keynote 之后，就决定用 Keynote 做动画了，瞬间感觉难度下来了，效果也不错，压力成倍的下降，这个一直到现在都是我制作视频的主要方法，在更新了 MacOS Big Sur 之后，Keynote 也支持 60 帧视频导出了，提升了观看体验。</p><p>在 B 站一年给我的感觉是，数据一直是属于稳步增长型的，期间也有见其它 UP 主的数据噌噌的往上飙而心生羡慕，因为他们的视频有意思，人们爱看。不过数据一直不是我的最终目标，所以在羡慕过后还是继续走我内心想走的路线吧，让大家能学到真正的知识以及既有用又酷炫的特效。顺便提一下，现在也终于适应听自己的声音了😉。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="写书">写书<a class="hash-link" href="#写书" title="标题的直接链接">​</a></h2><p>写书这个事在 2020 年占了有近一半的时间，早在 3 月份清华大学出版社的编辑姐姐就联系到了我，问有没有意向出书。想着之前在 2018 年的时候差点也就开始写书了，并且现在仍然有意向所以就答应了，而且一答应就是两本... 现在在写第一本关于 JavaScript 基础语法的书，涵盖 ES6 到 ES2020 所有的新特性，以及基础和高级的用法，足以应付工作开发需要了。当然，准备这么多的内容的代价是大量的思考、调查和研究的时间，真正在写书的时间反而要少一些，所以到写本博客的时候，这本书的草稿才刚写完，正在进行内容修订。</p><p>在这个过程中最大的挑战是遣词造句，因为我是标准的理工男，不太会表达和写作，所以在为了阐述清楚一个概念时，要琢磨好久怎么把它说清楚，觉得这么写不好，那么写也不好，有时候盯着屏幕看半天都憋不出一个字来，后来在写到后半部分的时候思路才渐渐的流畅了起来。前期从样章审核后返回来的文法、词汇、造句等问题的批注上，我也学到了好多，认识到了所写的文本有多么的糟糕，每页纸上都是密密麻麻的、编辑姐姐用心标注的问题，在改完之后感觉如获新生。现在，希望可以尽快正式把稿件交上去，等着后期审校。希望在出版之后，能得到你的支持。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="录课">录课<a class="hash-link" href="#录课" title="标题的直接链接">​</a></h2><p>在收到写书邀请时，我其实正在准备录课。作为一名没有任何经济来源的全职 UP 主，又不能向其他热门 UP 主那样靠着视频激励、广告等恰饭，感觉人生很有压力。在询问粉丝朋友意见之后，几乎都支持我录课进行恰饭，这里着实的感动到我了，我以为所有人都会很反感 UP 主恰饭，所以这里要好好的谢谢 B 站的朋友们，以及正在阅读篇文章的你。</p><p>有了大家的支持后，我打算做一门与众不同但实用的课程。我回顾了一下上班时所做的项目，以及 B 站的评论，发现 CSS 是大部分人的弱点，所以借着组件化的特色，出了一门 <a href="https://study.163.com/course/courseMain.htm?courseId=1210022809&amp;share=2&amp;shareId=480000002172128" target="_blank" rel="noopener noreferrer">React 即时通信 UI 实战课程</a>，主打常用组件的实现方式。准备这门课花费了将近 5 个月的时间，其中大概 1 个多月的时间进行界面设计和代码开发，后来拖延了一个月没有录视频，因为不知道以什么形式呈现这个课程。后来决定还是以精剪后专业的形式录制视频，不浪费大家一秒钟的时间。这个时间成本真的是巨大的，要写脚本、做 PPT、录视频、剪视频，一开始一周只能出 3、4 节课，后来有了前边的基础进度才稍快一点。录视频从 5 月份一直持续到 8 月才完成。</p><p>上线之后我觉得有 10 个人买就有希望，结果第 1 天销量就远超预期了，2 天的时间就破百了，我那个心是扑通扑通激动的跳个不停啊，给大家跪下了！当时想的是这个课要卖不出去，我就接着去北漂了，真的特别感谢 B 站上的每一个朋友，所以在能恰饭的基础上，我把我所掌握的、能教的全部都免费奉献给大家了，也算是回报大家对我的支持。</p><p>关于这个课，有一点是 React 这个系列大概国内并不太适合，毕竟用的公司少一点，可能学起来并不感觉真的学到了有用的东西，所以后面尝试一下 Vue 的课程吧，最近几天收到的调查大家更倾向于全栈的后台管理系统开发，这个工作量，有点巨大，分期来吧。React 的坑当然也必须要填上，后面要开发功能逻辑，这些都在 2021 年筹划一下。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="展望">展望<a class="hash-link" href="#展望" title="标题的直接链接">​</a></h2><p>2020 年，因为疫情，其实也是给了我机会，大家都在家工作上学，所以对于在 B 站发展的我有很大帮助。这一年，算是我正式开始由搬砖程序员转型为教育型程序员了，当然这一年的时间太短了，还不能确定成功与否。2021 年我会继续坚持一年，希望能在视频方面有所突破，能用更好的方式呈现视频，另外也会寻求多元化的发展，将以更多的形式传播更多的知识。新的一年，你也要努力，在学习的路上还有很长的时间的一段路要走，哪怕是到了我这年纪、我这种工作经验的仍然要学个不停，所以不要懈怠，学到知识的时候一定要多练习，把它固化到自己的脑子，这才是真正的掌握了。另外，在接触越多知识之后，会发现好多理论都是相通的，不只是技术之间，学科之间也是，这样就能加快学习的速度，所以不用怕学不动，学就对了。我们一起加油！</p>]]></content:encoded>
            <category>个人</category>
            <category>经验</category>
        </item>
        <item>
            <title><![CDATA[整理了5个JavaScript怪异行为及其原因]]></title>
            <link>https://kuizuo.cn/5-javascript-tricky-problems</link>
            <guid>5-javascript-tricky-problems</guid>
            <pubDate>Mon, 13 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[JavaScript 早期的规范不统一，也没有严格的标准，再加上它的语法灵活多样，有些看起来就不正确的代码却能正常执行，一些看起来符合逻辑的代码，运行结果却相差十万八千里。这些问题在日常开发中经常会导致 BUG，更重要的是，很多面试官会把它们拿出来当考验咱们 JS 工程师的能力。]]></description>
            <content:encoded><![CDATA[<p>如果你用 JavaScript 写过项目或者参加过面试，那一定遇到过不少令人匪夷所思的问题。JavaScript 早期的规范不统一，也没有严格的标准，再加上它的语法灵活多样，有些看起来就不正确的代码却能正常执行，一些看起来符合逻辑的代码，运行结果却相差十万八千里。这些问题在日常开发中经常会导致 BUG，更重要的是，很多面试官会把它们拿出来当考验咱们 JS 工程师的能力。那么这篇文章就总结了 5 个 JavaScript 比较坑的问题，以及它们出现的原因和解决方法。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1可选分号">1、可选分号<a class="hash-link" href="#1可选分号" title="标题的直接链接">​</a></h2><p>问题：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">foo</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">     </span><span class="token literal-property property" style="color:#f92672">value</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">typeof</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">foo</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你可能会认为它的输出结果是 "object"，但是结果却是 <code>undefined</code>。乍一看代码好像没什么问题，但是细心一点可以看到 return 语句返回的对象放到了下一行，那么问题就来了：JavaScript 的分号是可选的，return 语句在换行后，JavaScript 会自动给它的结尾加上分号，而在 return 之后的代码都不会执行，所以 foo() 的返回结果是 undefined。解决方法是在每行结尾都写上分号，这样就能清楚的知道代码在哪里结束。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2this-指向">2、this 指向<a class="hash-link" href="#2this-指向" title="标题的直接链接">​</a></h2><p>问题：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> obj </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#f92672">a</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function-variable function" style="color:#e6db74">foo</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">a</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> objFoo </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">foo</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">objFoo</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>答案为 5。在调用函数时，它内部的 this 指向的是调用对象，例如 <code>obj.foo()</code> this 指向的是 obj 对象。如果在全局调用函数时， this 指向的是全局对象，在浏览器中为 window。<code>objFoo</code> 相当于是在获取了 <code>obj</code> 对象的 <code>foo</code> 方法引用后，在全局进行调用，所以 this 指向的是 window 对象。使用  <code>var</code> 在顶级作用域中定义的变量会添加到 window 中，所以 objFoo() 调用打印的是全局中的 a，即 5。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3数组长度">3、数组长度<a class="hash-link" href="#3数组长度" title="标题的直接链接">​</a></h2><p>问题：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> arr </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">arr</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>结果为 <code>undefined</code>, 因为 array 的 length 属性同时也能反过来控制数组的元素数量，在给 arr.length 设置为 0 时，arr 就变成了空数组，再访问里边的元素就都是 undefined 了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4提升hoisting">4、提升（Hoisting)<a class="hash-link" href="#4提升hoisting" title="标题的直接链接">​</a></h2><p>问题：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">bar</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  foo </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">foo</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> foo </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'11'</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">typeof</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">bar</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>结果为 <code>function</code>。使用 var 声明的变量和使用 funtion 定义的函数会提升到当前作用域的顶部，所以变量可以先赋值，后使用 var 进行声明，而函数则可以先调用后定义。<strong>但是要注意的是，使用 var 定义（指在声明的同时进行赋值）的变量，只会提升声明部分，赋值部分不会被提升，例如示例中的</strong> <code>var foo = '11'</code> 会提升 <code>var foo</code>，但 <code>foo = 11</code> 保留在原位。在定义 bar() 函数时，同时会创建一个作用域，提升会把相关变量和函数放到 bar() 函数的第一行。 综合上边的规则，可以知道 foo() 函数和 foo 变量的声明进行了提升，因为 foo 变量与同名，但是只有声明，所以不会覆盖函数的值，foo 仍然指向的是函数。之后就直接使用 return 语句返回了结果，后边的代码就不会再执行了。bar() 中的代码其实是下边这种形式：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">bar</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">foo</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  foo </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> foo </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'11'</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5作用域与闭包">5、作用域与闭包<a class="hash-link" href="#5作用域与闭包" title="标题的直接链接">​</a></h2><p>问题：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword control-flow" style="color:#66d9ef">for</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i</span><span class="token operator" style="color:#66d9ef">++</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">setTimeout</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你可能会认为上方代码的结果为 <code>0 1 2</code>，但实际上是 <code>3 3 3</code>，这是因为使用 var 关键字定义的变量没有块级作用域，在 for 循环中定义的 i 相当于是全局变量，它会添加到 window 变量中，即使在 for 循环退出后也能访问 i 的值。这样就导致了一个问题，使用 setTimeout() 推迟的函数会在 for 循环结束后才执行，此时 i 的值已经变成 3 了，所以 3 个 setTimeout() 中的函数都会打印出 3。要解决这个问题有两种方法。</p><p>第 1 种是使用 let 关键字定义变量 i，这样在每次循环时，都会创建一个新的作用域，因此每个作用域中的 i 是相互独立的，这样就能打印出 <code>0 1 2</code>。</p><p>第 2 种方法是使用自执行函数，例如下边代码这样：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword control-flow" style="color:#66d9ef">for</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> i</span><span class="token operator" style="color:#66d9ef">++</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">i</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">setTimeout</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这时，i 通过参数传递给了匿名的自执行函数，同时自执行函数创建了一个闭包，所以它会捕获 i 的值，相当于在内部复制了参数 i 的值，所以无论外边的 i 怎么变化，它内部的值都不会发生改变。这样也能打印出 <code>0 1 2</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="小结">小结<a class="hash-link" href="#小结" title="标题的直接链接">​</a></h2><p>这 5 个问题揭露了 JavaScript 中常见的一些坑，稍微不注意就会留下隐患，并且难以察觉，例如一个简单的换行、 this 指向的改变、意外修改数组的长度、变量和函数提升、作用域的创建都有可能出现异外的情况。这些问题可能在日常开发中并不多见，但是经常会出现在 JS 笔试和面试中，用于考察面试者对 JS 的熟悉程度。另外， JS 中的坑远不止这些，所以需要在日常中多积累，另外也可关注本博客，我会不定时的更新 JavaScript 使用上的问题，感谢！</p>]]></content:encoded>
            <category>前端</category>
            <category>JavaScript</category>
        </item>
        <item>
            <title><![CDATA[1024：程序员，你的身体还好吗？]]></title>
            <link>https://kuizuo.cn/1024-developer-health</link>
            <guid>1024-developer-health</guid>
            <pubDate>Sun, 24 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[从几何时，程序员成了加班、996 的代名词，从以前业务做不完偶尔加班变成了现在的常态，不得不说一句俗话：这是时代的进步还是倒退？]]></description>
            <content:encoded><![CDATA[<p>又到一年一度的 10 月 24 日程序员节了，按百度百科的定义，这一天的意义是拒绝加班：</p><blockquote><p><a href="https://baike.baidu.com/item/1024%E7%A8%8B%E5%BA%8F%E5%91%98%E8%8A%82/16017417?fromtitle=1024&amp;fromid=22984677&amp;fr=aladdin" target="_blank" rel="noopener noreferrer">百度百科：</a>1024程序员节是广大程序员的共同节日。1024是2的十次方，二进制计数的基本计量单位之一。针对程序员经常周末加班与工作日熬夜的情况，部分互联网机构倡议每年的10月24日为1024程序员节，在这一天建议程序员拒绝加班。</p></blockquote><p>然而反观现实中程序员的工作与生活，这一天的意义真的达到了吗？从几何时，程序员成了加班、996 的代名词，从以前业务做不完偶尔加班变成了现在的常态，不得不说一句俗话：这是时代的进步还是倒退？1024 这个本该关注程序员权益的问题，非但没带来任何进步，反而又像双十一成了电商推销电子产品的噱头。试问，有多少人真正关心过程序员的身心健康？鉴于此，本文将从生理和心理两方面来分析程序员职业风险，让更多人了解程序员所面临的健康问题。因为本人并非医疗专家，所以文中所提供的建议应只作为参考，如果身体有任何异常情况请及时就医。另外，如果你热爱你的工作并且充满了干劲，那么这篇文章可以不看。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="生理问题">生理问题<a class="hash-link" href="#生理问题" title="标题的直接链接">​</a></h2><p>一说程序员的工作方式，下面这个网流图最直观：</p><p><img loading="lazy" alt="img" src="/assets/images/2020-10-24-14-08-25-c2cb4941d5092903ff077f7f24dd3970.png" width="314" height="300" class="img_ev3q"></p><p>别笑，真实生活中的程序员确实很多都是这样的。我们来逐一分析一下做程序员这一行带来的一系列的生理上的问题。</p><ul><li><p>首先是颈椎。我们在写代码的时候，往往字体都比较小，这样方便观察代码的整体逻辑，不知不觉的在视力疲劳之后，头部就会往前倾，<a href="http://www.jksb.com.cn/html/2017/jiankangshuzi_0210/108505.html" target="_blank" rel="noopener noreferrer">而头前倾 1 寸，颈椎压力就会增 1 倍</a>。久而久之，颈椎就会变形，影响形象不说，还会引起脑部供血不足，造成头晕、头昏、不清醒的感觉，我本人也深受此困扰。</p></li><li><p>其次是久坐。因为写代码要求思路流畅，随便一个分心的事情都能使思路断片，便感觉懊恼不已，干脆就一直写代码，直到非要上厕所或有事的时候才起身，这就导致了久坐的问题。有研究称，<a href="http://health.people.com.cn/n1/2018/1105/c14739-30381668.html" target="_blank" rel="noopener noreferrer">久坐的危害大过吸烟</a>，不亚于慢性自杀。</p></li><li><p>再有是熬夜。随着工作时间的加长。那么熬夜是必然的一个结果。那么<a href="http://m.xinhuanet.com/yn/2018-05/26/c_137205544.htm" target="_blank" rel="noopener noreferrer">熬夜的危害</a>就不用多说了，它会造成免疫力下降，还会造成一脸的颓废相：黑眼圈、油光满面、痘痘丛生，更会引起新陈代谢减速，造成肥胖。</p></li><li><p>最后是三高。当工作忙起来的时候，我们一般就会凑合着点外卖，或者吃快餐，很少有人从家里带饭到公司里吃。因为外边餐馆的油大、口味重，再加上久坐运动少，血液里的废物不能及时的排出去，就又会导致三高和肥胖问题，而这又是猝死的元凶。</p></li></ul><p>996 的工作制更加大了我们生理问题的危险，我们把更长的时间放到了盯着电脑和久坐上，无一不是在拿自己的命换钱，说程序员是青春饭也是有道理的，要解决这些问题，需要从自身习惯上下手。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="解决方法">解决方法<a class="hash-link" href="#解决方法" title="标题的直接链接">​</a></h3><p>如果想要从本质上解决这个问题，那就是找一份正常工作制度的公司，先别急着反驳，先想想阻止你换工作的障碍是什么？房贷？家庭？技术水平？还是其它任何原因？这些都是借口。没有人逼迫你立刻辞职，完全可以边工作边准备面试目标公司，996 至少还有 1 天是自由时间，再有平时工作也不是 100%的时间在忙，可以在这些时间里充分提升自己，进入理想的公司。短时间集中努力换取舒适的环境总比长期在一个不良的环境中要好的多，俗话说长痛不如短痛，不要给自己的不作为找借口。</p><p>而对于颈椎和久坐的问题，这个要靠外界限制和自制力。我的电脑上安装了 <a href="https://hovancik.net/stretchly/" target="_blank" rel="noopener noreferrer">Strechly</a> ，它可以设置每隔一小段时间休息 20 秒，每隔一大段时间休息 10 分钟，并且有窗口遮挡工作区，防止你继续工作，当然必要情况下也可以手动延后休息。建议是采用 <a href="http://news.xinhuanet.com/world/2017-02/03/c_129464266.htm#:~:text=%E4%B8%93%E5%AE%B6%E5%BB%BA%E8%AE%AE%E4%BA%BA%E4%BB%AC%E9%81%B5%E4%BB%8E%EF%BC%92%EF%BC%90,%E7%A7%92%E6%88%96%E6%9B%B4%E9%95%BF%E6%97%B6%E9%97%B4%E3%80%82" target="_blank" rel="noopener noreferrer">20-20-20 原则</a>，使用电子产品每20分钟就把视线移到离屏幕20英尺(约合6米)以外的地方，保持20秒或更长时间，虽然是针对眼睛的，但是我们也可以利用这 20 秒活动一下身体。另外早起或晚上下班前有时间和精力的，可以做一些有氧或无氧运动。最后在饮食上，一定要少油少盐少糖，烹饪步骤越少越少，食物应多种多样（蔬菜、肉、蛋、奶、谷物等），以保证营养。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="心理问题">心理问题<a class="hash-link" href="#心理问题" title="标题的直接链接">​</a></h2><p>若说程序员的生理问题严重等级为重要，那么心理问题则是重中之重。一个健康的心理，加上乐观的情绪，能够减少生理上的问题，然而程序员的工作制度和方式，给我们带来了巨大的心理压力和能量消耗。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="压力的产生机制">压力的产生机制<a class="hash-link" href="#压力的产生机制" title="标题的直接链接">​</a></h3><p>众所周知，脑力劳力和体力劳动是两个完全不同的工作方式，身体运作的方式也不一样。我想，你肯定体会过当干了很多体力活之后，晚上能倒头就睡，第二天会满血复活的情况，这是从远古的基因就决定的，人类生来并不是脑力劳动者，而是社会发展所带来的结果。脑力劳动消耗的是心理能量，当我们专注于思维逻辑编写代码时，我们的身体会作出反应，例如减少呼吸频率与深度，全身肌肉都会紧张起来，就像猎人静待猎物进入目标一样，小心翼翼的感觉，虽然没有运动，但是同样的在消耗能量。长时间不放松，体内的皮质醇就会累积，皮质醇被称为压力荷尔蒙，它会引起身体的一系列生理上的不适。首当其冲的是焦虑。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="焦虑">焦虑<a class="hash-link" href="#焦虑" title="标题的直接链接">​</a></h3><p>如果你曾经有过突然心慌、头晕、呼吸困难，感觉像是有大事要发生了，如果身体检查没有问题，那这个就是急性焦虑发作的感觉。它跟人们古时候面对凶猛的野兽所产生的应激反应是一样的，会促使我们身体产生这个压力荷尔蒙，然后做出要么斗要么逃（Fight or flight）的状态。这个荷尔蒙会升高血压、拉紧肌肉，把整个身体都给调动起来，以应对威胁，所以说这个时候人会发挥超长的能力。但是由于我们程序员一直是久坐状态，没法逃跑也没法战斗，那么压力荷尔蒙就会积攒在身体里，久而久之，焦虑的情况就会出现。急性焦虑在威胁结束之后，会自己慢慢消失，但是如果长期处在压力环境下，就会形成慢性焦虑，感觉每天都忧心忡忡，还会有全身的症状，比如头痛、头晕、心慌、肠胃不适、浑身无力、呼吸困难等等。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="恐慌">恐慌<a class="hash-link" href="#恐慌" title="标题的直接链接">​</a></h3><p>伴随着焦虑症的，还有一个极为恐怖的症状，就是恐慌发作，感觉就像自己要死了一般，心跳的飞快，喘不上气、两眼发黑、非要逃出当前这个环境才会慢慢缓解，第一次发生这种情况的人会以为心脏病发，但去急诊却又查不出毛病来。这种情况经常会发生在地铁、商场等周围声音灯光人群刺激比较大的地方。这是因为人在长期压力下，已经没有多余的能量处理周围的环境刺激了，会产生一个本能的逃跑反应，当你身体越虚弱，压力越大，这种情况就越容易发生。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="抑郁情绪">抑郁情绪<a class="hash-link" href="#抑郁情绪" title="标题的直接链接">​</a></h3><p>长期的压力还会导致情绪的低落。它是抑郁情绪，跟抑郁症还是有一点差距的，只要能够及时恢复。如果你在最近一段时间发现对什么东西都失去了兴趣，包括以前的爱好，工作上也提不起劲，白天犯困一直想躺着，晚上却又睡不着，就要注意是自己是不是已经有了抑郁情绪，尤其是当你发现对生活的激情已经消失了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="睡眠质量降低">睡眠质量降低<a class="hash-link" href="#睡眠质量降低" title="标题的直接链接">​</a></h3><p>因为工作压力，很多人觉得晚上下班后才是真正属于自己的自由时间，可以尽情的去放松，于是沉溺于刷手机或者泡酒吧等放纵式的放松活动中，一不注意就到了凌晨一两点，睡 5、6 个小时又强行爬起来去上班。以前公司大部分 9 点上班，现在基本推到 10 点了，跟这个也有关系，这不是好的现象。人的生物钟是固定的，只有在适合自己的时间睡觉才会得到有效休息，如果往后推两小时才睡觉，即时睡够 8 小时，第 2 天醒来的精神状态也是不一样的。而工作压力又导致睡眠质量的下降，入睡时间长、半夜容易惊醒，就越来越难保证足够的睡眠，长期下去就会形成<a href="https://baike.baidu.com/item/%E7%9D%A1%E7%9C%A0%E8%B4%9F%E5%80%BA/9480027?fr=aladdin" target="_blank" rel="noopener noreferrer">睡眠债（Sleep dept）</a>。</p><p>睡眠不足的危害特别大，首先是记忆力下降。人的记忆是在睡眠中形成的，睡眠不足会影响大脑固化白天所学的东西。第二，影响你的认知能力。有好多人说过，在通宵加班几天之后，就有一种像行尸走肉的感觉，不知道自己在做什么。这样就导致很容易出差错，如果开车会增大出车祸的几率，而工作中也会导致写的 bug 越来越多。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="解决方法-1">解决方法<a class="hash-link" href="#解决方法-1" title="标题的直接链接">​</a></h3><p>对于心理上的压力，处理起来就比较棘手，但还是有一些有效的方法。首先应从根本上消除皮质醇。<a href="https://zhuanlan.zhihu.com/p/99231562" target="_blank" rel="noopener noreferrer">最好的办法就是运动</a>。通过运动排汗能够把压力荷尔蒙排出，同时还能分泌一种让你感觉快乐荷尔蒙——多巴胺。这就是为什么在跑步或者进行力量训练之后，会有一种愉悦的感觉。运动不必是高强度的，一天保证运动30分钟，一周5天中等强度就可以了，而这30分钟可以匀到一整天，比如上午10分钟，下午10分钟，晚上10分钟。</p><p>另一个比较有效的方法是冥想。当你遇到问题和压力时，大脑是飞速运转的，一直在想某个问题，整个人处在一个无底的思考黑洞里，通过冥想，可以把你从思绪中拉回来，关注当下，感受周围的气氛、声音和身体感受。再随着深呼吸，慢慢的感受自己吸吸入清新的空气，呼出紧张的废气，身体就会慢慢的放松下来，产生愉悦感。关于冥想有专门进行冥想指导的APP。</p><p>良好的社交也会带来身心的放松，工作再忙也要匀出时间来跟朋友聊聊天、吹吹水。上班的时候可以抽出时间来去跟同事们交流最新的技术新闻、科技产品，也可以讨论 bug、八卦拉家常。下班的时候也可以参加活动去认识一些其他圈子里面的人，没准还能遇到未来的女朋友～</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="最后">最后<a class="hash-link" href="#最后" title="标题的直接链接">​</a></h2><p>1024是程序员节，真正的需要关心的是自己的健康。身体是自己的，公司是别人的，累垮了便再也没有美好等着你去发现，得不偿失。没有一个人必须在一个公司里面待一辈子，被迫努力工作，赚钱养家等等。大多时候，你的努力公司并不认可，公司关注的是利益，这也是为什么好多人明明技术水平不差，却在公司里混不出一官半职，也拿不到高薪，因为老板的想法和你的想法真的不一样，你以为的并不真的就是你以为的。如果想通过卖命得到自己想要的，那就去创业。当然不排除以人为本的公司，能争取进去也是不错的。所以，在公司里面混，一定要先注意自己的身体健康，然后才是工作。人只活一次，累坏了不觉得可惜吗？从现在开始，在了解了工作压力的危害和应对方式之后，希望你能够作为参考，把爱护自己，让自己健康提上议程。</p>]]></content:encoded>
            <category>健康</category>
        </item>
        <item>
            <title><![CDATA[鸿蒙 OS：使用 JavaScript 开发 Todo App UI 界面]]></title>
            <link>https://kuizuo.cn/harmonyos-js-todo</link>
            <guid>harmonyos-js-todo</guid>
            <pubDate>Mon, 20 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[使用鸿蒙 JS 框架开发 Todo 应用的 TV 版 UI 界面。]]></description>
            <content:encoded><![CDATA[<p>距离鸿蒙 OS 2.0 发布已经过去一些日子了，看到鸿蒙系统强大的设备共享能力，我觉得未来它一定能够成为主流的操作系统。在利用了分布式系统的优势之后，多个设备间可以共享应用程序界面和数据，并且对于开发者，也可以使用一套代码编写应用，就可以在多种设备终端上运行。</p><p>一开始我并没有太关注鸿蒙系统，以为它只能使用 Java 开发应用，跟前端好像没啥关系，但是看了开发文档后，发现 UI 部分既支持纯 JavaScript 开发，也支持纯 Java 开发，还可以 Java 跟 JavaScript 混合开发。鸿蒙应用的开发跟 Android 的开发很像，只是把概念重新定义了一下。它分为 FA（Feature Ability）和 PA（Particle Ability）两种应用模式，FA 是带有用户界面的，PA 则是运行在后台的服务程序，可以想象成安卓里的 Activity 和 Service，不过也略有不同。FA 支持使用 Java 和 JavaScript 两种方式开发 UI 界面。如果使用 Java，则跟 Android 一样，使用 xml 定义布局或者 Java 代码定义布局，每个页面都是一个 PageAbility，使用 Java 编写业务代码，不同的页面之间传递数据依然使用 intent。而这里如果使用 JavaScript UI 框架的话，那么写法跟 Vue 应用基本一模一样，同样支持 data、props、computed、watch 和 functions（methods），也能创建自定义的组件，这样 web 前端工程师就很容易转型成为鸿蒙 UI 开发工程师，不得不说华为在已有概念上做的整合，还是相当厉害的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="项目介绍">项目介绍<a class="hash-link" href="#项目介绍" title="标题的直接链接">​</a></h2><p>在了解了鸿蒙可以使用 JavaScript 开发之后，那么这里我就给大家展示一下前端惯例项目，Todo App 的开发过程。这篇文章将只先介绍 UI 的开发过程，因为这部分所遇到的坑就能产生足够多的篇幅了。这个作品是一个 TV 版的应用，因为鸿蒙暂时不支持移动 App 的开发，它的最终效果如下图所示（模拟器分辨率较低，图的质量不太好）：</p><p><img loading="lazy" alt="最终效果" src="/assets/images/2020-09-20-11-55-58-1b07f0235089191d25f2a53c87151b57.png" width="1490" height="846" class="img_ev3q"></p><p>项目 Github 地址：<a href="https://github.com/MISfang/harmonyos-examples" target="_blank" rel="noopener noreferrer">https://github.com/MISfang/harmonyos-examples</a></p><p>这个项目简单的展示了一个 Todo 列表，整体容器背景为淡紫色，todo 列表中有应用的标题，添加 todo 的输入框和按钮，过滤选项，以及 todo 列表。因为鸿蒙貌似不支持改变 checkbox 的背景颜色，未选中状态是白色，跟 todo 列表容器的背景是一样的，所以看不到，选中之后则可以看到是默认的蓝色。因为这个设计稿原本是给手机界面设计的，而鸿蒙 TV 只支持横向滚动条，所以这个界面看起来会有点奇怪，不过不影响我们学习项目开发方法。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置开发环境">配置开发环境<a class="hash-link" href="#配置开发环境" title="标题的直接链接">​</a></h2><p>分析完界面之后，我们来正式进入开发阶段。首先需要下载鸿蒙的 IDE 开发环境，它叫 DevEco Studio，可以从以下链接下载，下载时需要注册华为账号：</p><p>DevEco Studio：<a href="https://developer.harmonyos.com/cn/develop/deveco-studio" target="_blank" rel="noopener noreferrer">https://developer.harmonyos.com/cn/develop/deveco-studio</a></p><p>由于使用 JavaScript 开发项目，所以本地还需要安装 Node.js 的运行环境，可以从下边链接下载：</p><p>Node.js：<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">https://nodejs.org/en/</a></p><p>有了这些工具，开发环境就配置好了。接下来，我们创建一个基于 JavaScript 的 TV 项目。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建项目">创建项目<a class="hash-link" href="#创建项目" title="标题的直接链接">​</a></h2><p>打开 DevEco，在欢迎界面中选择 Create HarmonyOS Project，然后在 Choose your ability template 界面中，Device 下选择 TV，Template 选择 Empty Feature Ability(JS) 创建一个空的 JS 项目。</p><p><img loading="lazy" alt="创建项目" src="/assets/images/2020-09-20-11-56-49-d359e9ca27812f073d3e337a90ec7aa3.png" width="1492" height="994" class="img_ev3q"></p><p>点击 Next，在 Configure your project 界面输入项目信息。在 Project Name 中输入 TodoApp，Package name 我这里使用了 com.zxuqian.todoapp，在 save location 中选择项目的保存路径，Compatible SDK 保持默认就好，填写完成之后点击 Finish 完成项目的创建。</p><p><img loading="lazy" alt="配置项目信息" src="/assets/images/2020-09-20-11-57-01-e72580c991f212ad4d42cae40d1f80f7.png" width="1492" height="993" class="img_ev3q"></p><p>我们先来大体看一下项目的目录结构，这里列出来了关键的目录说明：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">TodoApp</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  entry ----------------------- 项目入口，除 entry 外，还可以创建多个 Feature Ability，但只有 entry 是独立的</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">     src ---------------------- 源代码</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">       main</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">         java ----------------- Java 源代码</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">         js   ----------------- JS 源代码</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">           default</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             common ----------- 公共组件</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             i18n   ----------- 国际化</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             pages  ----------- 页面</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">               index ---------- 首页文件夹</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 index.css ---- 首页 css 样式</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 index.hml ---- 首页 hml 结构</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 index.js ----- 首页 js 数据绑定代码</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             app.js ----------- JS 项目入口</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">         resources ------------ 静态资源文件，图片、视频等</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">         config.json ---------- 鸿蒙项目配置</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">       </span><span class="token builtin class-name" style="color:#e6db74">test</span><span class="token plain"> ------------------- 测试代码</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  gradle** -------------------- Java 依赖管理工具配置</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="运行项目">运行项目<a class="hash-link" href="#运行项目" title="标题的直接链接">​</a></h2><p>然后可以运行项目看一下效果。因为项目需要运行在模拟器中，所以得在 DevEco Studio 中创建一个 TV 模拟器，这里需要注意的是，鸿蒙的模拟器是远程桌面的方式进行访问，所以需要先认证华为开发者账号。要创建模拟器，在 Tools 菜单中选择 HVD Manager：</p><p><img loading="lazy" alt="选择模拟器" src="/assets/images/2020-09-20-11-57-24-55dd1a975b2307dc6a414384caca4f12.png" width="448" height="222" class="img_ev3q"></p><p>然后会打开浏览器，显示华为开发者登录页面，用华为账号登录进去之后，选择个人或公司认证，填写银行卡后认证成功。认证完成之后要<strong>关闭浏览器，</strong>因为浏览器在打开状态下，无法在 DevEco 中登录，这应该是个 Bug。再次选择 Tools -&gt; HVD Manager，在弹出的浏览器页面中登录并授权后，就可以看到模拟器了：</p><p><img loading="lazy" alt="选择模拟器" src="/assets/images/2020-09-20-11-57-57-c0c0eba64aca24791ab86888dfe5b541.png" width="1492" height="891" class="img_ev3q"></p><p>选择 TV，然后点击 Actions 下的三角形就可以启动成功了。默认浏览器是内嵌在 DevEco Studio 中的，可以点击右上角的齿轮图标，在弹出菜单中选择 View Mode -&gt; Window 来让它以窗口形式显示。</p><p><img loading="lazy" alt="设置模拟器显示形式" src="/assets/images/2020-09-20-11-58-10-f24bbb4aefcd3b5e782ffcb9ce0d7768.png" width="642" height="418" class="img_ev3q"></p><p>另外，因为是远程的模拟器，所以画质不好，并且每次只能使用 1 小时，超时后需要重新启动：</p><p><img loading="lazy" alt="成功运行模拟器" src="/assets/images/2020-09-20-11-58-26-f810a6d5bc41c7e722ee515ce8572644.png" width="1492" height="1104" class="img_ev3q"></p><p>模拟器启动成功后，就可以启动项目了。点击工具栏中的三角形按钮，确保下拉选择框选择了 entry：</p><p><img loading="lazy" alt="启动项目" src="/assets/images/2020-09-20-11-58-41-de9d8675145104dcb5599219ddd35aee.png" width="360" height="78" class="img_ev3q"></p><p>稍后就能在模拟器看到示例的 “你好，世界” 字样了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="编写-hml-部分">编写 HML 部分<a class="hash-link" href="#编写-hml-部分" title="标题的直接链接">​</a></h2><p>现在开始 Todo App 的开发，先编写页面结构。这里注意不是 HTML，而是 HML，并且文件名也是 hml 结尾。因为鸿蒙的运行环境并不是浏览器，所以不支持原生的 html 标签，虽然有些标签名字一样，但那些只是鸿蒙为了便利开发者而定的，底层实现完全不一样，它们会转换成原生的鸿蒙控件，当然它也有特殊的 hml 标签，方便进行布局。语法上，除了一些 html 属性不支持外，其他都一样。这一点，跟 React Native 的原理是一样的。鸿蒙支持的标签可以查看 API 文档：</p><p><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-references/js-components-container-div-0000000000611484" target="_blank" rel="noopener noreferrer">HML 组件 API 文档</a></p><p>另外鸿蒙开发过程中，不支持保存页面实时刷新，需要手动重启项目，这个确实有点棘手，就希望以后会完善吧。另外编写代码后不用保存，这个倒是有点不习惯。</p><p>要编写 Todo App 结构，打开 js/default/pages/index/index.hml 文件，删掉里边的示例代码，首先最外层容器，即背景容器，使用 div 表示，class 名字为 main：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">main</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来是 Todo App 应用的容器，使用 class 名字为 container 的 div 表示：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">main</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">container</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 container 里边，使用 text 标签显示标题，hml 中所有的文字都使用 text 标签表示：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">h1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">欢迎使用 Feng 待办事项！</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来是添加 todo 项目的输入框和按钮，这部分跟 html 一样：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">input-add</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">text</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">+</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再下面是过滤选项，除了文字使用 text 表示之外，也跟 html 一样：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">filters</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">filter</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"> 全部 </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">filter</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"> 已完成 </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">filter</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"> 未完成 </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>最后是 todo 列表，这里写死了两个待办事项，后面我们会把它的数据重构到 js 文件中。这里选择使用了 div 来显示 todo 列表，也可以使用 list 和 list-item，不过我个人觉得 list 适合整个页面是个列表页的情况，或者列表数据特别多的情况，你也可以自己尝试一下，不过记得使用 background-color 和 box-shadow 去掉 list 的背景和阴影。Todo 列表的 hml 结构代码如下：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">todo-list</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">todo-item</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">checkbox</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">待办1</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">todo-item</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">checkbox</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">待办2</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>hml 结构到这里就写完了，接下来编写 CSS 样式。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="编写-css-部分">编写 CSS 部分<a class="hash-link" href="#编写-css-部分" title="标题的直接链接">​</a></h2><p>鸿蒙中的 CSS 与普通的 CSS 还是有一些区别的，有些属性用法不同，并且不同的标签对于 CSS 属性的支持程度也不一样，可以参考 HML 部分中提到的 API 文档。在鸿蒙 TV 项目中，容器默认是 flex 布局，并且 flex-direction 为 row，行方向，这个需要注意一下。</p><p>打开 index.css，我们先给 text 标签设置默认的文本颜色，因为我们的应用是浅色，而鸿蒙的主题为深色，所以文本为白色，这样就看不到了，而且我也没找到如何修改默认主题，这个你可以研究一下～。text 标签的 css 代码如下：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic">text</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#414873</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来设置最外层容器的样式，这里的 css 与普通的没什么区别：</p><ul><li>把 Todo App 容器居中</li><li>背景色设置为淡紫色</li></ul><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.main</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">justify-content</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token color function" style="color:#e6db74">rgb</span><span class="token color punctuation" style="color:#f8f8f2">(</span><span class="token color number" style="color:#ae81ff">203</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">210</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">240</span><span class="token color punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再设置 Todo App 容器的样式</p><ul><li>设置宽度、内间距、阴影、圆角边框。这里要注意，圆角边框的值不能是百分比。</li><li>设置背景色只能使用 background-color，不能使用 background 简写形式，background 只能用来设置 linear-gradient 渐变色，如果设置背景图，则需要使用 background-image。</li><li>最后把 flex 的方向改成列方向，竖向排列。</li></ul><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.container</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">60</span><span class="token unit">%</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">padding</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">48</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">28</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">box-shadow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token plain"> </span><span class="token color function" style="color:#e6db74">rgba</span><span class="token color punctuation" style="color:#f8f8f2">(</span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0.15</span><span class="token color punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">border-radius</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token color function" style="color:#e6db74">rgb</span><span class="token color punctuation" style="color:#f8f8f2">(</span><span class="token color number" style="color:#ae81ff">245</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">246</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">252</span><span class="token color punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-direction</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> column</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>容器的第一行，是标题，我们设置一下它的外边距、文字大小，我们这里把 flex-shrink 设置为 0，因为 TV 版不支持竖向滚动条，放的内容多了之后就会互相挤占空间（解决方法是在设计界面的时候该改成横向式布局，甩锅设计师～），这里就用禁止缩放来做为临时解决方法，这个不是重点：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.h1</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">margin</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-size</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">28</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-shrink</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>标题下方是添加 todo 项目的输入框和按钮，首先给它们的容器设置相对定位，垂直居中对齐子元素：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.input-add</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">position</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">align-items</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-shrink</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对于输入框，设置一下它的大小，内间距，文字大小等，这里把它 z-index 设置为 5，因为后边的添加按钮要覆盖在它的上边：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.input-add</span><span class="token selector" style="color:#a6e22e;font-style:italic"> input</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">padding</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">52</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">18</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">border-radius</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">48</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">box-shadow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token plain"> </span><span class="token color function" style="color:#e6db74">rgba</span><span class="token color punctuation" style="color:#f8f8f2">(</span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0.08</span><span class="token color punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token unit">%</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-size</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">align-items</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">justify-content</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#626262</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">z-index</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>按钮的样式：</p><ul><li>设置为圆形</li><li>使用 background 设置渐变的背景色</li><li>设置+号文本为白色，文字大小为 18px</li><li>向左移动 36px，紧贴输入框的右边框</li><li>设置 z-index 为 10，来覆盖在输入框上边。</li></ul><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.input-add</span><span class="token selector" style="color:#a6e22e;font-style:italic"> button</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">36</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">36</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">border-radius</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">18</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">linear-gradient</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token hexcode color">#c0a5f3</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token hexcode color">#7f95f7</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token color">white</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-size</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">18</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">left</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">-36</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">z-index</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>剩下的过滤选项和 todo 列表的 CSS 就没什么特殊的了，可以参考文章开头提供的、完整的源代码实现。另外要注意的是，这里的 CSS 不支持 before 和 after 伪元素，因为毕竟不是原生的 html，无法创建虚拟的 dom。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="编写-js-部分">编写 JS 部分<a class="hash-link" href="#编写-js-部分" title="标题的直接链接">​</a></h2><p>我们的过滤选项和 Todo 列表中的数据可以从 JS 中获取，在 JS 中定义好数据，然后在 hml 中访问，这里的语法和方式跟 Vue 一样。</p><p>打开 index.js 文件，删除 data 中的示例数据和示例的生命周期函数，然后添加过滤选项需要的数据 filters，和 todo 列表中的数据 todos：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token literal-property property" style="color:#f92672">data</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#f92672">filters</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token string" style="color:#a6e22e">"全部"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"已完成"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"未完成"</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#f92672">todos</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">content</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"待办1"</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">content</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"待办2"</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接着打开 index.hml 文件，把 filters 中的 text 删掉 2 个，剩下的一个改成：</p><ul><li>使用 for 指令遍历 data 中的 filters 数据，并且给每个元素命名为 filter</li><li>设置 tid， 相当于 Vue 中的 key，用于列表数据渲染性能优化，这里直接使用\$idx，数组的索引，{{}}用来获取变量的值</li><li>然后内容则是 filter 变量中的值，使用 {{filter}} 获取。</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">filter</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">for</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">{{filter in filters}}</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">tid</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">{{$idx}}</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  {{filter}}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来，删掉一个 todo-item 的示例，同样的改成循环渲染：</p><ul><li>这里的 tid 直接使用 todo 中的 id，可以直接使用 todo 中的 id 属性名字</li><li>然后在 text 中使用 todo 中的 content 属性值</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">todo-item</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">for</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">{{todo in todos}}</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">tid</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">id</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">checkbox</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">{{todo.content}}</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">text</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>好了，现在代码就编写完成了，可以运行一下看一下最终效果，和开头的图片如果是一样的话，那么就成功了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>这篇文章给如何编写鸿蒙 JS 项目提供了入门的指导，里边要涉及的内容还有很多，比如编写自定义的组件，使用@system/fetch 等系统组件加载远程数据等，这些一篇博文讲下来内容会比较多，所以后期会再继续更新进阶一点的教程。在编写完这个示例项目之后，发现鸿蒙的发展前景还是很大的，融合了当下最流行的应用开发方式，这样对于它的生态发展很有帮助，开发者的学习成本低，工作量也低，一套代码就可以在 TV、手表、PC、手机上运行，有着相当好的开发体验。希望随着系统和完善，有朝一日终成为主流的操作系统。</p><p>最后总结下，通过本文你应该掌握了：</p><ul><li>配置开发环境并添加模拟器。</li><li>鸿蒙中的 hml 、css ，js 的语法、用法和一些要注意的坑。</li><li>成功运行 Todo TV 项目。</li></ul><p>如果觉得教程有帮助，请点赞并关注，我是方宇龙，感谢！</p><p>扫码关注公众号：</p><p><img loading="lazy" alt="微信公众号二维码" src="/assets/images/2020-09-20-11-59-06-45be998b76de5aaac7e30415df98b1d2.png" width="258" height="258" class="img_ev3q"></p>]]></content:encoded>
            <category>前端</category>
            <category>鸿蒙</category>
            <category>JavaScript</category>
        </item>
        <item>
            <title><![CDATA[职业规划：程序员的 T 字形发展攻略]]></title>
            <link>https://kuizuo.cn/programmer-t-type-career</link>
            <guid>programmer-t-type-career</guid>
            <pubDate>Tue, 14 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[你是不是在面对市面上众多的技术的时候，不知道选择哪个才能对自己的职业和未来发展有所帮助？有这样的想法是正常的，因为随着科学的发展，现在的编程技术已经到了百花齐放的地步了。那么这么多的技术和领域，我们到底应该选哪一个才比较好呢？]]></description>
            <content:encoded><![CDATA[<p>你是不是在面对市面上众多的技术的时候，不知道选择哪个才能对自己的职业和未来发展有所帮助？有这样的想法是正常的，因为随着科学的发展，现在的编程技术已经到了百花齐放的地步了。</p><ul><li>从编程语言上，你可以选择 Java、JavaScript、Go、PHP，还有基于它们的框架等等。</li><li>从客户端上，可以选择移动端，web 端，还有后端等等。</li><li>从行业领域上，还可以选择数据科学、金融工程或商业智能分析等等。</li></ul><p>那么这么多的技术和领域，我们到底应该选哪一个才比较好呢？</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="分析">分析<a class="hash-link" href="#分析" title="标题的直接链接">​</a></h2><p>首先我们先来分析一下这个问题产生的原因。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="没有职业方向">没有职业方向<a class="hash-link" href="#没有职业方向" title="标题的直接链接">​</a></h3><p>这种情况一般是比较容易出现在大学生身上，因为大学生同学们，对于自己未来的职业和发展方向没有确切的概念，且学校里教的都是基础，并没有针对某个行业做具体的学习和分析。这样就导致：</p><p><strong>虽然可以选择的方向很多，似乎哪一行都能干，但是每一行都能干，也就等于哪一行都不能干。</strong></p><p>由于不了解各行各业所要求的技术栈，行业特色、优点和缺点，那么对于技术和领域的选择就无从下手。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="想一劳永逸">想一劳永逸<a class="hash-link" href="#想一劳永逸" title="标题的直接链接">​</a></h3><p>新技术越来越多，每个人对它们都有焦虑感，想着到底要不要学习这些新技术，学，怕浪费时间，不学，怕自己落后，最后就会拼命的想找一套常青的技术栈，祈祷学完之后就再也不用学别的技术了。这样寻找的过程，既没有用处，也浪费了很多的时间。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="缺乏自信">缺乏自信<a class="hash-link" href="#缺乏自信" title="标题的直接链接">​</a></h3><p>这个是说，你可能知道要学点什么东西，知道哪些对未来好，但是你不确定它是不是真的好，也不知道学完之后对自己是否有所帮助，这样缺乏自信就会变得犹豫不决，最终不能做出决定。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决方案">解决方案<a class="hash-link" href="#解决方案" title="标题的直接链接">​</a></h2><p>针对上边的问题，有一个解决方案，<strong>那就是做一个有专长的通才</strong>。通才是说对于多个领域，都有一些认识的人。而有专长的人，则是在某一领域有专门的研究，对这个领域有所精通。这种个人发展路径可以形象的描绘成一个 <strong>T 字形：</strong> 横着的线，就是浅识的领域，竖线，代表最精通的那个领域。我把按照这种方向发展的方法称作 <strong>T 字形发展攻略</strong>。</p><p>对于咱们程序员，软件开发工程师来说，就是对各项技术都有所了解，但是有一项特别精通的技术。为了达到这样的目标，可以这样做：</p><ul><li>按照技术的感兴趣程度，还有重要程度、流行程度排好序。</li><li>选择对职业最重要或者你最感兴趣的一项技术，进行深入研究。</li><li>剩下的技术，则按排好的优先级，学个大概，知道这个技术是做什么的，能写出入门项目的代码来就好。</li></ul><p>例如你学的是 Java，你可以尝试去一下前端开发，或者了解一下数据科学领域。另外还可以了解跨学科的知识，比如管理学、市场营销、设计等等，拓宽自己的知识面。但是要记住，应该把最多的时间和精力花在精通 Java 上面。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="优势">优势<a class="hash-link" href="#优势" title="标题的直接链接">​</a></h2><p>那么成为有专长的通才有什么优势呢？其实有很多，这里列出几个比较重要的。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更好的应对职业风险">更好的应对职业风险<a class="hash-link" href="#更好的应对职业风险" title="标题的直接链接">​</a></h3><p>当你在工作中被调岗，或者是你想转行做其他的行业的时候，如果需要不同的技术栈，而你刚好对有所了解，已经入过门了，那么就能更快的转向那个技术栈，再在工作中慢慢精通。相反，如果你没有了解过，那么你一开始就会有对陌生技术和领域的恐惧感，你的心理压力就会比<em>已经知道这项技术的人</em>的要大，从而变相的影响你的工作效率和自信。所以说，最好在有限的时间里，去接触更多的知识。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="产生大局意识">产生大局意识<a class="hash-link" href="#产生大局意识" title="标题的直接链接">​</a></h3><p>当你掌握了多种领域的知识之后，你就能从宏观上，去思考不同领域或技术之间的关系，并对它们有一个整体的概念。比如你学了多个编程语言，那么你就能更快的学会其他编程语言，因为你会发现它们之间有好多概念都是相通的，而对于项目开发中的技术选型，你也能做出更好的选择，因为你了解每个编程语言不同的特色，优点和缺点。又比如你学习了项目管理，那么无论在人员管理上，还是工程管理上，都会有新的认识。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="增加财富">增加财富<a class="hash-link" href="#增加财富" title="标题的直接链接">​</a></h3><p>如果你有其他副业，或想做副业赚钱，比如外包、咨询、up 主之类的，那么就更需要你掌握多种领域和技术，因为做副业完全由自己努力，就要求要懂的东西多且杂，而且还必须要精通某一技术或领域。举个例子，如果你做编程 UP 主，那么你的专长应该是写代码，但是你又需要教授别人知识，那么就要比大家掌握更多的知识，才能产生信任感。另外，你还需要会剪辑视频、会营销才能做出吸引人的、高播放量的视频，这些都是跨学科的领域，了解了它们才有助于打造 UP 主的个人品牌。再比如说外包，如果你掌握了更多的技术或者行业知识，就会比其他人更有竞争力，能接到更多的项目，并且能在更短的时间完成。另外，在外包项目中，沟通能力是最重要的一环，需要认真学习讨论需求的话术，才能减轻损失，这个只专精技术是行不通的，掌握与人打交道的能力，才能胜出。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>好了，我们分析了程序员发展的困境：为什么面对这么多的技术，不知道怎么选择？原因是：第一，职业方向不确定。第二，想学完一门技术后就一劳永逸。第三，缺乏自信心。解决的方法，就是使用 T 字形发展攻略，在有限的时间里掌握最多的知识，然后精通其中一项。这样做的好处包括但不限于：</p><ul><li>换岗或者是转行的时候有所准备，更好的应对风险。</li><li>宏观了解领域和技术的概念，并能在恰当的时机做出更好的选择。</li><li>在做副业的时候，能够获取更多的财富。</li></ul><p>这些就是我的一些个人建议，如果觉得有帮助，请点个赞，有什么问题可以给我留言～感谢。</p>]]></content:encoded>
            <category>前端</category>
            <category>职业</category>
            <category>经验</category>
        </item>
        <item>
            <title><![CDATA[第二个博客搭建之Docusaurus]]></title>
            <link>https://kuizuo.cn/second-blog-is-docusaurus</link>
            <guid>second-blog-is-docusaurus</guid>
            <pubDate>Fri, 20 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[博客地址: 愧怍 (kuizuo.cn)]]></description>
            <content:encoded><![CDATA[<p>博客地址: <a href="https://kuizuo.cn/" target="_blank" rel="noopener noreferrer">愧怍 (kuizuo.cn)</a></p><p>源码地址：<a href="https://github.com/kuizuo/blog" target="_blank" rel="noopener noreferrer">kuizuo/blog: 愧怍的个人博客 (github.com)</a></p><p>时隔近半年没好好整理文章，博客也写的不像个人样。😂</p><p>大半年没更新博客，一直忙着写项目（写到手软的那种），然后无意间在 B 站看到一个 Up 主<a href="https://zxuqian.cn/" target="_blank" rel="noopener noreferrer">峰华前端工程师- 让你学会前端开发 (zxuqian.cn)</a>推荐的一个基于 React 驱动的静态网站生成器，其实也可以理解为就是 React 版的 Vuepress（主要都是文档类为主）。第一眼看到的时候惊艳到我了，代码也开源了，不妨搭建了一个，立马 git clone 了源码并翻看了下文档，就开始乏而无味的码字。</p><p>不过国内 docusaurus 的使用者是真的少。Vuepress 都快烂大街了...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="搭建过程">搭建过程<a class="hash-link" href="#搭建过程" title="标题的直接链接">​</a></h2><p>首先还是要再鸣谢一下，基于这位大佬所开源的代码上进行二开（其实也就是换了个背景，删了一下谷歌的广告和 B 站视频的评论，还有一些不必要的百度推送和统计插件），然后就花了点是时间整理下这些年（其实就两年）所涉及的技术栈。</p><p>之所以会搭建该博客，主要是 kuizuo.cn 的域名也正好备案完了，但之前的那个博客实在些不下去了（毕竟半年没更新了），然后自己的技术栈也准备转型了，之前前端的技术栈，都是处于 Vue2.0 + JavaScript，vue2 差不多已经玩烂了（尤其是 element ui），书也看的差不多了，加之 Vue3 出了大半年了（前端技术更新迭代是真滴快），正好 B 站尚硅谷的视频出了<a href="https://www.bilibili.com/video/BV1Zy4y1K7SH" target="_blank" rel="noopener noreferrer">【尚硅谷】2021 最新 Vue 迅速上手教程丨 vue3.0 入门到精通<!-- -->_<!-- -->哔哩哔哩<!-- -->_<!-- -->bilibili</a>（强烈推荐！！！），于是就趁暑假时间恶补了一手 Vue3，顺便找了一个开源项目<a href="https://vvbin.cn/doc-next/" target="_blank" rel="noopener noreferrer">Vben Admin (vvbin.cn)</a>，所采用的都是最新的技术栈 Vue3、Vite、TypeScript（以后写新项目就靠它了），然后该博客又是基于 React ，所以索性把 React 给学了一下，便开始搭建该博客。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a class="hash-link" href="#背景" title="标题的直接链接">​</a></h3><p>说一下部分更改的地方，首先就是主页的背景图了，这个是从网站<a href="https://undraw.co/" target="_blank" rel="noopener noreferrer">unDraw - Open source illustrations for any idea</a>上找的一张 SVG 的图片，如下图</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20210815230103523.png" alt="image-20210815230103523" class="img_ev3q"></p><p>怎么说呢，总感觉有些别扭（可能屏幕都是蓝色的搞得好像是 window 蓝屏似的），就暂时先用首页的这张图充当一下。到时候在重新设计一下吧。</p><p>补: 已更改为目前首页的背景</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="去谷歌广告">去谷歌广告<a class="hash-link" href="#去谷歌广告" title="标题的直接链接">​</a></h3><p>源代码中是有添加谷歌广告的，虽然说如果有一定的访问量，每个月也能有一笔额外收入，不过为了简洁和一些繁琐的广告，就在对应的代码处进行注释。（说不准以后会用的上呢）</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="typescript-支持">TypeScript 支持<a class="hash-link" href="#typescript-支持" title="标题的直接链接">​</a></h3><p><a href="https://docusaurus.io/zh-CN/docs/typescript-support" target="_blank" rel="noopener noreferrer">TypeScript 支持 | Docusaurus</a></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm install --save-dev typescript @docusaurus/module-type-aliases @tsconfig/docusaurus</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>随后将以下内容添加到您的项目根目录的 <code>tsconfig.json</code>：</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">tsconfig.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"extends"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"@tsconfig/docusaurus/tsconfig.json"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但也只是改善编辑体验，不过就已经足够了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置-algolia">配置 algolia<a class="hash-link" href="#配置-algolia" title="标题的直接链接">​</a></h3><p><a href="https://docusaurus.io/zh-CN/docs/search" target="_blank" rel="noopener noreferrer">搜索 | Docusaurus</a></p><p>有两种方式来配置algolia，一种是Docsearch 每周一次爬取你的网站，但前提是项目是<strong>开源的</strong>，其好处是申请后会直接给你<code>appId</code>、<code>apiKey</code>、<code>indexName</code>，直接填写至docusaurus.config.js即可。第二种则是自己运行DocSearch 爬虫，可以随时爬取，但需要自行去注册账号与搭建爬虫环境（docker）。</p><p>关于申请Algolia DocSearch在文档中有详细介绍，主要是要等，同时注意邮箱信息。如果申请成功后就可以在<a href="https://crawler.algolia.com/admin/crawlers" target="_blank" rel="noopener noreferrer">Crawler Admin Console</a> 中查看</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220627232545640.png" alt="image-20220627232545640" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="手动爬取">手动爬取<a class="hash-link" href="#手动爬取" title="标题的直接链接">​</a></h4><p><a href="https://docsearch.algolia.com/docs/run-your-own" target="_blank" rel="noopener noreferrer">Run your own | DocSearch (algolia.com)</a></p><p>这里我叙述下第二种方式的配置的过程，首先去申请 <a href="https://www.algolia.com/" target="_blank" rel="noopener noreferrer">Algolia</a> 账号，然后在左侧 indices 创建索引，在 API Keys 中获取 Application ID 和 API Key（注意，有两个 API KEY）</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20210821230135749.png" alt="image-20210821230135749" class="img_ev3q"></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20210821230232837.png" alt="image-20210821230232837" class="img_ev3q"></p><p>填入到<code>docusaurus.config.js</code>中的 API KEY 是 <strong>Search-Only API Key</strong></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token literal-property property" style="color:#f92672">themeConfig</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#f92672">algolia</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">apiKey</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"xxxxxxxxxxx"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">appId</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"xxxxxxxxxxx"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">indexName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"kuizuo"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>系统我选用的是 Linux，在 Docker 的环境下运行爬虫代码。不过要先 <a href="https://github.com/stedolan/jq/wiki/Installation#zero-install" target="_blank" rel="noopener noreferrer">安装 jq </a> 我这里选择的是 0install 进行安装（安装可能稍慢），具体可以查看文档，然后在控制台查看安装结果</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">[root@kzserver kuizuo.cn]# jq --version</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">jq-1.6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接着在任意目录中创建<code>.env</code>文件，填入对应的 APPID 和 API KEY（这里是<code>Admin API Key</code>，当时我还一直以为是 Search API Key 坑了我半天😭）</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token constant" style="color:#e6db74">APPLICATION_ID</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">YOUR_APP_ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token constant" style="color:#e6db74">API_KEY</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">YOUR_API_KEY</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后创建<code>docsearch.json</code>文件，然后填入对应的配置代码，这里贴下配置<a href="https://github.com/algolia/docsearch-configs/blob/master/configs/docsearch.json" target="_blank" rel="noopener noreferrer">docsearch-configs/docsearch.json</a></p><p>更改索引名与网站名</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">docsearch.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"index_name"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"kuizuo"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"start_urls"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#a6e22e">"https://kuizuo.cn/"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">"sitemap_urls"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#a6e22e">"https://kuizuo.cn/sitemap.xml"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>运行 docker 命令</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">docker run -it --env-file=.env -e "CONFIG=$(cat docsearch.json | jq -r tostring)" algolia/docsearch-scraper</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接着等待容器运行，爬取你的网站即可。最终打开 algolia 控制台提示如下页面则表示成功</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20210821225934002.png" alt="image-20210821225934002" class="img_ev3q"></p><p>不过还是建议使用去申请Docsearch，其每周自动爬取站点，而不是手动爬取。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署">部署<a class="hash-link" href="#部署" title="标题的直接链接">​</a></h2><p>由于我是有个人的域名和服务器，所以之前部署项目都是直接将编译后的文件直接上传至服务器上，然后通过 nginx 就可以直接通过域名访问了，优点的话就是方便，但缺点很明显，每次更新一篇博客的话，就需要重新编译，然后重新拉去文件，并不能做到自动化编译部署。于是就想着采用第三方服务进行部署。</p><p>这里推荐使用Vercel，我写过一篇 <a href="/develop/Vercel部署个人博客">Vercel部署个人博客</a> 的文章，部署十分简单。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="额外功能页面">额外功能页面<a class="hash-link" href="#额外功能页面" title="标题的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="资源导航">资源导航<a class="hash-link" href="#资源导航" title="标题的直接链接">​</a></h4><p>老早之前就想整理一下自己的网页书签，奈何一直都没怎么有空去处理（其实就是懒），有时候明明看到一个特别好的资源，然而几天后想在重新再找的时候就犹如海底捞针似的。书签收藏夹也是乱的不像样（咋和我电脑桌面和显示桌面一样乱呢，不过好在我有<a href="https://www.voidtools.com/zh-cn/" target="_blank" rel="noopener noreferrer">EveryThing</a>）</p><p>相关链接：<a href="https://kuizuo.cn/resources" target="_blank" rel="noopener noreferrer">资源导航</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="评论">评论<a class="hash-link" href="#评论" title="标题的直接链接">​</a></h4><p>相关文章: <a href="https://kuizuo.cn/develop/Docusaurus%E9%85%8D%E7%BD%AEGitalk%E8%AF%84%E8%AE%BA%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener noreferrer">Docusaurus 配置 Gitalk 评论插件</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实战项目">实战项目<a class="hash-link" href="#实战项目" title="标题的直接链接">​</a></h4><p>相关链接：<a href="https://kuizuo.cn/project" target="_blank" rel="noopener noreferrer">实战项目</a></p><p>确实写过挺多项目，但大多数不方便展示，要么是小工具类 demo，要么是客户定制的，这些总不好直接展示，所以一般展示的都是些非盈利性，功能性的，当然肯定是会附带源码的那种。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="最后">最后<a class="hash-link" href="#最后" title="标题的直接链接">​</a></h2><p>我个人是比较满意该博客的，搜索，SEO，暗黑模式，博客列表，没有其他博客系统那么花里胡哨的，该有的整洁都有了，最主要是我个人不喜欢文章配背景图，尤其是那种与文章毫不相干的图，图片也许能减少阅读疲倦感，但欣赏的是内容的，而不是背景。</p><p>而且又是基于 Docusaurus，到时候是用来做一个项目的文档也方便许多。</p><p>还是要感谢下该大佬所开源的代码，同时 B 站视频教程也非常好，让我学到了一些前沿的前端技术。😄</p><p>也就不多浪费口舌了，博客既然搭建好了，那么接下来就可以专心的编写文章了。</p>]]></content:encoded>
            <category>blog</category>
            <category>docusaurus</category>
            <category>project</category>
        </item>
        <item>
            <title><![CDATA[前端工程师到底要学到什么程序才能去找工作？成功面试的必备要素与回答技巧]]></title>
            <link>https://kuizuo.cn/frontend-looking-for-jobs</link>
            <guid>frontend-looking-for-jobs</guid>
            <pubDate>Mon, 16 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[好多人都想知道，前端工程师到底要需要掌握什么技能、到什么程度，才能去找工作？最简单的答案：]]></description>
            <content:encoded><![CDATA[<p>好多人都想知道，前端工程师到底要需要掌握什么技能、到什么程度，才能去找工作？最简单的答案：</p><blockquote><p>把 html、css、 js 基础学扎实，再掌握 vue 或 react 前端框架之一就可以了。</p></blockquote><p>真的是这样吗？技术上看似乎没问题，但是找工作不只要从技术上下手，还要从个人目标和公司的招人标准综合进行考量。那么接下来，我们从这几个方面来分析一下，前端工程师找工作的必要条件，然后给大家分享一套有逻辑、有结构的面试回答技巧。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="个人目标">个人目标<a class="hash-link" href="#个人目标" title="标题的直接链接">​</a></h2><p>现在我们的教育并没有太着重于个人目标和职业规划的设定，但找工作与其关系特别大。如果你想找一个大厂，那么准备方向就跟创业公司完全不一样。我们分别来看一下这两种情况。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="大厂">大厂<a class="hash-link" href="#大厂" title="标题的直接链接">​</a></h3><p>大厂可能更看重你的 <code>html</code>、<code>css</code> 和 <code>JavaScript</code> 基础，以及<code>数据结构</code>、<code>算法</code>和<code>计算机网络</code>。你的准备方向就应该是这些基础方面的东西。另外还有一些原理方面的知道，比如你要做 <code>vue</code> 或者 <code>react</code> 开发，那就要知道 <code>virtual dom</code> 和 <code>diff 算法</code>的原理。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创业公司">创业公司<a class="hash-link" href="#创业公司" title="标题的直接链接">​</a></h3><p>如果你的目标是创业公司（这种公司的发展前景不可预测，可能大展宏图，也可能半途而废），你需要有大量的实战经验，因为创业公司为了抢占市场，产品的开发进度一般都会特别紧张，你需要去了就能够立刻干活；而理论方面的东西则会关注的少一些。针对面试，你需要去准备相关技术（比如 React 或 Vue) 的实战项目经验。</p><p>所以要想知道学到什么程度才能去找工作，首先得明确一下你的目标，<strong>是想去大厂，还是去创业公司，然后分别进行准备和突破</strong>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="公司要求">公司要求<a class="hash-link" href="#公司要求" title="标题的直接链接">​</a></h2><p>接下来再看一下公司的招聘要求，好多公司都写的特别专业、全面，除了基本语法、框架外，还要求有兼容性调整、性能优化、可视化经验，或者是掌握一些小众框架。这些招聘信息其实描述的是最佳人选，几乎在 100 个里面才能挑出 1 个来，<strong>而这种大牛级别的人自己也向往更好的工作机会，所以可能根本不会跟你有竞争关系</strong>。公司这么写招聘要求目的只有一个，就是找一个技能越全的人越好。</p><p>事实上，你只需满足要求的百分之<strong>80%</strong>，<strong>70%</strong>，甚至 <strong>50%</strong> 都有可能获得这份工作机会，因为面试不光看技术，还要看眼缘、人缘：如果面试官觉得你们投缘的话，你即使有不会的问题，他也会主动引导你帮你回答上来；要是不投缘（<em>有些比较 250 的面试官</em>），那就算你会的再多，他也会觉得你很菜（<em>你不懂他懂的</em>）。所以说那些招聘要求就只作为参考就好了，可以作为你以后的学习路线。不过这些技能还是掌握的越多越好，技多不压身，你可以一边面试一边准备，这样也不会互相影响。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="技术能力">技术能力<a class="hash-link" href="#技术能力" title="标题的直接链接">​</a></h2><p>分析完外界的因素之后，来看一下咱们需要具体掌握哪些技术。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基础">基础<a class="hash-link" href="#基础" title="标题的直接链接">​</a></h3><p>作为一名前端工程师，<code>html、css、JavaScript</code> 基础是一定要掌握牢固的，所有的语法点都必须要掌握，然后还要熟识面试必考的题，比如 <code>ES6 及后面的新特性</code>、<code>原型链</code>、<code>Event Loop</code> 等等。这些不是从学校学来的，而是为了面试专门突击准备的，需要反复的去看，去研究，最后把它们理解并记住。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="框架">框架<a class="hash-link" href="#框架" title="标题的直接链接">​</a></h3><p>掌握这些基础之后，就需要看一下前端比较火爆的框架，<code>react</code> 和 <code>vue</code>。大厂用 React 的比较多，中小型公司用 vue 的比较多，当然这也不是绝对的。据我目前的经验来看，React 的薪水还是比较高的，不过看你自己喜好，喜欢做什么就做什么，从这两个框架中选一个深入去学，后面有时间再去研究另外一个。具体学习和准备方法可以</p><ul><li>先学基础用法，再学高级用法，最后掌握框架原理，比如：<code>React / Vue</code>，<code>Redux / Vuex</code> ，因为面试官通常喜欢问这方面的问题。针对这些一定要去看看别人的总结，然后自己研究一下，会更容易理解并记住。了解原理后，有时间再去研究一下源码，对于面试会更有帮助。</li><li>理论准备完之后，实战肯定也少不了，无论是校招还是社招，无论是面大厂还是面小厂，都需要应聘者有实战经验。因为光会纸上谈兵，编码能力不够也不会有公司愿意去培养。实战就建议大家自己去<strong>网上找一些项目的灵感，然后动手去做一下</strong>。刚开始可能会觉得自己技术不够，也没有一个全局的概念，这些都是正常的过程，可以跟一些课程或者书籍，或者是网上的一些资源，学习一下，免费或收费的都可以。<strong>收费的好处就是它有一个完整的体系，让你从全局上有一条路径顺着走下去，就能完成一个目标</strong>。而免费资源需要你有充裕的时间，因为在遇到问题的时候，需要你一点一点去研究。不过在完成之后，回顾一下你的项目开发过程，也会在脑子里形成体系，再把之前看过的所有资料整理一下，也就学会了，只是时间上会比较长。</li><li>有些公司的实战经验要求的比较丰富，比如兼容性调整和性能优化。这种经验就需要你在开发项目中，刻意去创造问题的场景，然后解决它。比如说兼容性调整，你就得在项目中体验一下不同浏览器对于 JS 和 CSS 特性的支持程度，然后按需调整。而性能优化则就需要从网络请求、图片加载、动画和代码执行效率下手。</li></ul><p>这些你搞懂了之后，基本上百分之七八十的公司都可以面过去。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="软技能">软技能<a class="hash-link" href="#软技能" title="标题的直接链接">​</a></h2><p>上面说的是必备的硬性技术技能，还有一些必要的软技能，用以展示个人性格和工作能力。最重要的一项软技能是沟通能力。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="沟通能力">沟通能力<a class="hash-link" href="#沟通能力" title="标题的直接链接">​</a></h3><p>沟通能力，对于面试或是汇报工作都是必须的。它跟你的自信程度是完全挂钩的，你只有自信之后才能有更好的沟通和表达能力，如果唯唯诺诺，低三下四，那么在面试或汇报工作的时候就会支支吾吾，颠三倒四。</p><p>举个例子：好多人，包括我本人，在面试的时候都会紧张，而我又属于那种特别紧张的，有些技术可能本来是熟悉的，但面试的时候人家换一个问法、或者气氛比较紧张的话，大脑就会一片空白，想说也说不出来，特别吃亏。要解决这个问题，<strong>就要相信自己就是什么都会，面试官也不见得比自己会的多，然后面试前事先准备好常见面试题的答案，以及过往的工作经验，可以极大的增加自信。</strong>当准备面试题的时候，可以采用框架的形式进行组织，下边介绍两个常用框架用来回答工作经验类和原理类的问题。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="star-框架">STAR 框架<a class="hash-link" href="#star-框架" title="标题的直接链接">​</a></h3><p>对于工作经验相关的问题，可以使用框架组织回答，比如亚马逊北美那边面试会提前会告诉你，用一个叫<strong>STAR</strong>的框架回答问题：</p><ul><li><strong>S</strong> 是说 situation，事件/问题发生的场景。</li><li><strong>T</strong> 指的是 task，在这个场景下你要解决的问题或者要完成的任务。</li><li><strong>A</strong> 是 action，行动，要解决上边那些 tasks，你需要付出哪些行动？<em>比如说第 1 步先去调试代码，然后第 2 步再去检查一下哪个变量出问题了</em>，描述清楚每一步行动。</li><li><strong>R</strong> 是 result，结果，这些行动有了什么样的结果，是成功了还是失败了，对你来说有什么帮助或者增长了什么教训。又或者往大里了说，给公司带来了什么效益。</li></ul><p>这样一整套就比较有逻辑。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="原理回答框架">原理回答框架<a class="hash-link" href="#原理回答框架" title="标题的直接链接">​</a></h3><p>再说原理概念类的问题的回答，也是要有一套逻辑的，就比如说解释一下某某技术的工作原理，那么你要：</p><ul><li>解释一下这个技术是干什么的(<strong>What</strong>)。</li><li>它有什么好处(<strong>Why</strong>)。</li><li>分析一下这个技术内部用了哪些核心算法或机制，从外到里，或者由浅入深的给它剖析出来。如果是能拆解的技术，那就把每个部分或者组件的作用简单的描述一下（<strong>How</strong>)。</li><li>最后再给他总结一下这个技术的核心部分。</li></ul><p>例如，你要回答 react 工作原理的问题：</p><ul><li>可以先说一下 React 是做什么的<code>它是一个构建用户界面的库</code>。</li><li>然后它使用了（从浅一点的方面） <code>virtual dom</code> 把组件结构放在了内存中，用于提升性能。</li><li>组件刷新的时候又使用了 diff 算法，根据状态的变化去寻找并更新受影响的组件（然后继续深入 diff 算法...）。</li><li>再底层一些， React 分为了 <code>React 核心</code>和 <code>React-dom</code>，核心负责维护组件结构，React-dom 负责组件渲染，而 React 核心又使用了 <code>Fiber</code> 架构等等等等。</li><li>如果你深入阅读过它的源代码也可以再结合源码给面试官详细介绍一下，最后再总结一下 react 加载组件、渲染组件和更新组件的过程，这个就是它的工作原理。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>这些就是前端工程师要学到什么程度才能去找工作、以及怎么找工作的一些个人看法。你需要：</p><ol><li>设定个人目标。</li><li>辩证看待公司的招聘要求。</li><li>掌握硬技能和软技能（沟通能力）。</li><li>使用 STAR 框架和 WWH 框架组织面试回答。</li></ol><p>按照这些方向去准备的话，一定可以会找到满意的工作。如果找到了还请记得回来炫耀一下~如果觉得文章有帮助请点个赞吧~感谢！</p>]]></content:encoded>
            <category>前端</category>
            <category>面试</category>
        </item>
        <item>
            <title><![CDATA[Next.js项目搭建与部署]]></title>
            <link>https://kuizuo.cn/next.js-build-and-deploy</link>
            <guid>next.js-build-and-deploy</guid>
            <pubDate>Tue, 13 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[官方文档 Getting Started | Next.js (nextjs.org)]]></description>
            <content:encoded><![CDATA[<p>官方文档 <a href="https://nextjs.org/docs/getting-started" target="_blank" rel="noopener noreferrer">Getting Started | Next.js (nextjs.org)</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装"><a href="https://nextjs.org/docs/getting-started#automatic-setup" target="_blank" rel="noopener noreferrer">安装</a><a class="hash-link" href="#安装" title="标题的直接链接">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx create-next-app@latest --ts</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">yarn create next-app --typescript</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">pnpm create next-app --ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>运行</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm run dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>访问 http://localhost:3000</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="项目结构">项目结构<a class="hash-link" href="#项目结构" title="标题的直接链接">​</a></h2><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220712030637300.png" alt="image-20220712030637300" class="img_ev3q"></p><table><thead><tr><th>文件</th><th>内容</th></tr></thead><tbody><tr><td>pages</td><td>页面文件</td></tr><tr><td>pages/api</td><td>api 数据接口</td></tr><tr><td>public</td><td>静态资源文件</td></tr><tr><td>styles</td><td>样式文件</td></tr><tr><td>next-env.d.ts</td><td>确保 typescript 支持</td></tr><tr><td>next.config.ts</td><td>next 配置文件</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="路由">路由<a class="hash-link" href="#路由" title="标题的直接链接">​</a></h2><p>nextjs 有一个基于页面概念的文件系统路由器，存放在 pages 下<code>.js</code>, <code>.jsx</code>, <code>.ts</code>, <code>.tsx</code> 文件都将作为组件，即<strong>文件路径 → 页面路由</strong>，例如这里的 index.tsx 映射为 index，<code>pages/about.js</code> 将映射为 <code>/about</code>。</p><p>同时还支持动态路由，创建<code>pages/user/[id].tsx</code>文件，然后访问<code>user/1</code>，<code>user/2</code></p><div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">[id].tsx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#f8f8f2">{</span><span class="token imports"> useRouter </span><span class="token imports punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'next/router'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#e6db74">User</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> router </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">useRouter</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> router</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">User id:</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此时访问 http://localhost:3000/user/1 便可得到 <code>User ID: 1</code></p><p>在 router 对象下没有 param 属性，都是存放在 query 参数中，例如访问 user/1?username=kuizuo，此时的 query 值为 <code>{username: 'kuizuo', id: '2'}</code></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>不过这里有个比较有意思的点，如果你在上方代码中使用 console.log 打印 query 的话，在 vscode 中会打印出空对象<code>{}</code>，而在浏览器中会打印一次空对象，一次真实的 query 对象（并且打印两遍）</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220712191356587.png" alt="image-20220712191356587" class="img_ev3q"></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据渲染">数据渲染<a class="hash-link" href="#数据渲染" title="标题的直接链接">​</a></h2><p>如果你打开控制台，查看所返回的页面，你会发现响应中只有 User id:，这不就和 react 的 CSR(客户端)渲染没有区别吗，是的，确实是这样。因为上一部分的代码，并且从输出 query 也可以看的出来而不是 SSR(服务端)渲染。首先我要展示一下两者渲染的代码</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="csr-客户端渲染">CSR 客户端渲染<a class="hash-link" href="#csr-客户端渲染" title="标题的直接链接">​</a></h3><div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">[id].tsx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#f8f8f2">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#f8f8f2">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'react'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#f8f8f2">{</span><span class="token imports"> useRouter </span><span class="token imports punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'next/router'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#e6db74">User</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> router </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">useRouter</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> router</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">useState</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    username</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">''</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    email</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">''</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">useEffect</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">fetch</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">https://jsonplaceholder.typicode.com/users/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">}</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">then</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">then</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token function" style="color:#e6db74">setData</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">catch</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">username:</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">email:</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>经常写 react 的肯定对上面的代码不陌生，前端向后端发送数据请求，接受到数据后赋值给 data，然后渲染出来。因为请求数据是需要耗时的，所以在页面显示完之后，会停顿一会在显示出数据（主要是我这边没写 loadding），并且由于 id 并不是第一时间获取到的（从上面的 id）。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220712193009186.png" alt="image-20220712193009186" class="img_ev3q"></p><p>从这里来看，客户端渲染不仅要获取页面组件，还要请求数据，最终再通过 js 渲染出来</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssr-服务端渲染">SSR 服务端渲染<a class="hash-link" href="#ssr-服务端渲染" title="标题的直接链接">​</a></h3><p>next 中服务端渲染需要用到 getServerSideProps 函数，而后端的数据获取都是在该函数内来获取，并通过 prop 传入给前端组件中，来看实际代码</p><div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">[id].tsx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#e6db74">User</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> data</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">any</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">username:</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">email:</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">getServerSideProps</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">context</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> query</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">any</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">query</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// 这里context.param也能获取到id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> res </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">fetch</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">https://jsonplaceholder.typicode.com/users/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">}</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> data </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    props</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      data</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果从页面显示来看，确实没什么区别，但如果打开控制台就能发现诸多不同。</p><p>首先就是请求的页面，是直接包含数据，相当于返回你一个页面，而在客户端渲染则是返回一个组件，需要自己去请求数据来展示。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220712192713634.png" alt="image-20220712192713634" class="img_ev3q"></p><p>同时查看控制台中的 Fetch/XHR 的是看不到请求的数据，因为这些数据并不是由前端发送的,而是由后端发送的（故不受跨域请求的限制）。</p><p>从这就能看出客户端渲染与服务端渲染的的区别了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssg-静态生成">SSG 静态生成<a class="hash-link" href="#ssg-静态生成" title="标题的直接链接">​</a></h3><p>不过还没完，还有一个静态生成，先来看看代码。</p><div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">[id].tsx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#e6db74">User</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> data</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">any</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">username:</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">email:</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">getStaticProps</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">context</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">any</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">params</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> res </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">fetch</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">https://jsonplaceholder.typicode.com/users/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">}</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> data </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    props</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      data</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">getStaticPaths</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    paths</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name builtin" style="color:#e6db74">Array</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">20</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">fill</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">map</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">String</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">i </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    fallback</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'blocking'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>主要是 getServerSideProps 替换成 getStaticProps，同时增加了一个 getStaticPaths 用于生成静态页面的，而上面的 getStaticPaths 表示生成 id 1 到 20 的页面，那假设如果我访问 id 为 21 的 user 呢？由于这里设置<code>fallback: 'blocking'</code>，所以还是会走服务端渲染的那一部分。但如果设置<code>fallback: fasle</code>，访问 user/21 就会提示 404。</p><p>通俗点来说就就是生成一系列静态页面，不需要服务端处理，所以返回的速度更快，其缺点其实也比较明显，数据的任何更改都需要在服务端重新构建，而服务端渲染则是可以动态处理数据，不需要完全重建。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="isr-增量式静态生成">ISR 增量式静态生成<a class="hash-link" href="#isr-增量式静态生成" title="标题的直接链接">​</a></h3><p>不做过多介绍，详看文档 <a href="https://nextjs.org/docs/basic-features/data-fetching/incremental-static-regeneration" target="_blank" rel="noopener noreferrer">Data Fetching: Incremental Static Regeneration | Next.js (nextjs.org)</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-接口">api 接口<a class="hash-link" href="#api-接口" title="标题的直接链接">​</a></h2><p>上面的数据都是调用 <a href="http://jsonplaceholder.typicode.com/" target="_blank" rel="noopener noreferrer">JSONPlaceholder</a> 所提供的虚拟数据，在 next 中要提供数据接口的话，只需要在 pages/api 下编写即可，生成的路由规则和组件一样。例如 pages/api/hello.ts 映射为 api/hello，浏览器访问<a href="http://localhost:3000/api/hello" target="_blank" rel="noopener noreferrer">http://localhost:3000/api/hello</a> 就可以得到<code>{"name": "John Doe"}</code></p><div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">hello.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token maybe-class-name">NextApiRequest</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token maybe-class-name">NextApiResponse</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'next'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Data</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">handler</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">req</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token maybe-class-name">NextApiRequest</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> res</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token maybe-class-name">NextApiResponse</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token maybe-class-name">Data</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">200</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'John Doe'</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里的 req、res 就是同大部分 node 后端框架一样，而这里的写法与 serverless 一致（这里应该就是 serverless）。</p><p>上述是 get 请求，那 post 请求呢？无论什么 http 请求方法都将在 handler 处理，通过 req.method 来获取请求方法，要区分的话可以通过如下代码。</p><div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">handler</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">method</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'POST'</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// Process a POST request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// Handle any other HTTP method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="写一个简单的-crud">写一个简单的 CRUD<a class="hash-link" href="#写一个简单的-crud" title="标题的直接链接">​</a></h3><p>既然知道了上述的一些作用，不妨来个熟悉的 CRUD。这里以文章 post 为例</p><p>这里数据端使用的时 sqlite，配置不做展示，只展示主要核心功能</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">api/post/index.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> NextApiRequest</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> NextApiResponse </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'next'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> db </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'../../../lib/db'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">handler</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">req</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> NextApiRequest</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> res</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> NextApiResponse</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">method</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GET'</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        db</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">all</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">select * from post</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">200</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'POST'</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> title</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> content </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">body</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        db</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">get</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">insert into post(title, content) values(?, ?)</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">title</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">200</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">500</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">end</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">api/post/[id].ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> NextApiRequest</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> NextApiResponse </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'next'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> db </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'../../../lib/db'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">handler</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">req</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> NextApiRequest</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> res</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> NextApiResponse</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">query</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> title</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> content </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">body</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">method</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'GET'</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        db</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">get</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">select * from post where id=$id</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> $id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> id </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">200</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'Put'</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        db</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">get</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">update post set title=?,content=? where id=?</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">title</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">200</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'DELETE'</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        db</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">get</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">delete from post where id=$id</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> $id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> id </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">200</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">json</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    res</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">status</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">500</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">end</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里为了符合 RESTFUL 风格，所以 post 下编写了两个文件，这时候请求<a href="http://localhost:3000/api/post/2" target="_blank" rel="noopener noreferrer">http://localhost:3000/api/post</a> 就能获取到所有文章数据，基本的 CRUD 也就实现了。</p><p>这里写 sql 是真滴繁琐，没使用 str 或是 typeorm 主要是不想把这个 demo 搞得太复杂，实际项目还是用上比较好。</p><p>当然这里只是作为后端 api 接口的演示，至于前端的展示与编写就和普通前端开发没啥大的区别。基本后端框架能做的，next 能做后端很多事情，更多的使用还是作为接口转发，中间件等，毕竟 Next 主要的强项还是服务端渲染的能力。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="打包部署">打包部署<a class="hash-link" href="#打包部署" title="标题的直接链接">​</a></h2><p>既然说到部署，那肯定离不开 nextjs 的母公司<a href="https://vercel.com" target="_blank" rel="noopener noreferrer">Vercel</a>了，关于 Vercel 之前也写过相关文章，关于 Vercel 就不过多介绍。</p><p>nextjs 部署到 vercel 实在简单，将项目推送到 github 仓库中，然后在 vercel 中 New Project，接着选择 nextjs 的仓库，点击 Deploy，静等部署即可。关于部署可以看这篇文章 <a href="https://kuizuo.cn/develop/Vercel%E9%83%A8%E7%BD%B2%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2" target="_blank" rel="noopener noreferrer">Vercel 部署个人博客</a></p><p>现在你可以通过访问 <a href="https://kz-next-app-demo.vercel.app/" target="_blank" rel="noopener noreferrer">kz-next-app-demo.vercel.app</a> 来访问该项目，并尝试访问<code>/api/post</code>，<code>user/1</code>来看看。</p><p>只能说不愧是母公司。</p><p>至于其他部署？既然都用 nextjs 了，还考虑自建服务器来部署吗？</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>这次的整体过程比较简单，后续应该会使用 nextjs 编写一个完整的项目（<del>也有可能是 nuxt.js</del>)。</p>]]></content:encoded>
            <category>next</category>
            <category>react</category>
            <category>ssr</category>
            <category>vercel</category>
        </item>
        <item>
            <title><![CDATA[2022年暑期规划]]></title>
            <link>https://kuizuo.cn/2022-summer-planning</link>
            <guid>2022-summer-planning</guid>
            <pubDate>Wed, 07 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[考试也结束了，这学期的任务也完成了，按照往常我通常就定制暑假的学习清单，将要学习的技术栈规划出来，借此来督促自己学习，这次也不例外。]]></description>
            <content:encoded><![CDATA[<p>考试也结束了，这学期的任务也完成了，按照往常我通常就定制暑假的学习清单，将要学习的技术栈规划出来，借此来督促自己学习，这次也不例外。</p><p>但此次有点特殊，主要有以下情况</p><ul><li><p>老家疫情</p></li><li><p>主力电脑不在身边</p></li><li><p>暑期时间过短</p></li></ul><p>很不幸的是，我老家就在前几天发生疫情了，挺严重的，封城加方舱，其严重性可想而知（我都不知道我这个暑假能否返回老家）。而这就导致我的工作环境发生了巨变，我目前处于一个相对小巧的家中，没有一个完整的办公桌（只有一个茶几）来放置电脑键鼠外设，甚至没有 wifi。而通常情况下我会配置台显示屏作为更广阔的代码视野，以提升编程效率，然而这次并没有。</p><p>同时也是因为疫情，导致快递不易寄送，我就放弃了将我的台式主机寄回去的计划。而是只带了另一台轻薄本小新 Pro14（还有一台游戏本因特殊原因被迫不在我的手里 😭），所以又导致了开发环境不足，编程效率有所下降。</p><p>在 20 年 1 月疫情首次爆发的时候，足足给我了近 4 个月的时间“闭关修炼”（学校安排 5 月中旬开学，不然感觉还能更进一步），其效率远非日常学习所能堪比的，那段时间极大的充实了我的知识面，让我知道编程的无限可能。而这次暑假时间为期 7.7 ~ 8.19，时间上不再像往常那么充实。</p><p>即便诸多条件的影响下，假期也是我学习效率最高的时候。考试的折磨已经结束了，接下来就是享受学习的过程。只有在别人不在学习的时候学习，在最有可能比别人先行一步（卷就完事了）。于是下列为我的本次暑期学习计划，主要是针对一些主流热门框架的学习，优先按照顺序。不出意外的话，应该保证一周至少两篇的博文（笔记）</p><p><del>tip: 已经快两个月没更新技术类博客了（逃）</del></p><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> <a href="/develop/编写一个VSCode插件">vscode 插件</a></p></li><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> <a href="/project/基于Nuxt3的API接口服务网站">nuxt.js</a></p></li><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> <a href="/node/Next.js项目搭建与部署">next.js</a></p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->webGL three.js</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->rust</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->webassembly</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->tauri</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->deno</p></li></ul><p>计划不是任务，不一定都要实现是吧。这里只是列举一系列下一阶段所要学习，至于能完成多少，取决于我的懒散和拖延。如果完成了我会在前面勾选，并附上相应文章(笔记)链接</p><p>不过由于开发环境与工作环境的限制，不太会在假期对以上技术栈有个整体的浏览以及项目展示，而是构建其 demo 及其相关实操过程的文章。同时在这期间也顺便写点人生感悟的语句，以及拖欠了的年终（中）总结。</p><p><strong>时刻保持学习，时刻保持清醒。</strong></p>]]></content:encoded>
            <category>随笔</category>
            <category>规划</category>
        </item>
        <item>
            <title><![CDATA[浅谈个人学习方式]]></title>
            <link>https://kuizuo.cn/learning-style</link>
            <guid>learning-style</guid>
            <pubDate>Thu, 10 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[临近考试周，又要开始准备复习，顺带总结下自己平常的学习方式与一些感慨。]]></description>
            <content:encoded><![CDATA[<p>临近考试周，又要开始准备复习，顺带总结下自己平常的学习方式与一些感慨。</p><p>我个人主要的两种学习方式，<strong>主动学习</strong>与<strong>被动学习</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="主动学习-">主动学习 ✍<a class="hash-link" href="#主动学习-" title="标题的直接链接">​</a></h2><p>通常来说，主动学习往往是一件痛苦的事情。就如考试周，平常的课该去在课堂上睡觉，该不去的在宿舍睡觉，到考试周，一学期的课没听，但一想到不复习就有可能面临挂科，或多或少都会复习。考试摆烂，挂科惨淡。</p><p>除了上面是会导致坏结果而去学习，那么还有一种则是与之相反，也就是所需，所感兴趣的去学习。</p><p>例如我想要实现一个酷炫功能，或者是一个需求时，而其中需要的知识点便会去了解与学习。</p><p>对于前者而言，其过程并不舒服，甚至可以说是逼自己学习不喜欢的东西，通常我是不如不学的，即便学了在以后也难以记起，除非不学的结果比较严重（如挂科）。而后者情况便不同，兴趣是最好的老师，甚至都不需要借助外界因素去激励，便能有一个很好的学习成果。</p><p>如果没有兴趣或需求的情况下，那么主动学习一定要定制一系列的目标，如果没有明确的目标，学习将会显得十分迷茫。我有很多时候便是这样，想去主动去学习诸多技术栈，不知从何下手。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="被动学习-">被动学习 📘<a class="hash-link" href="#被动学习-" title="标题的直接链接">​</a></h2><p>其实可以说是利用业余时间学习的一个方式，首先我会想我一天主要做的事情（通常是与学习无关），比如刷各个平台（b 站，抖音）的视频，刷知乎，qq 群闲聊等等，这里只是以我一天的大部分日常举例。</p><p>此事不妨关注一些与学习类的账号，包括但不限于加入一些技术交流群， up 主，公众号，博主等等，当你每次刷这类平台时，系统很自然就会给你推送相关内容，比方说 b 站，我日常会在上面刷一些鬼畜视频，生活娱乐视频，但也会关注一些技术类的账号，在娱乐的同时，还能不经意间刷到一些编程知识（知乎，微信公众号同理），这送上门的知识不香吗？</p><p>当然，这样学习肯定有一定弊端。首先所摄取的知识过于笼统，一般都是由别人推荐的，甚至有可能会浪费你人生中的几分钟，因为这些知识点可能你已经掌握了，或者这些知识确实没什么干货。其次所获取到的知识往往是整个知识面的冰上一角，或者是某些新型技术，但想要深入去学习还是得按上面的主动学习。</p><p>被动学习主要的作用能让你在不学习的状态下，还能获取相对应的知识。听起来可能觉得很卷，无时无刻的在学习，但我认为在娱乐中学习往往不会显得像主动学习那般有种疲惫感。</p><p>我在被动学习中就间接了解到许多的前沿的技术栈，以及了解到许多之前没使用过的语言、框架特性，而这些都是直接送上门的知识点，而我要做的只是关注一些账号，订阅一些文章或站点，而不用自己去茫茫知识海洋中去寻求。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="两者的权衡">两者的权衡<a class="hash-link" href="#两者的权衡" title="标题的直接链接">​</a></h2><p>我时常处于这类被动学习状态，因为我对很多技术点都很感兴趣，但又不知道从何下手，而当我刷到我所感兴趣的东西时，我才会开始转为主动学习。之所以会出现这样的学习状态转型，有很大一部分是因为<strong>兴趣感已经没有一开始所学的那么强烈，甚至可以说有些许乏味</strong>。</p><p>在一开始接触时，我是抱着强烈的兴趣感去学的，处于一种非常积极的主动学习状态，当时所获取的知识是无法用现在同等时间所堪比。然而在兴趣感消散，这种状态都为浮云。主动学习的频率减弱，每天都在做着与学习无关的事情，这期间与知识没有任何的往来。</p><p>直到将每天所要做的事情，间接的转为被动学习的方式，至少有在学习，而不是在停步，即便是行走 1 厘米，那也是米。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>无论是任何事情在任何时候下都应该保持的是一种不断坚持的状态，打游戏也好，学习也好。</p><p>一段时间不打游戏，手感生疏，再次接触就没状态。
一段时间不学知识，容易忘记，再次使用就没印象。</p><p>大部分人都是如此，可谁又不希望保持一种不断坚持的状态。毕竟不是每个人都有充裕的个人资源与时间资源，很多时候这些资源并不是由自己分配的，有可能是亲朋好友，也有可能是上司老板，最有可能是生活所迫。。。</p><p><strong>唯愿此生，岁月静好</strong></p>]]></content:encoded>
            <category>随笔</category>
            <category>杂谈</category>
        </item>
        <item>
            <title><![CDATA[噢！原来这就是 TypeScript]]></title>
            <link>https://kuizuo.cn/typescript-intro</link>
            <guid>typescript-intro</guid>
            <pubDate>Wed, 09 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[TypeScript 是 JavaScript 的，带有类型的超集，并且可以编译为 JavaScript 脚本，这篇幅文章将带你认识一下 TypeScript]]></description>
            <content:encoded><![CDATA[<p>我第一次使用 TypeScript 是 16 年在读研的时候，学校的算法课是使用 TypeScript 实现的。当时只知道 TypeScript 是 Angular 开发的必备语言，没想到还能这么通用。后来在写作业的时候，发现 TypeScript 也并不是特别难，只不过是给 JavaScript 加上了类型信息，让代码不那么容易出错，并且支持高级的面向对象编程范式，让 JavaScript 变得跟 Java/c# 差不多。接下来，这篇文章就给你揭开 TypeScript 的面纱，对它来一个宏观上的认识，然后介绍一下如何编写并运行 TypeScript 程序，如何定义类型，另外假设你有 JavaScript 基础。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-typescript">什么是 TypeScript<a class="hash-link" href="#什么是-typescript" title="标题的直接链接">​</a></h2><p>那么到底什么是 TypeScript 呢？官方的定义是 TypeScript 是 JavaScript 的、带有类型的超集，并且能够编译为普通的 JavaScript。这里有三个重点，一个是编译，一个是带有类型，一个是超集。</p><ul><li>我们先看一下编译，编译是说，TypeScript 本身是不能够在浏览器或 Node.js 环境下运行的（deno 除外），需要使用 TypeScript 编译器编译成普通的 JavaScript，这点很像 C++ 或 Java。</li><li>而带有类型，是说 JavaScript 在定义变量的时候，类型是动态的，只有在运行的时候才能知道它的具体类型，比如 number 或者 string，并且类型也是可以动态变化的，而 TypeScript 则是要求变量有确定的类型，并且在编写代码的时候就已经确定，如果把字符串赋给类型为 number ，数字类型的变量，就会出错。</li><li>超集是说，TypeScript 本身支持所有 JavaScript 的语法，并在此基础上添加了额外的功能和特性，这样就使得所有的 JavaScript 代码可以完全被 TypeScript 正确编译。所以说你可以自己决定使用多少 TypeScript 提供的特性。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="为什么用-typescript">为什么用 TypeScript<a class="hash-link" href="#为什么用-typescript" title="标题的直接链接">​</a></h2><p>认识了 TypeScript 之后，可能你又有问题，为什么要学 TypeScript 呢？先看一条数据，在 stackoverflow 发起的 2020 年程序员调查中，TypeScript 在程序员最爱的编程语言中排在了第二位，仅次于 Rust：</p><img loading="lazy" alt="" src="/img/2020-06-09-typescript-intro/2020-06-09-22-03-40.png" class="img_ev3q"><p><a href="https://stackoverflow.blog/2020/05/27/2020-stack-overflow-developer-survey-results/" target="_blank" rel="noopener noreferrer">https://stackoverflow.blog/2020/05/27/2020-stack-overflow-developer-survey-results/</a></p><p>之所以大家喜欢 TypeScript，是因为：</p><ul><li>TypeScript 有类型检查机制，我们可以在写代码的时候就能够发现错误，比如给函数误传了类型不同的参数，那么通过 VS Code 对 TypeScript 的强力支持，我们能立刻看到错误。</li><li>另外 VS Code 能根据 TypeScript 的类型信息提供更好的代码提示和补全功能。</li><li>此外，对于大型项目、多人协作编写代码时，类型起到了文档的作用，可以清楚的知道我这个变量是什么类型，或者我定义的函数需要什么样的参数，我的对象里又有哪些属性。这样让代码更易于维护，这也是为什么大公司、大型项目更偏爱 TypeScript</li><li>最后 TypeScript 入门的门槛低，只要你会 JavaScript，那么你就已经能编写 TypeScript 代码了。另外因为 JS 的快速发展，好多以前在 typescript 才能用的功能，你可能在 JS 里已经用到了，所以说要学习的东西就更少了。</li></ul><p>除了这些好处之外，它也有其他静态类型语言比如 Java/c++ 的通病，就是代码量会增加，并且有时候类型过于复杂反而使得代码显的更难阅读，不过跟它带来的优势相比，也显得不那么突出了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="编写和运行-ts-代码">编写和运行 TS 代码<a class="hash-link" href="#编写和运行-ts-代码" title="标题的直接链接">​</a></h2><p>在了解 TypeScript 之后，我们来看一下怎么编写和运行 TypeScript 代码。TypeScript 代码因为需要编译，才能生成可运行的 JavaScript 代码，所以需要安装编译器。不过最近刚刚发布正式版的 deno， 原生支持 typescript 的编译和运行，所以就不需要再安装编译器了。我会介绍这两种运行环境。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-tsc">Node TSC<a class="hash-link" href="#node-tsc" title="标题的直接链接">​</a></h3><p>首先看一下 node.js 环境。确保你的电脑已经安装了 node.js ，然后使用命令 <code>npm install -g typescript</code>&nbsp; 把 typescript 编译器安装到全局，这样所有 typescript 项目都可以使用它：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> -g typescript</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安装完成之后使用 vs code 打开一个空的文件夹，新建一个 index.ts 文件，写上一些示例代码，我稍后再解释它的含义：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> a</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>写完之后，打开命令行，输入：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">tsc index.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>TypeScript 编译器就会把 ts 文件编译成 js 文件，可以看到生成了 index.js，然后运行一下:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">node</span><span class="token plain"> index.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>来看一下结果，显示输出了 10。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deno">Deno<a class="hash-link" href="#deno" title="标题的直接链接">​</a></h3><p>因为 Deno 本身就支持 TypeScript，所以只需要安装 Deno 运行环境就可以了，mac/linux 和 windows 下都可以使用一条命令安装.</p><p>mac/linux</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">curl</span><span class="token plain"> -fsSL https://deno.land/x/install/install.sh </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>windows (powershell)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">iwr https://deno.land/x/install/install.ps1 -useb </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> iex</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果安装完提示需要添加环境变量的话，按照提示步骤操作就可以了。安装完成之后，直接使用：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">deno run index.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>就可以了。同样的也输出了 10。后面的例子我们继续使用 Node.js。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tsconfigjson">tsconfig.json<a class="hash-link" href="#tsconfigjson" title="标题的直接链接">​</a></h3><p>我们打开 tsc 生成的 js 文件看一下，发现里边除了去掉了类型之外，没有什么变化。那么，JavaScript 版本那么多，TSC 怎么知道要编译成哪一版呢？答案是，TSC <strong>默认</strong>会编译成 ES3 那一版。我们可以试试写一个 async 的函数：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">func</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再编译一次看看：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">var</span><span class="token plain"> __awaiter </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">this</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&amp;&amp;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">this</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">__awaiter</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">||</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">thisArg</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> _arguments</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> </span><span class="token parameter constant" style="color:#e6db74">P</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> generator</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">adopt</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> value </span><span class="token keyword" style="color:#66d9ef">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">P</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token plain"> value </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">P</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">resolve</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">resolve</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token constant" style="color:#e6db74">P</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token constant" style="color:#e6db74">P</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#e6db74">Promise</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>发现生成了好多复杂的代码来支持 async。那我如果要生成 ES2017 的代码呢？毕竟 aync/await 是这个版本出现的？答案很简单，在项目根目录下新建一个 <code>tsconfig.json</code>&nbsp; 文件，这个是配置 typescript 项目的，我们可以通过 <code>compilerOptions</code>&nbsp; 属性来配置 tsc 编译器，然后使用 <code>target</code>&nbsp; 属性来指定要编译成的版本，那么这里设置成 ES2017：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token string-property property" style="color:#f92672">"compilerOptions"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"target"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"ES2017"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>保存一下，<strong>现在</strong>再运行 tsc，后边就不需要加文件名了，因为有了 tsconfig 文件之后，这个文件夹会自动成为 typescript 项目，tsc 会自动找到 ts 文件进行编译，如果指定了文件名，那么这个 tsconfig 的配置就会被忽略。打开生成的 js 文件，发现 aync 的函数和 ts 源代码里的一样了：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">func</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="基本语法">基本语法<a class="hash-link" href="#基本语法" title="标题的直接链接">​</a></h2><p>TypeScript 的核心就是类型，这里咱们重点看一下它的语法。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本类型">基本类型<a class="hash-link" href="#基本类型" title="标题的直接链接">​</a></h3><p>TypeScript 的基本类型跟 JavaScript 中的保持一致，有 boolean, number, string, undefined, null 等常用类型。给变量定义类型有两种方式，一种是隐式的，一种是显式的。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="隐式">隐式<a class="hash-link" href="#隐式" title="标题的直接链接">​</a></h4><p>隐式类型是由 TypeScript 根据变量的值来推断类型，这样的话，代码的写法跟 JS 就一样了，但不同的是它后边不能用<strong>其他类型</strong>的值来给他<strong>重新赋值</strong>，比如定义一个变量 a，不给它指定类型，但是给它赋上一个数字类型的值，10，然后再把它改成字符串类型的"hello"，那么就会产生编译错误，提示"hello"字符串不能赋值给数字类型：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hello"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// error TS2322: Type '"hello"' is not assignable to type 'number'.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="显式">显式<a class="hash-link" href="#显式" title="标题的直接链接">​</a></h4><p>显式类型的定义，就跟之前运行的 TS 代码示例一样，我们用 <code>:</code>&nbsp;+ <code>类型</code>&nbsp; 来显式的规定，这个变量是什么类型的，比如定义一个 boolean 类型的变量 b：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">b</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> boolean </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果想让一个变量可以是任何类型的，就像 JS 中可以随意更改，那么可以把它的类型定义为 any，例如定义一个变量 a，类型为 any，开始给它一个数字类型的值，10，然后再改成"hello"，这时就不提示错误了:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">a</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> any </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hello"</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>类型也可以用在函数的参数和返回值中，比如定义一个加法函数，它接收一个参数 a，类型是 number，还接收参数 b，也是 number 类型，最后返回值类型也是 number，返回值的类型定义在参数列表的小括号后边，然后它的后边才是函数体，里边直接返回 a + b，返回值的类型可以省略，因为 typescript 可以根据 a+b 推断出它的返回值也是 number 类型：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter literal-property property" style="color:#f92672">a</span><span class="token parameter operator" style="color:#66d9ef">:</span><span class="token parameter"> number</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#f92672">b</span><span class="token parameter operator" style="color:#66d9ef">:</span><span class="token parameter"> number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> number </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> a </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里我们可以使用 add(1, 2)来正常调用这个函数：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果使用一个字符串类型的变量来接收函数的返回值，那么就会出错：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">res</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> string </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>提示： <code>Type 'number' is not assignable to type 'string'.</code>&nbsp;number 类型不能赋给 String 类型。</p><p>如果给函数传递一个字符串进去：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"1"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>那么编译器就会提示 <code>Argument of type '"1"' is not assignable to parameter of type 'number'</code>&nbsp; 字符串"1"不能传给 number 类型的参数。
另外调用函数时，必须传递跟参数列表数量相同的参数，不像 JS，可以不传或只传前边几个参数，这里如果只传一个参数的话：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">add</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>会提示 <code>An argument for 'b' was not provided.</code>&nbsp; 没有给 b 传值。
最后，如果函数不返回值的话，可以使用 void 类型代表函数没有返回值：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">printLog</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter literal-property property" style="color:#f92672">log</span><span class="token parameter operator" style="color:#66d9ef">:</span><span class="token parameter"> string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token console class-name" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">log</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="组合类型">组合类型<a class="hash-link" href="#组合类型" title="标题的直接链接">​</a></h3><p>如果一个变量可以有多个类型，但是又不想使用 any 破坏类型检查，那么可以使用组合类型，组合类型使用一条竖线，也就是或操作符，来定义，比如一个变量既可以是 number 也可以是 string 类型，那么可以这样来定义，给它赋上一个数字类型的值 10，然后后边修改成字符串也没问题：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">a</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> number </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> string </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hello"</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="类型别名">类型别名<a class="hash-link" href="#类型别名" title="标题的直接链接">​</a></h4><p>这样代码看起来不太方便，并且这个组合类型只能给 a 使用，如果有一个变量 b 也可以同时是 number 或 string 的类型的话，还要重复定义这个类型。要解决这个问题，我们可以使用 type 关键字来给这个组合类型起个别名，让代码更易读，也方便其他变量使用，这里定义一个 type 名字叫 NumStr，自定义的类型名字推荐首字母大写：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">NumStr</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后 a 变量就可以这样定义，给它一个数字值：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> a</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> NumStr </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同样也可以再定义一个 b 变量，给它一个字符串值：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> b</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> NumStr </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"hello"</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>另外，组合类型也可以直接使用字面值来定义，这样就规定了一个变量的取值范围，比如我想让一个字符串类型的变量 c，只能取"on"或"off"两者之一，那么我们可以这样定义，在 c 后边直接使用"on" | "off" 来定义它能取的值：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> c</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"on"</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"off"</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"on"</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在它的值是 on，如果给它赋值 off 是可以的，但是赋其他值就会出错，比如给它赋一个"other"字符串：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> c</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"on"</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"off"</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"on"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">c </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"off"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">c </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"other"</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>提示 <code>error TS2322: Type '"other"' is not assignable to type '"on" | "off"'.</code>&nbsp;other 不能赋值给用 "on" 或 "off" 定义的类型里边。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="对象类型interface">对象类型(interface)<a class="hash-link" href="#对象类型interface" title="标题的直接链接">​</a></h3><p>上边介绍的都是基本类型，那么如果要检查对象里的属性是不是符合规范呢？那就要使用 interface，接口了。接口是用来规范一个对象里应该都有哪些属性，包括它的名字，还有它的类型。我们来看一个例子，比如有一个 post 文章对象，我想让它有 title 和 author 属性，并且都是 string 类型的，那么我们可以使用接口来定义一个 Post 类型，使用 interface 关键字，后边是接口的名字，这里叫 Post，然后后边跟一对大括号，里边写上该有的属性和类型，注意每个属性后边用分号结尾，不是逗号：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">Post</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  author</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接着定义一个 post 对象，让它使用 Post 接口类型：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> post</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Post </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"标题"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  author</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"fh"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里没有问题，如果再添加一个"publishDate"属性，那么就会出现错误</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> post</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Post </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"标题"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  author</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"fh"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  publishDate</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"2020-06-01"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>提示 <code>error TS2322: Type '{ title: string; author: string; publishDate: string; }' is not assignable to type 'Post'. Object literal may only specify known properties, and 'publishDate' does not exist in type 'Post'.</code>&nbsp; 说对象里边只能包括接口里定义的属性。同样的，少定义一个属性，例如去掉 title 属性，会提示 <code>Property 'title' is missing in type '{ author: string; }' but required in type 'Post'.</code>&nbsp; 缺少 title 属性。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="接口作为函数参数类型">接口作为函数参数类型<a class="hash-link" href="#接口作为函数参数类型" title="标题的直接链接">​</a></h4><p>接口除了可以查检对象是否符合规范外，也可以用于函数参数的类型检查，这里需要注意的是，如果传递进来的对象没有定义类型的话，那么<strong>只要它的属性满足接口中的规范，就可以通过查检</strong>，<strong>哪怕它有额外的属性</strong>，比如，有一个函数接收 post 类型的参数，里边获取它的 title 属性并打印出来：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">getTitle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">post</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token builtin" style="color:#e6db74">console</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">log</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后定义一个 post 变量，不指定类型，然后还包括额外的 <code>publishDate</code>&nbsp; 属性:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> post </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"标题"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> author</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"fh"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> publishDate</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"2020-06-01"</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>定义好之后把它传给 getTitle 函数，发现没有问题：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">getTitle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果想严格检查对象参数的话，可以像之前那样把 post 变量定义为 Post 接口类型的：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> post</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Post </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"标题"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> author</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"fh"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> publishDate</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"2020-06-01"</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者直接给函数传递对象字面值：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">getTitle</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"标题"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> author</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"fh"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> publishDate</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"2020-06-01"</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样就会提示出错。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="数组类型">数组类型<a class="hash-link" href="#数组类型" title="标题的直接链接">​</a></h3><p>给数组规定类型可以保证里面的元素都是同一类型，以防在统一处理数组元素时，混进来其他类型的元素，导致异常，或者防止意外给数组元素赋了其他类型的值。要给数组定义类型，只需要在类型后边加上一对空的方括号就可以了，比如定义一个 number 类型的数组可以这样:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> arr</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="泛型">泛型<a class="hash-link" href="#泛型" title="标题的直接链接">​</a></h4><p>还有一种方式是使用泛型，泛型是属于面向对象语言中比较高级的特性，这里简单知道一下怎么使用就可以了，这里把泛型应用在数组身上，同样可以用来规定数组里元素的类型，只是这里要使用 Array class，或者说是构造函数，来定义，比如同样的 arr，使用泛型的话，就把 number[] 改成 Array 构造函数的名字，后边跟一个尖括号，里边是类型 number：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> arr</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Array</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token builtin" style="color:#e6db74">number</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tuple元组">tuple（元组）<a class="hash-link" href="#tuple元组" title="标题的直接链接">​</a></h4><p>TypeScript 里还有一个概念，叫 tuple，元组，它是一个有限元素数量的数组，但是呢每个元素需要分别指定是什么类型，比如我这里有一个三元组，就是说这个数组有三个元素，然后我规定第一个元素是 number 类型，第二个元素是 string 类型，第三个元素是 boolean 布尔类型，那么可以这样定义 <code>let tup: [number, string, boolean]</code>&nbsp;，然后给它赋上合适的值 <code>[1, "fh", true]</code>&nbsp;：</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> tup</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">boolean</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"fh"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>好了，到这里我们介绍了：</p><ul><li>什么是 TypeScript</li><li>为什么要学 TypeScript 和它有什么优点</li><li>怎样编写和运行 TypeScript 代码</li><li>以及它的一些基本的并且常用的语法点</li></ul><p>这样你就能对 TypeScript 有大体的认识了，也能编写简单的 TypeScript 应用并且看懂一部分其他人的代码了。到这里你可能发现 TypeScript 带来的功能特性都是零散的，因为它本身就是给 JS 添砖加瓦，所以它的语法点逐一突破就好了。</p><p>你学会了吗？如果有问题，欢迎通过下方链接参与讨论。</p>]]></content:encoded>
            <category>前端</category>
            <category>TypeScript</category>
        </item>
        <item>
            <title><![CDATA[给前端工程师看的后端科普]]></title>
            <link>https://kuizuo.cn/backend-intro</link>
            <guid>backend-intro</guid>
            <pubDate>Tue, 11 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[前端工程师了解后端的功能和作用之后，能更好的和后端工程师进行沟通，减少沟通成本，另外也有助于向全栈工程师方向发展。]]></description>
            <content:encoded><![CDATA[<p>前端工程师了解后端的功能和作用之后，能更好的和后端工程师进行沟通，减少沟通成本，另外也有助于向全栈工程师方向发展。在开始之前，先回顾一下应用的构成：</p><p><a href="https://www.bilibili.com/video/BV1XV411d7Cg/" target="_blank" rel="noopener noreferrer">B 站视频 - 点击传送</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="应用的构成">应用的构成<a class="hash-link" href="#应用的构成" title="标题的直接链接">​</a></h2><p>一个完整的应用通常包括前端和后端两个部分。前端是直接与用户打交道的部分，通常指的是网页，采用 HTML/CSS/JS 语言编写，运行在用户自己电脑的浏览器上。后端则是运行在远程的服务器上，用来收集和处理用户传来的数据，然后把结果再传给前端，展现给用户。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前后端分离的演化">前后端分离的演化<a class="hash-link" href="#前后端分离的演化" title="标题的直接链接">​</a></h2><p>在以前，当 web 应用还是主流的时候，前后端应用包含在同一个项目中，工程师需要同时负责这两个部分，接收到用户的请求后，处理请求，然后生成对应的 HTML页面，再把生成好的页面发送给用户。</p><p>后来随着手机和智能设备的普及，因为移动 app 必须安装在客户端手机上，这样就导致越来越多现有的 web 应用需要单独提供接口给 APP 使用，即使他们用到的数据一样的。一套程序同时维护两套接口就打破了”不编写重复代码“的原则，所以 web 页面的展现也像 APP 一般分离了出来，这样后端只需要提供一套 API，就可以让 web和APP共同使用。Web 前端也就变成了像 App 一样的客户端程序，第一次访问页面时，由服务器直接把整个前端程序发送到浏览器中，剩下的请求统一在 web 前端处理，直接访问后端 API 接口。广义上的前端，是包括 app、小程序和桌面应用的，也就是所谓的大前端，所有负责数据展现并与用户交互的程序都可以称之为前端。由此，我们前端工程师专门负责前端，后端工程师负责后端。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="后端的作用">后端的作用<a class="hash-link" href="#后端的作用" title="标题的直接链接">​</a></h2><p>接下来看一下后端的作用和组成部分。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="简单来讲">简单来讲...<a class="hash-link" href="#简单来讲" title="标题的直接链接">​</a></h3><p>前端应用根据一定协议（比如 HTTP) 发送请求给后端，后端接收请求后，解析请求参数，然后根据这些参数来进行数据的计算和处理，最后把结果返回给前端。</p><p>一个最基本的后端应用由三个部分组成：</p><ul><li>服务器程序，用于接收请求和发送响应。</li><li>后端应用程序，用于处理请求，并完成业务逻辑，然后利用服务器程序把结果响应给前端。</li><li>数据库：用于保存和业务逻辑相关的数据，便于再次使用，比如用户注册的信息、应用的内容等。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="大规模后端应用">大规模后端应用<a class="hash-link" href="#大规模后端应用" title="标题的直接链接">​</a></h3><p>后端，根据规模，会有不一样的组成部分。一个简单的、较少用户量的小规模应用，在一台服务器上部署整个后端应用程序就足够了，而对于大规模的应用，往往部署在由几台乃至几千台服务器组成的集群中，对于这种，后端应用会根据 API 结构或者功能进行拆解，比如认证鉴权服务、订单服务、日志服务、数据库等。然后部署到不同的服务器上，每个服务也可以部署到多台服务器上用于提升性能、容灾容错。除后端服务外，大规模应用还有以下常见的几个组件：</p><ul><li>load balancer（负载均衡器），用于把请求分给负载比较低的服务器上。</li><li>Api Gateway (API 网关)，用于组合分散的 API，对外提供统一入口，也起到保护内部服务的作用。</li><li>Cache Service（缓存服务），用于缓存计算结果，提升性能。</li><li>Centrialized Service（中心管理服务），用于为服务器集群提供中心化的配置、同步和管理服务。</li><li>Message Service（消息服务），用于处理基于事件（或消息）的服务，支持持久化（即保存消息），常用于后端服务间的通信，或者实现 websocket 协议。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据算法工程师各司其职">数据、算法工程师各司其职<a class="hash-link" href="#数据算法工程师各司其职" title="标题的直接链接">​</a></h2><p>上边介绍了后端应用的常见结构，对于现在的科技发展，单从业务逻辑上又能划分成独立的服务单元，比如</p><ul><li>大数据处理服务</li><li>图像处理服务</li><li>自然语言处理服务</li><li>爬虫服务</li></ul><p>由此也带来了细分的工作岗位，比如数据工程师，算法工程师，爬虫工程师等等。</p><p>你学会了吗？如果有问题，欢迎通过下方链接参与讨论。</p>]]></content:encoded>
            <category>前端</category>
            <category>后端</category>
        </item>
        <item>
            <title><![CDATA[前后端通信之 HTTP 协议简介]]></title>
            <link>https://kuizuo.cn/http-protocol</link>
            <guid>http-protocol</guid>
            <pubDate>Mon, 10 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[HTTP 协议包括客户端和服务端两个实体，客户端发送请求给服务端，服务端返回响应给客户端。在 HTTP 中，数据称为资源，可以是 html 文档、图片、也可以是普通文本。资源是通过 URL 进行定位的。]]></description>
            <content:encoded><![CDATA[<p>前后端数据的交换一般是基于 HTTP 协议。HTTP 协议包括客户端和服务端两个实体，客户端发送请求给服务端，服务端返回响应给客户端。在 HTTP 中，数据称为资源，可以是 html 文档、图片、也可以是普通文本。资源是通过 URL 进行定位的。</p><p><a href="https://www.bilibili.com/video/BV1KV411o7u5/" target="_blank" rel="noopener noreferrer">B 站视频 - 点击传送</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="url">URL<a class="hash-link" href="#url" title="标题的直接链接">​</a></h2><p>当客户端需要访问服务端资源时，首先需要知道资源的 url，例如打开 bilibili 网站:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">http://www.bilibili.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者请求某篇博文下的所有评论。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">http://jsonplaceholder.typicode.com/comments?postId=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>URL 的组成部分有：</p><ul><li>http:// - 协议 Protocal</li><li>jsonplaceholder.typicode.com - 主机 Host</li><li>/comments - 路径 path</li><li>?postId=1 - 查询参数</li></ul><p>服务端收到 url 会解析它们并返回相应的数据。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="发送-http-请求">发送 HTTP 请求<a class="hash-link" href="#发送-http-请求" title="标题的直接链接">​</a></h2><p>HTTP 请求包括下边几个部分</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">GET /comments?postId=1 HTTP/1.1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">请求头 request headers</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Accept-Encoding: gzip, deflate</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">请求体(如果有) request body</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">....</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>请求方式， 告知服务器要进行的操作，GET 是默认请求方式，意思是从服务端获取资源，另外还有几个其他常用的方式：<ul><li>POST - 创建资源</li><li>PUT - 更新资源</li><li>DELETE - 删除资源</li><li>区别是 GET 和 DELETE 一般没有请求体。而 POST 和 PUT 通常带有请求体，用于向服务端发送资源信息。</li></ul></li></ul><p>接下来是：</p><ul><li>请求资源的路径和查询参数</li><li>HTTP 版本</li><li>请求头，包含额外的信息来帮助服务器决定如何进行响应，比如使用 accept 设置接收响应资源的类型</li><li>请求体，是需要发送给服务器的数据</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="接收响应">接收响应<a class="hash-link" href="#接收响应" title="标题的直接链接">​</a></h2><p>服务端在处理请求之后发送响应给客户端。内容有：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Date: Sat, 02 May 2020 08:21:09 GMT</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Content-Type: application/json; charset=utf-8</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Cache-Control: max-age=14400</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    "postId": 1,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    "id": 1,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    "name": "id labore ex et quam laborum",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    "email": "Eliseo@gardner.biz",</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    "body": "laudantium enim quasi est quidem magnam voluptate ipsam eos\ntempora quo necessitatibus\ndolor quam autem quasi\nreiciendis et nam sapiente accusantium"</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>HTTP 协议版本</li><li>响应状态码，表明响应的结果<ul><li>100-199 一般信息</li><li>200-299 成功响应</li><li>300-399 重定向</li><li>400-499 客户端错误</li><li>500-599 服务端错误</li></ul></li></ul><p>接下来是：</p><ul><li>状态码含义的简要描述</li><li>响应头，与请求头类似，包含额外的响应信息，比如告知客户端如何控制缓存和 cookie。</li><li>响应体（如果有）- 是服务端返回的数据</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="无状态">无状态<a class="hash-link" href="#无状态" title="标题的直接链接">​</a></h2><p>HTTP 协议是无状态的，每次客户端发出的请求都被认为是从全新的客户端发出来的，如果需要记录状态则需要使用 cookie 和 session 来保持会话，实现登录和购物车之类的功能。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="http2">HTTP/2<a class="hash-link" href="#http2" title="标题的直接链接">​</a></h2><p>现在 HTTP/2 已经可以正式开始使用了，它跟 HTTP 1.1 不同的是：</p><ul><li>数据通过二进制形式传输，不再是文本形式</li><li>多路复用 - 建立连接后一次可以发送多个 HTTP 请求</li><li>压缩 http headers，减少负载</li><li>支持 server push</li></ul><p>好了，这就是今天的前后端交互之 HTTP 协议，看完这些你应该了解前端应用发送请求和接收响应时，各项参数的含义了。</p><p>你学会了吗？如果有问题，欢迎通过下方链接参与讨论。</p>]]></content:encoded>
            <category>前端</category>
            <category>React</category>
        </item>
        <item>
            <title><![CDATA[5个技巧助你成为 CSS 大神]]></title>
            <link>https://kuizuo.cn/5-tips-to-master-css</link>
            <guid>5-tips-to-master-css</guid>
            <pubDate>Thu, 29 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[都说 CSS 很难掌握，最愁给页面编写样式，其实都是因为还没有形成一个对 CSS 宏观的了解，只要有了正确的学习方法、设计思维，再通过不断的积累，就能轻松的掌握它。接下来我会把掌握 CSS 的 5 个技巧整理一下，让你在以后编写 CSS 的时候不再发愁。]]></description>
            <content:encoded><![CDATA[<p>作为一名前端工程师，经常在写完 HTML 以后，才觉得真正的噩梦要开始了，啊，写 CSS 的时候，面对满屏乱飞的组件，真想手动给他们挪到该在位置上…… 都说 CSS 很难掌握，最愁给页面编写样式，其实都是因为还没有形成一个对 CSS 宏观的了解，只要有了正确的学习方法、设计思维，再通过不断的积累，就能轻松的掌握它。接下来我会把掌握 CSS 的 5 个技巧整理一下，让你在以后编写 CSS 的时候不再发愁。</p><p><a href="https://www.bilibili.com/video/BV1Pt4y1m7ns/" target="_blank" rel="noopener noreferrer">B 站视频 - 点击传送</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="样式调整">样式调整<a class="hash-link" href="#样式调整" title="标题的直接链接">​</a></h2><p>CSS 最基本的功能就是调整 HTML 的样式，可以设置元素的宽高、字体的颜色、大小和间距、背景颜色或图片等。这些跟传统的富文本编辑器比如 word 是一样的效果。有些属性可以一次性设置多个项目，比如<code>background</code>可以同时设置：</p><ul><li>background-color</li><li>background-image</li><li>background-origin</li><li>background-position</li><li>...等等</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="action">action<a class="hash-link" href="#action" title="标题的直接链接">​</a></h3><p>业余时间经常到像 mdn 之类的文档网站上去查它们的用法，能长不少见识。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="布局调整">布局调整<a class="hash-link" href="#布局调整" title="标题的直接链接">​</a></h2><p>CSS 的一大难题就在于对页面进行整体布局，这个时候就需要把思维放到一个整体上来，对布局进行规划，然后合理利用 css 的 flex 和 grid 来实现。</p><p>多数情况下的页面并不是规规矩矩的布局，经常会有层叠、覆盖、偏移等奇特的布局方式，所以 CSS 有脱离文档流这个概念，使用 absolute 绝对定位、fixed 固定定位、又或者是使用 float 属性都会导致元素脱离正常的文档流，正常的文档流是说元素都是从上到下，从左到右依次排列的（块级元素因为占据一整行，所以都是从上到下）。而元素脱离文档流之后，这个元素就相当于被拿走，后边的元素会占用这个元素的空间，以此类推。而这个单独被拿走的元素则可以通过像 left，top 之类的属性，根据一定的规则来自由移动，如果有重叠，则可以通过 z-index 来控制谁在上谁在下。需要注意的是，使用 tansform 属性调整元素的位置不会导致它们脱离文档流，它们所占的空间会停留在原位。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="响应式布局">响应式布局<a class="hash-link" href="#响应式布局" title="标题的直接链接">​</a></h3><p>响应式布局用 CSS 实现比较简单，通过 @media 查询屏幕宽度，根据页面的显示效果，把相应的样式覆盖，来让页面显示正常。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="action-1">action<a class="hash-link" href="#action-1" title="标题的直接链接">​</a></h3><p>要训练自己对布局的规划，可以看一下其他的网站，从简单规整的开始，逐步分析它们的布局，例如导航、头部区域、内容分区和底部信息，自己用简单的 HTML 元素方块把它规划出来，忽略组件细节，慢慢的再去看一些不规则布局的网站，再用自己的方法把它实现出来，慢慢的就会形成一种思路，看到设计稿就能知道该怎么大体规划网站的布局了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="形状特效的拆解与合并">形状、特效的拆解与合并<a class="hash-link" href="#形状特效的拆解与合并" title="标题的直接链接">​</a></h2><p>为什么说前端工程师要学一点点设计方面的知识？因为前端页面实现中会有不规则的图形、动画效果等等，而在设计师的眼中，复杂的图形都是由最基本的图形来构成的，所谓的点、线、面。比如用 CSS 画一个三角形出来，可以利用 border，边框。</p><p>我们知道一个普通的 div 元素，它有四条边，其实每条边衔接的地方都是被切掉的一角，那么可以通过把 div 的宽度和高度取消，然后通过调整边框的宽度来制作出一个三角形。</p><p>又比如说一个波纹动画，可以把它拆解成，两个同样的元素叠在一起，底下的元素先放大，然后把透明度最终过渡成 0，就有了这样的效果</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="action-2">action<a class="hash-link" href="#action-2" title="标题的直接链接">​</a></h3><p>想理解前端页面和组件的特效，先去研究一下设计的基本原则和理论，不但能加快你的开发效率，而且能减少与设计师沟通的成本和时间，变相的减少加班~</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="页面组件设计原则">页面组件设计原则<a class="hash-link" href="#页面组件设计原则" title="标题的直接链接">​</a></h2><p>在写代码之前，你需要先认真研究一下设计稿，分析哪些页面上的组件完全或者大体相同，那么可以把这些组件的样式通过 class 或者其他方式做成一个独立的整体，再通过组合多个 class 来扩展原有的样式。比如说一个按钮可能有不同的颜色、不同的大小，但是形状和文字大小间距都一样的话，可以通过一个 button class 来定义按钮的通用样式，然后利用 color class 来控制它的颜色。</p><p>另外如果你发现大多数情况下都在写重复的 CSS 代码，那么这些代码就很可能可以用于多个组件，这种情况下本着“不编写重复代码的精神”，把它单独抽离出来，作为工具 class（utility)，这样其他使用相同 CSS 属性的元素就可以直接使用它。比如说，使用 flex 布局时，可以定义一个<code>.flex</code> class，用于开启 flex，然后定义一个<code>.column</code> class 用于按列排布，还可以定义<code>.center</code>, <code>.left</code> 等 class 控制 flex 子元素的对齐方式。</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex column</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">flex1</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">flex2</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">flex3</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="action-3">action<a class="hash-link" href="#action-3" title="标题的直接链接">​</a></h3><p>在设计组件时，首先分析设计稿中哪些组件大体相同，然后把他们的公共样式抽离出来，有特殊情况时通过组合 class 来覆盖已有的样式，另外在设计组件时，只关心组件盒子内部的区域，不要设置像外边距这样的属性，它们应该由包含这个组件的容器来设置。因为相同的组件在不同容器中的位置和间距可能不同。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="css-模块化学习">CSS 模块化学习<a class="hash-link" href="#css-模块化学习" title="标题的直接链接">​</a></h2><p>要学好 CSS，可以把它分解成独立的模块，整体上 CSS 可以做的操作有：</p><ul><li>通过选择器选择对应的 html 元素，应用样式</li><li>设置元素外观，比如颜色、背景、字体等</li><li>调整元素的位置和与其他元素的间距</li><li>安排一组元素或者整个页面的布局</li><li>覆盖或继承已有样式</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="actions">actions<a class="hash-link" href="#actions" title="标题的直接链接">​</a></h3><p>把这些功能分好类，逐一突破，就不至于感觉 CSS 像大杂烩一样。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一些学习资源">一些学习资源<a class="hash-link" href="#一些学习资源" title="标题的直接链接">​</a></h2><p>学习 CSS 建议看的就是 MDN 和 W3Schools，随时查阅属性的含义，如果想看具体的特效或者图形怎么实现，可以谷歌搜索或者每天浏览一下 codepen 找找灵感。最重要的是一定要动手去写，等积累的多了之后，就会形成套路。</p><p>你学会了吗？如果有问题，欢迎通过下方链接参与讨论。</p>]]></content:encoded>
            <category>前端</category>
            <category>css</category>
        </item>
        <item>
            <title><![CDATA[搭建GitLab代码管理仓库]]></title>
            <link>https://kuizuo.cn/gitlab-code-management-environment</link>
            <guid>gitlab-code-management-environment</guid>
            <pubDate>Thu, 15 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220414235645607]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414235645607.png" alt="image-20220414235645607" class="img_ev3q"></p><p>我只要有代码的项目，都会放到 Github 上，无论公开还是私有项目。一是相当于在云端备份了一份代码，二是可以很方便的分享给别人。但对于私有项目而言存放在别人那总归不好，而且Github 时常会出现无法访问的情况（即使搭了梯子）。所以就打算搭建一个私有的仓库，基于<a href="https://gitlab.com/" target="_blank" rel="noopener noreferrer">GitLab</a>。</p><p>可以访问 <a href="https://gitlab.kuizuo.cn/kuizuo" target="_blank" rel="noopener noreferrer">kuizuo · GitLab</a> 来查看搭建效果。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="页面概览">页面概览<a class="hash-link" href="#页面概览" title="标题的直接链接">​</a></h2><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220415013028002.png" alt="image-20220415013028002" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前提">前提<a class="hash-link" href="#前提" title="标题的直接链接">​</a></h2><p>一台服务器，系统 Linux，内存 &gt;=4g</p><p>我的轻量应用服务器配置如下</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414210129510.png" alt="image-20220414210129510" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="搭建">搭建<a class="hash-link" href="#搭建" title="标题的直接链接">​</a></h2><p>服务器我选择安装<a href="https://www.bt.cn/new/index.html" target="_blank" rel="noopener noreferrer">宝塔面板</a>，对于个人项目，还是很推荐安装的，集成了一些软件商店，包括本次的主角，同时提供可视化页面操作，能省下很多敲命令的时间，<del>同时也会增加忘记命令的记忆</del>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-gitlab">安装 GitLab<a class="hash-link" href="#安装-gitlab" title="标题的直接链接">​</a></h3><p>进入宝塔面板，点击软件商店，找到<strong>GitLab 最新社区版</strong>，点击安装</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414204808143.png" alt="image-20220414204808143" class="img_ev3q"></p><p>实测等了 8 分钟，安装完毕即可查看 GitLab 的访问地址，账号密码。默认端口号 8099，记得在防火墙开放下该端口</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414213002293.png" alt="image-20220414213002293" class="img_ev3q"></p><p>进入访问地址就可以看到 GitLab 的登录页面了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改密码">修改密码<a class="hash-link" href="#修改密码" title="标题的直接链接">​</a></h3><p><a href="https://docs.gitlab.com/ee/security/reset_user_password.html#reset-the-root-password" target="_blank" rel="noopener noreferrer">Reset a user's password | GitLab</a></p><p>进入控制台（进入要稍等一段时间）</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">sudo gitlab-rails console</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>显示页面如下</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">[root@VM-4-5-centos ~]# sudo gitlab-rails console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">--------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> Ruby:         ruby 2.7.5p203 (2021-11-24 revision f69aeb8314) [x86_64-linux]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> GitLab:       14.9.3 (ec11aba56f1) FOSS</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> GitLab Shell: 13.24.0</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> PostgreSQL:   12.7</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">------------------------------------------------------------[ booted in 29.71s ]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Loading production environment (Rails 6.1.4.6)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">irb(main):001:0&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>输入如下代码</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">u=User.find(1)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">u.password='a12345678'</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">u.password_confirmation = 'a12345678'</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">u.save!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>输出结果</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">irb(main):001:0&gt; u=User.find(1)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">=&gt; #&lt;User id:1 @root&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">irb(main):002:0&gt; u.password='a12345678'</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">=&gt; "a12345678"</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">irb(main):003:0&gt; u.password_confirmation = 'a12345678'</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">=&gt; "a12345678"</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">irb(main):004:0&gt; u.save!</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">=&gt; true</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">irb(main):005:0&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>最后输入<code>exit</code>退出控制台，然后输入下方代码重启 gitlab，密码就设置完毕了</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gitlab-ctl restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>若重启或修改端口等操作后出现 502 错误，您可能需要等待 3-5 分钟才能正常访问 GitLab</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改语言">修改语言<a class="hash-link" href="#修改语言" title="标题的直接链接">​</a></h3><p>点击右上角的头像-&gt;Preferences 进入到设置，找到语言设置为简体中文，然后点击左小角的 Save changes。刷新网页语言就设置完毕了</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414215528543.png" alt="image-20220414215528543" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置https">配置HTTPS<a class="hash-link" href="#配置https" title="标题的直接链接">​</a></h3><p>gitlab内部集成了letsencrypt，因此，这里只需要启用letsencrypt，并进行一些必要的配置</p><p>打开/opt/gitlab/etc/gitlab.rb.template，修改以下内容</p><ol><li><p>在32行左右，将external_url前面的#删掉，并在单引号中填写gitlab服务器的https地址，例如<a href="https://gitlab.kuizuo.cn" target="_blank" rel="noopener noreferrer">https://gitlab.kuizuo.cn</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain"> external_url 'https://gitlab.kuizuo.cn'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>gitlab默认占用nginx80端口，所以需要更改下</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">nginx['listen_port'] = 8100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>在2434行左右（可通过搜索letsencrypt定位），修改下面几项</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">letsencrypt['enable'] = true #删除前面的#号，并将值修改为true</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">letsencrypt['contact_emails'] = ['kuizuo12@gmail.com'] #删除前面的#号,修改为自己的邮箱</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">letsencrypt['auto_renew'] = true #删除前面的#号  自动更新</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>然后重载配置（需要一点时间）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gitlab-ctl reconfigure</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后重启gitlab使配置生效</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gitlab-ctl restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>gitlab就会通过letsencrypt自动签发免费的HTTPS证书，等证书签发成功，就可以通过上面指定的域名访问代码仓库了。</p><p><strong>其实也可以在nginx创建一个站点，然后该站点配置ssl，通过反向代理到127.0.0.1:8099 也是能实现配置HTTPS的。（推荐）</strong></p><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>如果上面的操作的话，可能会导致gitlab的nginx无法启动（原因应该是修改了gitlab自带的nginx服务，或者与自带的冲突）。修改<code>/opt/gitlab/sv/nginx/run</code></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">exec chpst -P /opt/gitlab/embedded/sbin/nginx -p /var/opt/gitlab/nginx</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># 改为</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">exec chpst -P /opt/gitlab/embedded/sbin/gitlab-web -p /var/opt/gitlab/nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>重启gitlab</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gitlab-ctl start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="管理中心">管理中心<a class="hash-link" href="#管理中心" title="标题的直接链接">​</a></h2><p>点击左上角的菜单选择管理员，可在管理中心设置GitLab的相关设置。例如</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="禁止注册">禁止注册<a class="hash-link" href="#禁止注册" title="标题的直接链接">​</a></h3><p>在设置-&gt;通用-&gt;注册限制，取消勾选 <strong>已启动注册功能</strong>，这样就可以禁止注册（页面无注册按钮）。当然也可以允许，然后需要批准以及确认邮箱。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220415004207174.png" alt="image-20220415004207174" class="img_ev3q"></p><p>在概览-&gt;用户中可以查看相关用户信息。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220415012817311.png" alt="image-20220415012817311" class="img_ev3q"></p><p>至于其他设置自行研究了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建项目">创建项目<a class="hash-link" href="#创建项目" title="标题的直接链接">​</a></h2><p>点击新建项目，这里就导入我的 blog 项目。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414220221480.png" alt="image-20220414220221480" class="img_ev3q"></p><p>选择 Github 后，会提示使用 GitHub 身份验证，这里需要拿到 Github 的<a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer">Token</a></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414220333437.png" alt="image-20220414220333437" class="img_ev3q"></p><p>访问<a href="https://github.com/settings/tokens%EF%BC%8C%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AAToken%EF%BC%8C%E9%80%89%E6%8B%A9token%E6%9C%89%E6%95%88%E6%9C%9F%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%9D%83%E9%99%90%EF%BC%88%E6%88%91%E8%BF%99%E8%BE%B9%E9%80%89%E6%8B%A9%E5%85%A8%E9%80%89%EF%BC%8Ctoken%E4%B8%8D%E8%BF%87%E6%9C%9F%EF%BC%89" target="_blank" rel="noopener noreferrer">https://github.com/settings/tokens，新建一个Token，选择token有效期，以及相关权限（我这边选择全选，token不过期）</a></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414220507016.png" alt="image-20220414220507016" class="img_ev3q"></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414220738714.png" alt="image-20220414220738714" class="img_ev3q"></p><p>生成完毕后复制该 Token 到 GitLab 上，就可以看到该 Github 账号下的所有仓库了，这里我选择 blog 进行导入（导入需要一点时间）。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414220858379.png" alt="image-20220414220858379" class="img_ev3q"></p><p>导入完毕后与原仓库无特别区别</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414224639573.png" alt="image-20220414224639573" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动同步项目">自动同步项目<a class="hash-link" href="#自动同步项目" title="标题的直接链接">​</a></h3><p>点击项目中设置-&gt;仓库，找到镜像仓库。在 Git 仓库 URL 中填写格式如下</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// 原仓库git</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token literal-property property" style="color:#f92672">https</span><span class="token operator" style="color:#66d9ef">:</span><span class="token operator" style="color:#66d9ef">/</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">github</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">com</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">kuizuo</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">blog</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// 在https://后加上username@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token literal-property property" style="color:#f92672">https</span><span class="token operator" style="color:#66d9ef">:</span><span class="token operator" style="color:#66d9ef">/</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">kuizuo@github</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">com</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">kuizuo</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">blog</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>密码为上面的 Token（如果忘记的话，可以在 Github 的 Token 页中 Regenerate token），如下图所示</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414232028397.png" alt="image-20220414232028397" class="img_ev3q"></p><hr><p>基本上github能实现的操作gitlab也都能实现。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="其他功能">其他功能<a class="hash-link" href="#其他功能" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-ide在线编辑代码">Web IDE（在线编辑代码）<a class="hash-link" href="#web-ide在线编辑代码" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220415001914123.png" alt="image-20220415001914123" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="运行状态">运行状态<a class="hash-link" href="#运行状态" title="标题的直接链接">​</a></h2><p>放几张图</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414233435739.png" alt="image-20220414233435739" class="img_ev3q"></p><p>输入 top 命令，按 M 按内存排序。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220414233416223.png" alt="image-20220414233416223" class="img_ev3q"></p><p>还是挺吃内存的，毕竟安装的时候就要求 4g 内存以上。</p><p>有个轻量级的项目管理器 <a href="https://github.com/go-gitea/gitea" target="_blank" rel="noopener noreferrer">gitea</a> 不妨也是一种选择，但功能上没有Gitlab这么丰富。</p><p>对于自建git服务的选择，这里有篇文章推荐阅读 <a href="https://zhuanlan.zhihu.com/p/486410391" target="_blank" rel="noopener noreferrer">自建 Git 服务器：Gitea 与 Gitlab 部署踩坑经历与对比总结 - 知乎 (zhihu.com)</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>其实回到一开始的问题，既然Github有可能访问不了，为啥不要迁移到国内的<a href="https://gitee.com/" target="_blank" rel="noopener noreferrer">Gitee</a>上。</p><p><del>除了瞎玩瞎折腾外</del>，对于一些公司而言，他们不一定会使用这类开源的代码托管平台，而是自建一个像GitLab这样的代码仓库管理系统。此外别人的东西，多半都会有一定的限制，例如项目成员数量等等，所以才会有这次的尝试，整体体验感觉可玩性很大。</p>]]></content:encoded>
            <category>git</category>
            <category>gitlab</category>
        </item>
        <item>
            <title><![CDATA[CSS Flexbox 布局最容易理解完全教程]]></title>
            <link>https://kuizuo.cn/css-flex-box-layout</link>
            <guid>css-flex-box-layout</guid>
            <pubDate>Mon, 05 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[CSS flexbox 布局十分强大，它可以对元素进行水平和垂直方向上的对齐，也支持自由缩放，方便响应式布局的开发。这个文章就教你认识 flex-box 布局，看完之后你也能熟练的运用它！]]></description>
            <content:encoded><![CDATA[<p>在 CSS flexbox 布局出现以前，如果要控制 HTML 元素的布局，要用到很多种奇葩的方式。在水平方向上得用<code>float</code>控制左右对齐，稍一不注意，就会有浮动的元素飞来飞去~。在垂直方向上就更是百家争鸣了：要么手动计算高度然后算出中心点，要么用 <code>line-height</code> 和 <code>height</code> 的结合，要么用十之八九不生效的 <code>vertical-align</code> 属性等等等等。自从 flex-box 出现以后，一切似乎就豁然开朗了，水平垂直各种花式对齐，空间分配由你做主。当然，要用好它，用对它也不是一件容易的事，今天就给你说说 flex-box 布局，看完之后你也能熟练的运用它！（博客中的示例都是真实的 HTML 代码，可以使用 chrome 开发者工具查看属性。(此文为了演示某些 flex 示例，在小屏幕下会有横向滚动条)</p><p>2 分钟视频入门版：<a href="https://www.bilibili.com/video/BV1P7411m7Nu/" target="_blank" rel="noopener noreferrer">2 分钟掌握 CSS Grid 布局</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="开启-flexbox-布局">开启 Flexbox 布局<a class="hash-link" href="#开启-flexbox-布局" title="标题的直接链接">​</a></h2><p>假设有下边这么一个 html 结构：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">Flex 1</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex2</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">Flex 2</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex3</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">Flex 3</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>一个<code>div</code> 容器包含了三个 <code>div</code> 子元素，按照默认的布局方式进行排列。因为 <code>div</code> 是块级元素，每个 <code>div</code> 占了整个一行的空间：</p><div class="sc-bczRLJ kEeNDb"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>如果要开启容器的 flex 布局，只需要在 css 里边给 <code>.flex</code> 设置 <code>display: flex</code> 属性，同时为了演示效果，我给它加上了 100px 的高度：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ hdtUyz"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>可以看到里边的三个元素自动变成了一行，因为 flex 默认是按行进行排列的。Flexbox 布局是一维布局方式，要么按行排列，要么按列排列。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="对齐方式">对齐方式<a class="hash-link" href="#对齐方式" title="标题的直接链接">​</a></h2><p>Flex 布局有一个隐式的坐标空间，水平方向有一条主轴(main-axis)，垂直方向上有一条交叉轴(cross-axis)：</p><img loading="lazy" alt="" src="/img/2020-04-05-css-flex-box-layout/2020-04-05-19-02-36.png" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="justify-content">justify-content<a class="hash-link" href="#justify-content" title="标题的直接链接">​</a></h3><p>控制主轴（即水平方向）对齐方式使用<code>justify-content</code>属性，它有下边几种对齐方式：</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flex-start">flex-start<a class="hash-link" href="#flex-start" title="标题的直接链接">​</a></h4><p><code>flex-start</code> 是默认值，如果是从左到右的文字阅读习惯(LTR)，就是靠左对齐。因为默认的对齐方式，所以跟上边的例子没有什么区别：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token property" style="color:#f92672">justify-content</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex-start</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ gGDtOI"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="center">center<a class="hash-link" href="#center" title="标题的直接链接">​</a></h4><p>居中对齐，此时整个 flex 容器被居中到了页面中间：</p><div class="sc-bczRLJ cMlCJh"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flex-end">flex-end<a class="hash-link" href="#flex-end" title="标题的直接链接">​</a></h4><p>靠右对齐：</p><div class="sc-bczRLJ geJaNr"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="space-between">space-between<a class="hash-link" href="#space-between" title="标题的直接链接">​</a></h4><p>两端对齐，这种对齐方式是第一个和最后一个元素贴边，中间的元素平分剩余的空间：</p><div class="sc-bczRLJ eHuxVp"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="space-evenly">space-evenly<a class="hash-link" href="#space-evenly" title="标题的直接链接">​</a></h4><p>分散对齐，所有的元素都平分空间：</p><div class="sc-bczRLJ dDeecK"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="space-around">space-around<a class="hash-link" href="#space-around" title="标题的直接链接">​</a></h4><p>跟<code>space-evenly</code>类似，但是左右两边的留白为平分空间的 1/2.</p><div class="sc-bczRLJ gQCRQk"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="align-items">align-items<a class="hash-link" href="#align-items" title="标题的直接链接">​</a></h3><p>控制交叉轴方向（即垂直方向）上的对齐方式使用<code>align-items</code>属性，有下边几种对齐方式：</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stretch">stretch<a class="hash-link" href="#stretch" title="标题的直接链接">​</a></h4><p><code>stretch</code> 是 <code>align-items</code> 的默认值，它会自动把子元素拉伸成容器的高度，所以之前的例子里子元素在垂直方向上都占满了容器，只要改变容器的<code>align-items</code>的值，它就会变成内容的高度。<code>stretch</code> 对齐效果如下：</p><div class="sc-bczRLJ fuZsal"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flex-start-1">flex-start<a class="hash-link" href="#flex-start-1" title="标题的直接链接">​</a></h4><p>靠上对齐，在交叉轴开始的最上方，可以看到子元素不再占满容器高度：</p><div class="sc-bczRLJ JeffQ"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="center-1">center<a class="hash-link" href="#center-1" title="标题的直接链接">​</a></h4><p>居中对齐：</p><div class="sc-bczRLJ hNtTxZ"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flex-end-1">flex-end<a class="hash-link" href="#flex-end-1" title="标题的直接链接">​</a></h4><p>靠下对齐：</p><div class="sc-bczRLJ fFuBCr"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="baseline">baseline<a class="hash-link" href="#baseline" title="标题的直接链接">​</a></h4><p>基线对齐，如果子元素文字尺寸和行高不同，则子元素会按照文字的基线进行对齐：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-size</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ hneimS"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>如果是 <code>flex-start</code> 对齐方式：</p><div class="sc-bczRLJ gQzNwv"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="align-content">align-content<a class="hash-link" href="#align-content" title="标题的直接链接">​</a></h3><p>本小节在下边讲到折行时再介绍</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="子元素覆盖对齐方式">子元素覆盖对齐方式<a class="hash-link" href="#子元素覆盖对齐方式" title="标题的直接链接">​</a></h2><p>子元素可以通过设置 <code>align-self</code> 来控制自己在交叉轴上的对齐方式，例如把 <code>.flex3</code> 子元素在垂直方向上靠下对齐：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">align-items</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex-start</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex3</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">align-self</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex-end</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ hTyrsi"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>在水平方向上控制子元素对齐并没有<code>justify-self</code>属性，而是使用<code>margin</code>属性，通过把左或右边距设置为<code>auto</code>来控制水平对齐，比如把 <code>flex3</code> 放到最右边：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex3</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">margin-left</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> auto</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ fUCA-DE"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="排列方式">排列方式<a class="hash-link" href="#排列方式" title="标题的直接链接">​</a></h2><p>flex 支持按行排布，也支持按列排布。按列排布时，主轴和交叉轴换了方向，但是 align-items 和 justify-content 控制的轴线不变，即 <code>align-items</code> 还是控制交叉轴，<code>justify-content</code> 控制主轴：</p><img loading="lazy" alt="" src="/img/2020-04-05-css-flex-box-layout/2020-04-05-21-05-00.png" class="img_ev3q"><p>所以说，在水平方向上对齐变成了使用<code>align-items</code>，垂直方向则用<code>justify-content</code>。</p><p>要使 flex 按列排布，只需要设置：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token property" style="color:#f92672">flex-direction</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> column</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>来看几个例子：</p><p><strong>水平居中对齐</strong></p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-direction</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> column</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">align-items</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ gXHOen"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p><strong>垂直居中对齐</strong></p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-direction</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> column</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">justify-content</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ cEawPD"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>另外 flex 布局也可以支持反向按行和列布局，相当于按容器中心线进行 180 度翻转：</p><p><strong>row-reverse</strong></p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-direction</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> row-reverse</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ jkASqQ"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p><strong>column-reverse</strong></p><p>列模式下会垂直翻转：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-direction</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> column-reverse</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ cfxYAU"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="空间占比">空间占比<a class="hash-link" href="#空间占比" title="标题的直接链接">​</a></h2><p>子元素可以通过设置<code>flex</code>属性来调整空间的占比，例如让 <code>flex2</code> 在水平方向上占据其他子元素的 2 倍大小，可以设置：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex1</span><span class="token selector punctuation" style="color:#f8f8f2;font-style:italic">,</span><span class="token selector" style="color:#a6e22e;font-style:italic"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex3</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ mFxtP"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="flex-basis">Flex-basis<a class="hash-link" href="#flex-basis" title="标题的直接链接">​</a></h2><p>在介绍 flex-basis 之前，先讲一个概念 <code>main size</code>，即主轴方向的尺寸，那么，在行排布模式下，也就是水平方向的尺寸，其实就是子元素的宽度，而在列模式下，它是子元素的高度，相对应的也有<code>cross size</code>，即行模式下是子元素的高度，列模式下是宽度。
而<code>flex-basis</code>是用来设置<code>main size</code>的，它的优先级会高于<code>width</code>。<strong>它的默认值是<code>auto</code></strong>，即在行模式下，如果子元素设置了宽度，它就取自这个宽度值，没有设置的话，就是内容的宽度。使用 <code>flex-basis</code>，可以同时管理行模式下的宽度和列模式下的高度。</p><p>来看一个例子，把之前的子元素改成固定宽度，比如 <code>200px</code>：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">200</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样每个子元素宽度变为了 200px：</p><div class="sc-bczRLJ dXKtUI"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>如果再添加 <code>width</code> 属性，发现并不会生效：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">200</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">250</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ dXKtUI"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>但是，可以通过设置 <code>min-width</code>来强制设置最小宽度：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">200</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">min-width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">250</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ bmHubR"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>同理的，在列模式下，<code>flex-basis</code>变成了高度，因为容器高度为 <code>100px</code>，这里把子元素高度设置成了 <code>30px</code> 总计 <code>90px</code> 来效果：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-direction</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> column</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ evttKz"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>同样的，也可以用<code>min-height</code>来控制最小高度。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="缩放">缩放<a class="hash-link" href="#缩放" title="标题的直接链接">​</a></h2><p>（后续例子都假设是行模式）之前的小节简单说了一下 flex 子元素空间的占比，这里把缩放单独拿出来是为了说明：除了调整 flex 子元素的增长之外，也可以调整收缩，以及<code>flex</code>属性背后的原理（下一小节）。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flex-grow">flex-grow<a class="hash-link" href="#flex-grow" title="标题的直接链接">​</a></h3><p>先看一下增长，<code>flex-grow</code>，这个属性是说 flex 容器在有剩余空间的时候，子元素占据剩余空间的占比。例如，给<code>.flex2</code>子元素设置：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-grow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其它的元素保持默认的宽度（即内容的宽度，flex-basis 为 auto)，那么 <code>.flex2</code> 就会自动增长并占据整个剩余空间：</p><div class="sc-bczRLJ ddiMyz"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>如果把三个元素全部设置成 1，那么所有元素都会自动增长，并各自占据 1/3 的空间：</p><div class="sc-bczRLJ eqJJkJ"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><p>使用 <code>flex-grow</code> 就能够自由的调整元素的空间占比了，非常适合一些浮动的布局。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flex-shrink">flex-shrink<a class="hash-link" href="#flex-shrink" title="标题的直接链接">​</a></h3><p>子元素的收缩是说：当它们的宽度超过 flex 容器之后，该如何进行收缩。通过 <code>flex-shrink</code> 来设置一个数值，数值越大，收缩程度也越大，比如<code>flex-shrink: 2</code>的元素会比<code>flex-shrink:1</code>收缩的值大 2 倍：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex1</span><span class="token selector punctuation" style="color:#f8f8f2;font-style:italic">,</span><span class="token selector" style="color:#a6e22e;font-style:italic"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex3</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">600</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-shrink</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">600</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-shrink</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里为了方便演示，我把所有的 flex 子元素的 main size (宽度) 都设置成了 600px。在我的显示器下，flex 容器的宽度是 728px，三个子元素总和 1800px，显然超出了容器的宽度，那么根据上边定义的收缩规则，<code>.flex2</code> 将收缩 2 倍于 <code>.flex</code> 和 <code>.flex3</code> 收缩的空间。下边的例子中，<code>.flex1</code> 和 <code>.flex3</code> 的宽度变成了 <code>332px</code>，相比于 <code>600px</code> 收缩了 <code>268px</code>，那么 <code>.flex2</code> 就要收缩 <code>536px (268px * 2)</code> 的宽度，那么它最后就会剩下 <code>64px (600px - 536px)</code> 的宽度：</p><div class="sc-bczRLJ fvDon"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="再说-flex-属性">再说 flex 属性<a class="hash-link" href="#再说-flex-属性" title="标题的直接链接">​</a></h2><p>说完<code>flex-grow</code>、<code>flex-shrink</code> 和 <code>flex-basis</code> 之后，再来看一下这个 <code>flex</code> 属性，它其实是前边三个属性的缩写，默认值是 <code>0 1 auto</code>，即不增长，但收缩，收缩比例为 1，flex-basis 为 auto，即取自用户定义的宽度或内容的宽度。</p><p>flex 的值可以是下边几种：</p><ul><li>指定一个数字 - 例如<code>flex: 1</code>，就等同于是<code>flex: 1 1 0</code>，即自动缩放，比例为 1，flex-basis 为 0。</li><li>auto - 等同于<code>flex: 1 1 auto</code>。</li><li>指定两个数字 - 第一个为<code>flex-grow</code>，第二个，如果是数字则认为是 <code>flex-shrink</code>，如果是宽度，则是<code>flex-basis</code>。</li><li>指定三个值 - 分别为<code>flex-grow</code>，<code>flex-shrink</code> 和 <code>flex-basis</code>。</li></ul><p>所以说，通过<code>flex</code>属性可以方便的同时设置<code>flex-grow</code>、<code>flex-shrink</code> 和 <code>flex-basis</code> 这三个值。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="折行">折行<a class="hash-link" href="#折行" title="标题的直接链接">​</a></h2><p>如果子元素有固定宽度，并且超出了容器的宽度，还不允许收缩的话，那么可以使用<code>flex-wrap</code>属性来让元素进行折行排列，使得每行的元素都不超过容器的宽度。<strong>这里跟 css grid 布局的主要区别是，它无法控制单独控制行、列的占比，比如跨行、夸列，也不能自由定位元素到特定的位置</strong>。下边的示例新增了 2 个元素，一共 5 个，每个元素的 main size 为 300px，然后超出宽度后折行：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-wrap</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> wrap</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-shrink</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">300</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ jcsXRY"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div><div class="flex4">Flex 4</div><div class="flex5">Flex 5</div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="align-content-1">align-content<a class="hash-link" href="#align-content-1" title="标题的直接链接">​</a></h3><p>如果 flex 容器开启了折行，那么两行及以上的内容可以通过<code>align-content</code>属性来控制各行之间在交叉轴上的排列规则，它的取值和 <code>justify-content</code>基本相同，这里演示其中几个，还是使用之前三个元素的 flex 容器，每个容器宽度为 300px，超出后换行：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-wrap</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> wrap</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex-basis</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">300</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="center-2">center<a class="hash-link" href="#center-2" title="标题的直接链接">​</a></h4><p>垂直居中：</p><div class="sc-bczRLJ Dnkgl"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="space-between-1">space-between<a class="hash-link" href="#space-between-1" title="标题的直接链接">​</a></h4><p>两端对齐：</p><div class="sc-bczRLJ ceAIXx"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="嵌套的-flex-容器的问题">嵌套的 flex 容器的问题<a class="hash-link" href="#嵌套的-flex-容器的问题" title="标题的直接链接">​</a></h2><p>如果 HTML 结构复杂，有嵌套的 flex 容器，很有可能会遇到嵌套的 flex 容器并不能自动收缩的问题，即使设置了<code>flex-shrink</code>。比如有下边一个 html 结构：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">Flex 1</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex2</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">Flex 2</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex3</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">Flex 3</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">flex4</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      这是一段很长很长很长很长很长很长很长很长很长很长很长很长长很长很长很长很长很长长很长很长很长很长很长的文本</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里给之前的 flex 容器添加了一个新的子元素<code>.flex4</code>，这 4 个子元素都设置成<code>flex: 1</code>来平分空间，但是 <code>.flex4</code> 自己本身也是一个<code>flex</code>布局的容器，里边有一长串文本，我想让它超长之后自动显示省略号，它的 CSS 代码：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex4</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex4</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector combinator" style="color:#a6e22e;font-style:italic">&gt;</span><span class="token selector" style="color:#a6e22e;font-style:italic"> p</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">white-space</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> nowrap</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">overflow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> hidden</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">text-overflow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> ellipsis</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ edshdo"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div><div class="flex4"><p>这是一段很长很长很长很长很长很长很长很长很长很长很长很长长很长很长很长很长很长长很长很长很长很长很长的文本</p></div></div></div><p>可以看到，最后本应该占 1/4 空间的<code>.flex4</code>，因为文本不能换行，直接把 flex 容器撑开了，并且把其他的三个子元素挤成了最小空间，它本应该把文字截短并显示省略号，这是为什么呢？原来，flex 容器的 <code>min-width</code> 属性值为 auto，是由浏览器自行计算的，在这里它取了<code>&lt;p&gt;</code>元素的宽度，使得宽度成为了一整行 <code>&lt;p&gt;</code> 的宽度。那么要解决这个问题，可以把<code>.flex4</code> 这个嵌套 flex 容器的 <code>min-width</code> 改为<code>0</code>，即最小宽度是<code>0</code>，那么就可以正常收缩了：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.flex4</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">flex</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">min-width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-bczRLJ imxwoZ"><div class="flex"><div class="flex1">Flex 1</div><div class="flex2">Flex 2</div><div class="flex3">Flex 3</div><div class="flex4"><p>这是一段很长很长很长很长很长很长很长很长很长很长很长很长长很长很长很长很长很长长很长很长很长很长很长的文本</p></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>到这里，整个 flex 布局就介绍完了，还是有不少东西的，但不难。相信通过实例你一定可以掌握它的用法，下边总结一下要点：</p><ul><li>开启 flex 布局使用<code>display: flex</code>属性。</li><li>flex 布局有主轴和交叉轴，分别使用<code>justify-content</code>和<code>align-items</code>控制对齐方式。</li><li>支持按行或列进行排列，使用<code>flex-direction</code>，另外也支持<code>row-reverse</code>和<code>column-reverse</code>反向排列。</li><li>子元素可以通过<code>flex</code>简写形式，或者<code>flex-grow</code>，<code>flex-shrink</code>，<code>flex-basis</code> 来调整元素的空间占比和缩放。</li><li>通过<code>flex-wrap</code>可以设置 flex 子元素折行显示。</li><li>嵌套<code>flex</code>容器的缩放问题。</li></ul><p>你学会了吗？如果有问题，欢迎通过下方链接参与讨论。</p>]]></content:encoded>
            <category>前端</category>
            <category>React</category>
        </item>
        <item>
            <title><![CDATA[CSS 选择器优先级特异性权重详解]]></title>
            <link>https://kuizuo.cn/css-selector-specificity</link>
            <guid>css-selector-specificity</guid>
            <pubDate>Sun, 04 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[在写 CSS 的时候你一定遇到过有些样式明明写对了，也选择了正确的 html 元素去应用这些样式，可是就是不生效，这是为什么呢？因为在选择同一个 HTML 元素的时候，不同的选择器有不同的优先级，优先级低的选择器的样式会被优先级高的覆盖。]]></description>
            <content:encoded><![CDATA[<p>在写 CSS 的时候你一定遇到过有些样式明明写对了，也选择了正确的 html 元素去应用这些样式，可是就是不生效，这是为什么呢？因为在选择同一个 HTML 元素的时候，不同的选择器有不同的优先级，优先级低的选择器的样式会被优先级高的覆盖。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-css-选择器优先级">什么是 CSS 选择器优先级<a class="hash-link" href="#什么是-css-选择器优先级" title="标题的直接链接">​</a></h2><p>CSS 选择器优先级，也叫特异性，是指在给 HTML 元素应用样式时，如果有多个 CSS 选择器同时指向了这个元素，那么优先级高的选择器的样式会最终应用到这个元素上。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="不同选择器的权重">不同选择器的权重<a class="hash-link" href="#不同选择器的权重" title="标题的直接链接">​</a></h2><p>CSS 选择器的优先级是通过权重计算来得到的，选择器权重分为三大类，从高到低依次是：</p><ul><li>ID 选择器，例如: <code>#container</code></li><li>Class、属性和伪类选择器，例如：<code>.title</code>, <code>input[type="text"]</code>, <code>:hover</code></li><li>类型和伪元素选择器，例如：<code>div</code>, <code>::before</code></li></ul><p>除了选择器之外，行内样式的优先级最高，也就是通过 html 中的 style 属性定义的样式。但是它的权重也可能会被<code>!important</code>覆盖，我们在后边的例子中再介绍。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="权重的计算">权重的计算<a class="hash-link" href="#权重的计算" title="标题的直接链接">​</a></h2><p>在计算权重的时候，可以用一组向量标志来表示：<code>(0, 0, 0, 0)</code>，从左到右：</p><ul><li>第一位是行内元素，在有行内元素的时候加 1</li><li>第二位是 ID 选择器的数量</li><li>第三位是 class、属性和伪类选择器的数量</li><li>第四位是类型和伪元素选择器的数量</li></ul><p>如果计算结果权重相同，那么以定义顺序靠后的选择器优先，或者有<code>!important</code>标记优先。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>通配符选择器(<!-- -->*<!-- -->)，组合选择器(+, &gt;, ~), 伪类中的:not()选择器不参与权重的计算。</p><p>!important 标记常用来覆盖一些其他第三方库定义（如 bootstrap) 的行内样式，除此以外能用选择器优先级解决的就不用!important，因为它会打乱优先级顺序，引起调试困难。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="看几个例子">看几个例子<a class="hash-link" href="#看几个例子" title="标题的直接链接">​</a></h2><p>比如说有一个 div，它有 id 和 class 两个属性，我们要给它设置背景色：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">container</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">background</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>那么我们从 <code>id</code> 选择器开始，给它设置一个绿色，此时它的权重：(0, 1, 0, 0)：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#2ed573</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-gsnTZi dqZDbz"><div id="container" class="background"></div></div><p>如果用 class 选择器给它设置一个红色，那么它并不能生效，因为它的权重为`(0, 0, 1, 0) ：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#2ed573</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.background</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff6b81</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-gsnTZi lcedBX"><div id="container" class="background"></div></div><p>我们可以通过添加一个 ID 选择器在它的前方来提高权重，此时变成了<code>(0, 1, 1, 0)</code>，高于<code>(0, 1, 0, 0)</code>：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.background</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff6b81</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-gsnTZi eoNBAH"><div id="container" class="background"></div></div><p>如果这个 div 有行内样式，则以行内样式优先，此时它优先级变成了<code>(1, 0, 0, 0)</code>，有行内样式时，后边的外部样式选择器就不再计算了：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">container</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">background</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag special-attr attr-name" style="color:#a6e22e !important">style</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag special-attr attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag special-attr attr-value value css language-css property" style="color:#f92672">background</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:#f8f8f2">:</span><span class="token tag special-attr attr-value value css language-css" style="color:#f92672"> </span><span class="token tag special-attr attr-value value css language-css hexcode color" style="color:#f92672">#1e90ff</span><span class="token tag special-attr attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里把 div 背景设置成了蓝色：</p><div id="container" class="background" style="background:#1e90ff;height:100px;margin-bottom:24px"></div><p>要覆盖行内样式，可以使用<code>!important</code>标记：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#5352ed</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-gsnTZi iKNnKm"><div id="container" class="background" style="background:#1e90ff;height:100px"></div></div><p>再来看一个稍微复杂一点的例子，假如有这样 html 结构：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">container</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">ul</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">menu</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">li</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">item1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">item1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">项目1</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">li</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">li</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">item2</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">项目2</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">li</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">li</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">item3</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">项目3</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">li</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">ul</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果要修改<code>项目2</code> 的字体颜色，可以直接用 class 选择器，它的优先级标志为<code>(0, 0, 1, 0)</code>：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff6b81</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-gsnTZi bSdwUt"><main><div id="container"><ul class="menu"><li id="item1" class="item1">项目 1</li><li class="item2">项目 2</li><li class="item3">项目 3</li></ul></div></main></div><p>还可以添加其他不同权重的选择器到它的上边来提高优先级，为了演示效果，我把高优先级的选择器放到上边，使得顺序不成为影响优先级的因素，例如在<code>.item2</code>前加一个元素选择器<code>li</code>：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic">li</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#5352ed</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff6b81</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在它的颜色就会变成新定义的紫色，此时优先级标志为(0, 0, 1, 1)，最后一位大于之前的(0, 0, 1, 0)：</p><div class="sc-gsnTZi elLiHa"><main><div id="container"><ul class="menu"><li id="item1" class="item1">项目 1</li><li class="item2">项目 2</li><li class="item3">项目 3</li></ul></div></main></div><p>接着如果加上一个 ID 选择器放在 CSS 定义的最上边：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token selector" style="color:#a6e22e;font-style:italic"> li</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ffa502</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">// 其它低优先级选择器</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个选择器的优先级标志为(0, 1, 1, 1)：</p><div class="sc-gsnTZi cLzerf"><main><div id="container"><ul class="menu"><li id="item1" class="item1">项目 1</li><li class="item2">项目 2</li><li class="item3">项目 3</li></ul></div></main></div><p>如果再加上一个伪类选择器<code>:nth-child</code>：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token selector" style="color:#a6e22e;font-style:italic"> li</span><span class="token selector pseudo-class" style="color:#a6e22e;font-style:italic">:nth-child</span><span class="token selector punctuation" style="color:#f8f8f2;font-style:italic">(</span><span class="token selector n-th number" style="color:#ae81ff;font-style:italic">2</span><span class="token selector punctuation" style="color:#f8f8f2;font-style:italic">)</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#7bed9f</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">// 其它低优先级选择器</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>那么优先级标志变成了(0, 1, 2, 1)：</p><div class="sc-gsnTZi fhGfVz"><main><div id="container"><ul class="menu"><li id="item1" class="item1">项目 1</li><li class="item2">项目 2</li><li class="item3">项目 3</li></ul></div></main></div><p>如果把<code>:nth-child(2)</code>去掉，再来添加一个<code>.menu</code> class 选择器，那它的优先级标志也是(0, 1, 2, 1)，那这样的话，如果这个选择器在最上边，它是不能覆盖带有<code>:nth-child(2)</code>的选择器的样式的：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector class" style="color:#a6e22e;font-style:italic">.menu</span><span class="token selector" style="color:#a6e22e;font-style:italic"> li</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff4757</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">/* 这里设置了一个红色 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token selector" style="color:#a6e22e;font-style:italic"> li</span><span class="token selector pseudo-class" style="color:#a6e22e;font-style:italic">:nth-child</span><span class="token selector punctuation" style="color:#f8f8f2;font-style:italic">(</span><span class="token selector n-th number" style="color:#ae81ff;font-style:italic">2</span><span class="token selector punctuation" style="color:#f8f8f2;font-style:italic">)</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#7bed9f</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">// 其它低优先级选择器</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>结果还是上边的绿色：</p><div class="sc-gsnTZi bYfIPE"><main><div id="container"><ul class="menu"><li id="item1" class="item1">项目 1</li><li class="item2">项目 2</li><li class="item3">项目 3</li></ul></div></main></div><p>如果想让它覆盖上边的绿色，有一个小技巧，可以重复写两次<code>.menu</code> class 选择器，那么它的优先级标志就变成了<code>(0, 1, 3, 1)</code>，这样就用红色覆盖掉了绿色：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector id" style="color:#a6e22e;font-style:italic">#container</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector class" style="color:#a6e22e;font-style:italic">.menu</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.menu</span><span class="token selector" style="color:#a6e22e;font-style:italic"> li</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.item2</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff4757</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">// 其它低优先级选择器</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="sc-gsnTZi wqmQA"><main><div id="container"><ul class="menu"><li id="item1" class="item1">项目 1</li><li class="item2">项目 2</li><li class="item3">项目 3</li></ul></div></main></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>从上边的例子来看，计算 CSS 选择器优先级只需要用一个向量标志来统计不同选择器的数量就可以了，然后逐位进行比较，只要最左边的那一位大的，优先级就一定高，不用再比低位了。掌握了这个权重的计算方法之后相信你也不会再发愁为什么有些样式无法被覆盖了，赶紧用起来吧！</p>]]></content:encoded>
            <category>前端</category>
            <category>CSS</category>
        </item>
        <item>
            <title><![CDATA[vite+vue3搭建uniapp开发环境]]></title>
            <link>https://kuizuo.cn/vite-vue3-build-uniapp-environment</link>
            <guid>vite-vue3-build-uniapp-environment</guid>
            <pubDate>Sat, 27 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[uniapp]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://img.kuizuo.cn/uniapp.png" alt="uniapp" class="img_ev3q"></p><p>最近想搞个移动端或小程序的 Vue3 项目，所以选择跨端开发平台就显得十分重要。在业内主要有两个跨端开发平台，Taro 与 uniapp，但 uniapp 貌似对 vue3 的支持不是特别友好。所以让我在 Taro 和 uniapp 之间抉择了一段时间，最终还是尝试选择相对熟悉的 uniapp 来进行开发。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>前排提醒</h5></div><div class="admonition-content"><p>目前 uniapp 对 Vue3 的支持还处于 alpha 版，即开发阶段，大概率是会遇到很多问题的。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="开发环境搭建">开发环境搭建<a class="hash-link" href="#开发环境搭建" title="标题的直接链接">​</a></h2><p>建议安装 HBuilderX，主要是 uni cli 在 APP 平台仅支持生成离线打包的 wgt 资源包，不支持云端打包生成 apk/ipa，并且也不便配置一些打包后的参数。</p><p>这里建议安装 Alpha 版，后文会说明缘由。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>在 HBuilderX 正式版中是无法直接创建 Vue3 项目的，而 Alpha 版有 Vue2 和 3 可供选择，但创建的自带的模板大部分的写法还是 vue2 的写法（无 setup 语法糖），所以这时候要么改代码自建，要么使用官方所提供的 <a href="https://uniapp.dcloud.io/worktile/CLI.html#%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B" target="_blank" rel="noopener noreferrer">Vue3 模板</a></p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220327000608783.png" alt="image-20220327000608783" class="img_ev3q"></p></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain"># 创建以 javascript 开发的工程</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx degit dcloudio/uni-preset-vue#vite my-vue3-project</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># 创建以 typescript 开发的工程</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx degit dcloudio/uni-preset-vue#vite-ts my-vue3-project</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当然，有可能会下载失败，可以直接访问 <a href="https://gitee.com/dcloud/uni-preset-vue/repository/archive/vite-ts.zip" target="_blank" rel="noopener noreferrer">gitee</a>下载模板。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="项目结构">项目结构<a class="hash-link" href="#项目结构" title="标题的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">|-- src</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- App.vue</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- env.d.ts</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- main.ts</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- manifest.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- pages.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- uni.scss</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- pages</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |   |-- index</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |       |-- index.vue</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    |-- static</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        |-- logo.png</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">|-- index.html</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">|-- package-lock.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">|-- package.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">|-- postcss.config.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">|-- tsconfig.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">|-- vite.config.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下载完毕，开始安装依赖，接着就可以开始测试了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="运行编译">运行编译<a class="hash-link" href="#运行编译" title="标题的直接链接">​</a></h2><p>在运行之前，首先将<strong>vuex</strong>包给移除，不然将会有如下提示，总之就是不推荐使用的意思，而且要使用状态管理也推荐使用 pinia。所以执行 <code>yarn remove vuex</code> 吧</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">(node:26968) [DEP0148] DeprecationWarning: Use of deprecated folder mapping "./" in the "exports" field module resolution of the package at F:\Uniapp\my-vue3-project1\node_modules\vuex\package.json.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Update this package.json to use a subpath pattern like "./*".</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="h5">H5<a class="hash-link" href="#h5" title="标题的直接链接">​</a></h3><p>运行编译都正常</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="app">APP<a class="hash-link" href="#app" title="标题的直接链接">​</a></h3><p>使用<code>npm run dev:app</code>后就会发现，终端一直卡在如下界面无法继续。（后面测试发现，除了 H5 能正常运行，其他都会卡住）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">编译器版本：3.4.3（vue3）</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">请注意运行模式下，因日志输出、sourcemap 以及未压缩源码等原因，性能和包体积，均不及发行模式</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">。</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">正在编译中...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">vite v2.8.6 building for development...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DONE  Build complete. Watching for changes...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ready in 1554ms.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后呢？？？</p><p>算了，就用 HBuilderX 的 cli 先运行到手机或模拟器，然后后打开 app 的时候提示如下错误，点击忽略后发现应用无法正常运行。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220326224649953.png" alt="image-20220326224649953" class="img_ev3q"></p><p>查看了下我本地的 HBuilderX 版本是正式版 v3.3.13，而该 Vue3 的模板的 Alpha 版 v3.4.3</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220326225748608.png" alt="image-20220326225748608" class="img_ev3q"></p><p>好家伙，官方提供的模板都直接使用 Alpha 版，无奈只好点击 <a href="https://ask.dcloud.net.cn/article/35627" target="_blank" rel="noopener noreferrer">查看详情</a> 后问题解决办法。最终测试后，建议是使用最新版，即 Alpha 版本，于是替换了本地正式版的 HbuilderX，应用便能正常运行了。</p><p>既然开发环境下能正常运行，那就试下打包。由于 uniapp 打包安卓应用只能打包成 APP 资源，要打包成 apk，要么创建一个 Android Studio 工程，然后将 APP 资源放入并打包成 apk，要么使用云打包（而云打包又是只有 HBuilder 才有的功能）。如果本地没有 Android Studio 相关环境，建议还是使用云打包（简单方便），这里就不演示下打包过程了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="小程序">小程序<a class="hash-link" href="#小程序" title="标题的直接链接">​</a></h3><p>这里只测试了微信小程序，在上面 app 的处理完之后，微信小程序也是正常运行，不过至于与上面 Vue3 模板和 HbuilderX 正式版有无关系我就不得而知了，也懒得重装测试了。不过猜测应该与上面无关，毕竟是与手机的 SDK 有关。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="组件库">组件库<a class="hash-link" href="#组件库" title="标题的直接链接">​</a></h2><p>uniapp 官方中提供了一个 uni-ui 的组件库，但有一个 uniapp 相对知名的组件库 uview，并且相对前者来说更易上手实用，但当我尝试用 HBuilderX 导入时，却出现下方提示。</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220327002827115.png" alt="image-20220327002827115" class="img_ev3q"></p><p>很显然，uview 并不支持 vue3，但在社区中找到了份同时支持 Vue3.0 和 Vue2.0 的<a href="https://ext.dcloud.net.cn/plugin?name=vk-uview-ui" target="_blank" rel="noopener noreferrer">uView</a>，但测试后最终已失败告终。</p><p>在社区中也搜到了 <a href="https://ext.dcloud.net.cn/plugin?id=556" target="_blank" rel="noopener noreferrer">ThorUI 组件库</a> 但貌似需要会员收费，果断放弃且没有测试。</p><p>然后想到 Taro 中还有 nutui，于是我便开始尝试了一下，不出所料，支持 Vue3 组件库，肯定是支持的。演示如下</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20220327005629618.png" alt="image-20220327005629618" class="img_ev3q"></p><p>但很遗憾，这里的支持也只是局限于 h5 开发。官方也有声明只能开发 h5</p><blockquote><p>@nutui/nutui@next 基于 Vue3 视觉风格 JD APP 10.0 规范 ，只能开发 h5
@nutui/nutui-taro 基于 Vue3 视觉风格 JD APP 10.0 规范 ，必须基于 taro + vue3 框架 进行开发多端（多端指一套代码 部署多端环境 微信小程序 h5、等第三方小程序）</p></blockquote><p>而且想要多端开发，也必须基于 taro + vue3 框架，所以在 uniapp 上的 app 与小程序上自然无法运行（已测试）</p><p>所以说一开始在 uniapp 和 taro 中的选择中，为啥不使用 Taro 呢？而且还支持 Vue3（相比 uniapp 而言）？</p><p>最终组件库的选择是 uniapp 官方的 uni-ui。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用-vscode-开发">使用 VSCode 开发<a class="hash-link" href="#使用-vscode-开发" title="标题的直接链接">​</a></h2><p>HBuilder 给我代码编写体验并不友好，所以将 uniapp 的项目转 vscode 进行开发，并且使用到 npm 包。</p><p>首先创建一个 vite+vue3 项目（或者使用一开始介绍的官方提供的 Vue3 模板，主要是有 cli，需要自行在安装），然后将原 src 目录给删除，替换成 uniapp 创建的项目根目录。但还需要做以下操作</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-sass">安装 sass<a class="hash-link" href="#安装-sass" title="标题的直接链接">​</a></h3><p>vite 要支持 sass 只需要安装 sass 的依赖即可</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm install sass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="允许-js-文件">允许 js 文件<a class="hash-link" href="#允许-js-文件" title="标题的直接链接">​</a></h3><p>由于使用了 ts，如果项目中存在 js 文件，将会警告，可以在 tsconfig.json 中添加<code>"allowJs": true</code>即可</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="组件语法提示">组件语法提示<a class="hash-link" href="#组件语法提示" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm i @dcloudio/uni-helper-json @types/uni-app @types/html5plus -D</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但发现对于 uni-ui 组件库的代码提示并不友好，大概率是需要局部引用组件，我这里并未使用<a href="https://www.npmjs.com/package/@dcloudio/uni-ui" target="_blank" rel="noopener noreferrer">npm 包</a>的方式导入，而是采用官方的 uni_modules，不过组件库的代码提示的问题不是很大，查阅文档即可解决。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="导入代码块">导入代码块<a class="hash-link" href="#导入代码块" title="标题的直接链接">​</a></h3><p><a href="https://github.com/zhetengbiji/uniapp-snippets-vscode" target="_blank" rel="noopener noreferrer">uni-app 代码块（vscode） (github.com)</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="找不到模块appvue或其相应的类型声明">找不到模块“./App.vue”或其相应的类型声明<a class="hash-link" href="#找不到模块appvue或其相应的类型声明" title="标题的直接链接">​</a></h3><p>在 src 目录下创建<code>env.d.ts</code>文件，填入以下内容即可</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">/// &lt;reference types="vite/client" /&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">module</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'*.vue'</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> DefineComponent </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'vue'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/ban-types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> component</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DefineComponent</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">any</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> component</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后就是把一些<code>#ifndef VUE3</code>不是 vue3 的代码块，以及部分 js 文件改写成 ts 文件即可。这里把我修改后的模板上传到 github 上，有需要的可自行下载：<a href="https://github.com/kuizuo/vite-vue3-uniapp" target="_blank" rel="noopener noreferrer">kuizuo/vite-vue3-uniapp (github.com)</a></p><p>如果不想使用官方的 vue3 模板，这里也有篇文章介绍如何迁移</p><p><a href="https://zhuanlan.zhihu.com/p/268206071" target="_blank" rel="noopener noreferrer">迁移 HbuilderX 的 uniapp 项目到主流的前端 IDE 开发（支持 VS Code 等编辑器/IDE）</a></p><p>不过最终如果要在 app 或小程序端运行，还是得打开 HBuilder。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>整个过程下来，其实还是 uniapp 对 Vue3 支持不够友好，加上生态没能及时更新。并且官方提供的 Vue3 模板也存在一定问题。</p><p>但最终还是使用 uniapp 来进行开发，一是对 Vue3 足够了解加上使用过 uniapp，二是 Taro 对 Vue3 是支持了，但是又该如何编译成 App 这是我主要需求的，最主要还是不想踩一遍 Taro 的坑了。</p>]]></content:encoded>
            <category>vue</category>
            <category>vite</category>
            <category>uniapp</category>
            <category>develop</category>
        </item>
        <item>
            <title><![CDATA[React State 和 Event教程 - 制作渐变背景生成器]]></title>
            <link>https://kuizuo.cn/learn-react-event-and-state</link>
            <guid>learn-react-event-and-state</guid>
            <pubDate>Sun, 21 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Hello! 今天来带你走进 React 的大门！我第一次听说 React 是我在美国读研的时候，室友选了 web programming 这节课，然后遇到了关于 react 的好多问题...]]></description>
            <content:encoded><![CDATA[<p>Hello, 今天教你写一个渐变背景生成器。我会用这个例子来解释 react 的 state，状态管理，还有事件处理。这个小工具提供了两个颜色选择器，分别可以选择渐变的两个颜色，渐变的角度是 75 度，线性渐变。另外还有一个重置按钮可以把渐变恢复成初始值。</p><p><a href="https://github.com/MISfang/react-examples" target="_blank" rel="noopener noreferrer">源码：Github - React-Examples</a></p><p><a href="/docs/videos/react/react-state-event-exmaple">示例和视频</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-简介">State 简介<a class="hash-link" href="#state-简介" title="标题的直接链接">​</a></h2><p>首先看一下什么是 state，<a href="https://zxuqian.cn/learn-react-props-buttons" target="_blank" rel="noopener noreferrer">上篇文章</a>讲了 props：</p><ol><li>用来给组件传递参数，组件会根据这些 props 来控制它自己生成的 html</li><li>它的值不会发生变化，只要传给他的一个固定的值，那么它就会永远是这个值。</li></ol><p>如果想让一个属性根据条件发生变化的话。那么这里就要用 state 状态。状态就是说这个组件可能在<strong>某一个时间或者是发生了什么事件之后</strong>，会发生一些变化，就拿这个例子来说，咱们要展示一个渐变的背景，那么这个<strong>背景颜色</strong>就要根据用户所选择的颜色来发生改变，这个颜色因为是变化的，所以说它就要定义成一个 state，它的值是在用户选择完颜色之后来进行更新的。</p><p>使用 State 跟普通 JavaScript 相比，它的好处是：</p><ul><li>在组件内部管理状态，代码封装性好，出错的话也容易定位到问题组件。</li><li>数据和展示分离，只需要修改 state 的值，就能更新对应的组件。</li><li>state 可以通过 props 向下传递给其他组件，只要 state 改变，所有使用它的组件都会刷新。</li></ul><p>接下来看一下这个例子怎么实现。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建-react-工程">创建 React 工程<a class="hash-link" href="#创建-react-工程" title="标题的直接链接">​</a></h2><p>首先还是要创建一个 raect 工程，用 create react app。</p><ol><li><p>使用 create-react-app 创建一个工程：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">yarn</span><span class="token plain"> create react-app react-gradient-bg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>等同于</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx create-react-app react-gradient-bg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建-gradient-组件">创建 Gradient 组件<a class="hash-link" href="#创建-gradient-组件" title="标题的直接链接">​</a></h2><p>工程创建好之后，咱们在 src 里面创建一个新的组件 (也就是文件夹) 叫 <code>Gradient</code>。</p><blockquote><p>这个简单的示例的代码整个都在这个 gradient 组件里边。他有两个颜色选&gt;择器。然后一个重置按钮。整个背景是由用户选择的两个颜色组成的一个 75 度的渐变。当用户在选择颜色的时候，这个背景会动态的根据用户选择的颜色发生变化，点击重置按钮之后，背景颜色会变成初始的默认值。</p></blockquote><p>咱们先来看 html 的结构。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="编写-html-结构">编写 html 结构<a class="hash-link" href="#编写-html-结构" title="标题的直接链接">​</a></h3><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">Gradient</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">container</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputGroup</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">请选择第一个颜色</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputColor</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputGroup</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">请选择第二个颜色</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color2</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputColor</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">button</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">重置为默认</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里：</p><ul><li>定义了两个 <code>type</code> 为 <code>color</code>的 <code>input</code>，这是 html 原生的颜色选择器组件， 如果浏览器不支持就会变成颜色输入框，可以输入#FFFFFF 之类的颜色值。</li><li>定义了一个重置按钮。</li><li>样式可以在源代码中查看。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建-state">创建 state<a class="hash-link" href="#创建-state" title="标题的直接链接">​</a></h3><p>创建 state 用 react 内置的 <code>useState</code> hook。</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// 设置两个 state，给默认值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">color1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> setColor1</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">useState</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"#00F260"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">color2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> setColor2</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">useState</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"#0575E6"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>它接受一个参数，是 state 的默认值，然后返回一个数组，数组里面有两个元素，第 1 个元素是 state 的值，然后第 2 个元素是改变这个 state 的函数。</li><li>这里定义了两个 color state。</li></ul><p>接着给最外层容器 div 设置一个 style，让它的背景色为渐变的，使用这两个 color 的值：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">container</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">        </span><span class="token tag script language-javascript literal-property property" style="color:#f92672">background</span><span class="token tag script language-javascript operator" style="color:#66d9ef">:</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token tag script language-javascript template-string string" style="color:#a6e22e">linear-gradient(75deg, </span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">${</span><span class="token tag script language-javascript template-string interpolation" style="color:#f92672">color1</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">}</span><span class="token tag script language-javascript template-string string" style="color:#a6e22e">, </span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">${</span><span class="token tag script language-javascript template-string interpolation" style="color:#f92672">color2</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">}</span><span class="token tag script language-javascript template-string string" style="color:#a6e22e">)</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">      </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">    </span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="处理-input-事件">处理 input 事件<a class="hash-link" href="#处理-input-事件" title="标题的直接链接">​</a></h3><p>接下来就是处理这两个颜色状态的改变，表单元素 input、 select 等会触发 <code>onChange</code> 这个事件，也就是说当用户在里边输入值或者是选择选项的时候。</p><p>咱们可以在这个组件的函数里边，先定义一个处理函数。比如说叫 <code>handleInputChange</code>：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">handleInputChange</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> name</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> value </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// 使用 name 区分，这里也可以用 switch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">name </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"color1"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">setColor1</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">name </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"color2"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">setColor2</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>react 会在触发事件的时候，给事件处理函数传递一个参数 <code>event</code>，代表这个事件它的本身，但是这个事件是合成的，它不是原生的 html 的 event，不过它里面的属性和 html 的基本上一样。</li><li>这个 <code>event</code> 里面有一个 <code>target</code> 属性，就是说是谁触发了一个事件，那这里就是这两个 input。</li><li>获取到 input 的 target 之后就可以获取到 input 标签里面的属性，比如说 <code>name</code> 和 <code>value</code>。</li><li>后面可以根据 name 来区分是哪个 input 触发的事件，然后把新的颜色用 <code>setXXX</code> 的函数，来把颜色更新。</li></ul><p>最后把处理函数和状态的值添加到 input 组件上，注意在 JSX 里边，html 的属性都是驼峰命名法，不是全部小写的那种：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputGroup</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">请选择第一个颜色</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputColor</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">color1</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">handleInputChange</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputGroup</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">请选择第二个颜色</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">label</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color2</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">inputColor</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">color2</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">handleInputChange</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="处理按钮事件">处理按钮事件<a class="hash-link" href="#处理按钮事件" title="标题的直接链接">​</a></h3><p>定义按钮的处理函数，用来重置颜色为默认值：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// 重置按钮事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">handleClick</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">setColor1</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"#00F260"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">setColor2</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"#0575E6"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>添加到按钮：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">handleClick</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">button</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">  重置为默认</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="箭头函数形式">箭头函数形式<a class="hash-link" href="#箭头函数形式" title="标题的直接链接">​</a></h3><p>上边的处理函数，也可以使用箭头函数，直接在标签处定义内联的事件处理：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag comment" style="color:#8292a2;font-style:italic">//...</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag attr-name" style="color:#a6e22e !important">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color1</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag attr-name" style="color:#a6e22e !important">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript parameter" style="color:#f92672">e</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript arrow operator" style="color:#66d9ef">=&gt;</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript function" style="color:#e6db74">setColor1</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">(</span><span class="token tag script language-javascript" style="color:#f92672">e</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">target</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">value</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">)</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672"></span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">input</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag comment" style="color:#8292a2;font-style:italic">//...</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag attr-name" style="color:#a6e22e !important">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">color2</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag attr-name" style="color:#a6e22e !important">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript parameter" style="color:#f92672">e</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript arrow operator" style="color:#66d9ef">=&gt;</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript function" style="color:#e6db74">setColor2</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">(</span><span class="token tag script language-javascript" style="color:#f92672">e</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">target</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">value</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">)</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672"></span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">   </span><span class="token tag attr-name" style="color:#a6e22e !important">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">(</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">)</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript arrow operator" style="color:#66d9ef">=&gt;</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">      </span><span class="token tag script language-javascript function" style="color:#e6db74">setColor1</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">(</span><span class="token tag script language-javascript string" style="color:#a6e22e">"#00F260"</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">)</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">;</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">      </span><span class="token tag script language-javascript function" style="color:#e6db74">setColor2</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">(</span><span class="token tag script language-javascript string" style="color:#a6e22e">"#0575E6"</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">)</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">;</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">   </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672"></span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">   重置为默认</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h3><p>好，这个渐变背景生成器现在就把它写完了，你也可以把它扩展一下，比如可以自定义渐变的角度，选择多个颜色等等。今天用它把 React 的 state 和 event 两个概念讲了一下，也很简单，是不是？来复习一下需要注意的几个点：</p><ul><li>Props 的值是只读不可变的，改变它的值不会引起组件更新。</li><li>需要改变的值要用 state，使用 useState hook 来创建。</li><li>事件处理中的 Event 参数是合成的，属性和原生的 event 基本一样。</li></ul><p>你学会了吗？如果有问题就到 B 站和微博给我留言吧。</p>]]></content:encoded>
            <category>前端</category>
            <category>React</category>
        </item>
        <item>
            <title><![CDATA[搭建Electron+Vue3开发环境]]></title>
            <link>https://kuizuo.cn/electron-vue3-development-environment</link>
            <guid>electron-vue3-development-environment</guid>
            <pubDate>Wed, 17 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220316204205165]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://img.kuizuo.cn/image-20220316204205165.png" alt="image-20220316204205165" class="img_ev3q"></p><p>之前用 electron-vue 写过一个半成品的桌面端应用，但是是基于 Vue2 的，最近又想重写点桌面端应用，想要上 Vue3+TypeScript，于是便有了这篇文章总结下具体的搭建过程。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vue-cli">Vue Cli<a class="hash-link" href="#vue-cli" title="标题的直接链接">​</a></h2><p>Vue CLI 有一个插件<code>vue-cli-plugin-electron-builder</code>，可以非常方便的搭建 electron 环境。</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm i @vue/cli -g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">vue create my-app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>根据自己项目的需求选择对应的依赖（例如 Babel，TS，Vuex 等等）</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">Vue CLI v5.0.3</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Please pick a preset: Manually select features</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Check the features needed for your project: Babel, TS, Vuex, CSS Pre-processors, Linter</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Choose a version of Vue.js that you want to start the project with 3.x</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Use class-style component syntax? Yes</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Use Babel alongside TypeScript (required for modern mode, auto-detected polyfills, transpiling JSX)? Yes</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default): Sass/SCSS (with dart-sass)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Pick a linter / formatter config: Prettier</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Pick additional lint features: Lint on save</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Where do you prefer placing config for Babel, ESLint, etc.? In package.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Save this as a preset for future projects? No</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Vue CLI v5.0.3</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">✨  Creating project in F:\Electron\my-app.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">🗃  Initializing git repository...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">⚙️  Installing CLI plugins. This might take a while...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-vue-cli-plugin-electron-builder">安装 vue-cli-plugin-electron-builder<a class="hash-link" href="#安装-vue-cli-plugin-electron-builder" title="标题的直接链接">​</a></h3><p><a href="https://nklayman.github.io/vue-cli-plugin-electron-builder/" target="_blank" rel="noopener noreferrer">Vue CLI Plugin Electron Builder (nklayman.github.io)</a></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">cd my-app</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">vue add electron-builder</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安装过程中会提示你选择 Electron 的版本，选择最新版本即可</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="启动项目">启动项目<a class="hash-link" href="#启动项目" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm run electron:serve</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参考文章：<a href="https://juejin.cn/post/6983843979133468708" target="_blank" rel="noopener noreferrer">Electron + Vue3 开发跨平台桌面应用【从项目搭建到打包完整过程】 - 掘金 (juejin.cn)</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="坑">坑<a class="hash-link" href="#坑" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">error  in ./src/background.ts</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Module build failed (from ./node_modules/ts-loader/index.js):</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">TypeError: loaderContext.getOptions is not a function</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我测试的时候，<code>@vue/cli-plugin-typescript</code>版本为<code>~5.0.0</code>，就会导致编译类型出错，将 package.json 中改为<code>"@vue/cli-plugin-typescript": "~4.5.15"</code>，即可正常运行（但还是会有 DeprecationWarning）</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vite">Vite<a class="hash-link" href="#vite" title="标题的直接链接">​</a></h2><p>上面是使用 Vue Cli 脚手架进行开发，如果想上 Vite 的话，就需要用 Vite 来构建项目，然后安装 electron 的相关依赖。</p><p>这个不是作为重点，因为很多大佬都已经写了现成的模板，完全可以自行借鉴学习，就贴几个阅读过的几篇文章</p><p><a href="https://dev.to/brojenuel/vite-vue-3-electron-5h4o" target="_blank" rel="noopener noreferrer">Vite + Vue 3 + electron + TypeScript - DEV Community</a></p><p><a href="https://zhuanlan.zhihu.com/p/424202065" target="_blank" rel="noopener noreferrer">2021 年最前卫的跨平台开发选择！vue3 + vite + electron - 知乎 (zhihu.com)</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="现成的模板">现成的模板<a class="hash-link" href="#现成的模板" title="标题的直接链接">​</a></h3><p>均可在 github 上搜索到</p><ul><li><p><a href="https://github.com/caoxiemeihao/vite-react-electron" target="_blank" rel="noopener noreferrer">vite-react-electron</a> (推荐)</p></li><li><p><a href="https://github.com/caoxiemeihao/electron-vue-vite" target="_blank" rel="noopener noreferrer">electron-vue-vite</a> (推荐)</p></li><li><p><a href="https://github.com/cawa-93/vite-electron-builder" target="_blank" rel="noopener noreferrer">vite-electron-builder</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="electron-vite-脚手架推荐">electron-vite 脚手架（推荐）<a class="hash-link" href="#electron-vite-脚手架推荐" title="标题的直接链接">​</a></h3><p>当然也可以使用脚手架，可选择 React 与 Vue，实际上也就是创建上面的前两个模板</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm create electron-vite</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="现有项目使用-electron">现有项目使用 electron<a class="hash-link" href="#现有项目使用-electron" title="标题的直接链接">​</a></h2><p>TODO...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>因为 Electron 本质上还是一个浏览器，无论是 Vue 还是 React 开发也好，在传统网页开发的时候都有对应的调试地址，如<a href="http://127.0.0.1:3000%EF%BC%8C%E8%80%8Celectron%E7%9A%84%E5%81%9A%E6%B3%95%E6%97%A0%E9%9D%9E%E5%B0%B1%E6%98%AF%E5%BC%80%E5%90%AF%E4%B8%80%E4%B8%AA%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%8C%E7%84%B6%E5%90%8E%E5%92%8C%E6%AD%A3%E5%B8%B8%E7%9A%84%E7%BD%91%E9%A1%B5%E5%BC%80%E5%8F%91%E4%B8%80%E6%A0%B7%EF%BC%8C%E5%B9%B6%E6%8F%90%E4%BE%9B%E6%A1%8C%E9%9D%A2%E7%AB%AF%E7%9A%84api%E4%BD%BF%E7%94%A8%E3%80%82" target="_blank" rel="noopener noreferrer">http://127.0.0.1:3000，而electron的做法无非就是开启一个浏览器，然后和正常的网页开发一样，并提供桌面端的api使用。</a></p><p>目前社区两大 Vue+Electron 的脚手架主要是<a href="https://github.com/SimulatedGREG/electron-vue" target="_blank" rel="noopener noreferrer">electron-vue</a>和<a href="https://github.com/nklayman/vue-cli-plugin-electron-builder" target="_blank" rel="noopener noreferrer">vue-cli-plugin-electron-builder</a>，更多 electron 的开源项目都遵循着前者的项目结构，像上面的模板也就是。</p><p>以上就是我所使用 Vue3 来开发 Electron 的环境搭建过程，总体来说从 Electron 除了应用体积过大，对于前端开发者来说是非常友好的，既然环境配置完，那么现在就可以开始好好的编写桌面端应用了。</p>]]></content:encoded>
            <category>electron</category>
            <category>vue</category>
            <category>vite</category>
        </item>
        <item>
            <title><![CDATA[React Props 教程 - 制作一个按钮]]></title>
            <link>https://kuizuo.cn/learn-react-props-buttons</link>
            <guid>learn-react-props-buttons</guid>
            <pubDate>Mon, 15 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Rect Props 是编写可复用组件的核心，可以利用 Prop 让组件接收不同的参数，然后根据这些参数作出不同的表现，如形状、颜色等。]]></description>
            <content:encoded><![CDATA[<p>你在写 HTML 页面的时候肯定知道，html 标签的属性都是固定的，比如 <code>a</code> 标签的 <code>href</code>, <code>input</code> 里边的 <code>type</code> 属性。这些属性都是内置的，不方便扩展和复用。而用 React 创建组件的话，可以给它定义一些更符合语义和逻辑的属性，比如颜色、尺寸等。<!-- -->这些属性在 React 里边叫做 props，你可以自己定义这些属性将会影响到组件的哪些部分。这样的一个组件，通过给它一个合适的名字，比如 Button，那么所有按钮的展现都可以用它来实现，只需要改变它的属性就可以展示为不同的样式。那今天我就教你定义一个这样的按钮组件，它有默认的背景色、文字颜色、还有实心和线框样式，后边通过属性，props，来控制它是蓝色、红色还是黑色，然后利用另一个属性来控制它是实心的背景还是线框的。好，那咱们开始吧。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="你将学到的">你将学到的<a class="hash-link" href="#你将学到的" title="标题的直接链接">​</a></h2><p>上一张效果图：</p><img loading="lazy" alt="" src="/img/2020-03-15-learn-react-props-buttons/2020-03-15-19-02-33.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建-react-工程">创建 React 工程<a class="hash-link" href="#创建-react-工程" title="标题的直接链接">​</a></h2><ol><li><p>使用 create-react-app 创建一个工程：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">yarn</span><span class="token plain"> create react-app react-button-props</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>等同于</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx create-react-app react-button-props</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>添加<code>classnames</code>依赖（稍后解释它的作用）</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">yarn</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">add</span><span class="token plain"> classnames</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建-button-组件">创建 Button 组件<a class="hash-link" href="#创建-button-组件" title="标题的直接链接">​</a></h2><ol><li><p>在 <code>src</code> 下边新建一个 <code>Button</code> 文件夹。组件应该有自己独立的文件夹，所有跟这个组件有关的文件，比如 css、hooks 等都放到一起，这样在查看一个组件源码时，相应的文件都会在一块，方便查找。另外也方便和其他人共享这个组件，它是一个独立的整体。</p></li><li><p>在 <code>Button</code> 文件夹创建 <code>index.js</code> 文件，里边放用来定义按钮组件的代码。</p></li><li><p>在 <code>Button</code> 文件夹下创建 <code>style.modules.css</code> 文件，在这里咱们先用普通的 css 来定义按钮的样式，后续的教程里我再给你介绍<code>styled-components</code>。它是一个 css-in-js 的解决方案</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>CSS modules 的作用</h5></div><div class="admonition-content"><p>这个带 modules 的 css 文件使用了 <code>css modules</code> 库，它是 create-react-app 工具里自带的，用来避免全局 class 名字冲突，在普通 css 下，如果不同的样式文件都同时使用了 <code>.button</code> 这样的 class 名，那么后面的就会把前面的覆盖。使用了<code>css modules</code>之后，它会自动生成随机的 class 名字。这样这个组件里边定义的 class 就不会被其他组件定义的同名的 class 给覆盖。当然你也可以不用它，有些全局的 css 可以直接定义在普通的 css 文件里。</p></div></div></li><li><p>编写 <code>button</code> 组件的代码：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"react"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">Button</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token maybe-class-name">Button</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>react 中的组件默认都会被传递一个 <code>props</code> 属性，里边会默认包含一个 children 属性，也就是说在使用 <code>&lt;Button /&gt;</code> 组件时，两个标签中间所有的代码都会当作 children 传递进来。上边的代码，也可以使用 rest 操作符简化：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">Button</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter punctuation" style="color:#f8f8f2">{</span><span class="token parameter"> children </span><span class="token parameter punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>比如：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">App</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// 作为演示，我在 App 组件里又定义了一个 Button 组件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">Button</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter punctuation" style="color:#f8f8f2">{</span><span class="token parameter"> children </span><span class="token parameter punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>删除 App 的 return 中的所有的代码，导入 Button 组件，然后把它写在 return 里边：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">App</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">默认按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="编写-button-默认样式">编写 Button 默认样式<a class="hash-link" href="#编写-button-默认样式" title="标题的直接链接">​</a></h2><ol><li><p>打开 Button 组件下的 <code>style.modules.css</code> 文件，写上下边的 css 代码：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.button</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">padding</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">12</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">48</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">border-radius</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#0076ff</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">box-shadow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token unit">px</span><span class="token plain"> </span><span class="token color function" style="color:#e6db74">rgba</span><span class="token color punctuation" style="color:#f8f8f2">(</span><span class="token color number" style="color:#ae81ff">135</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">167</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">171</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0.5</span><span class="token color punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-size</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">14</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token color">white</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">font-weight</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">500</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">text-shadow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0.5</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token unit">px</span><span class="token plain"> </span><span class="token color function" style="color:#e6db74">rgba</span><span class="token color punctuation" style="color:#f8f8f2">(</span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0</span><span class="token color punctuation" style="color:#f8f8f2">,</span><span class="token color"> </span><span class="token color number" style="color:#ae81ff">0.15</span><span class="token color punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">outline</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">cursor</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> pointer</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里把按钮设置了背景、圆角边框、字体、指针样式和阴影。</p></li><li><p>打开 Button 组件的 index.js 文件，导入 css 文件并赋值给一个变量，这里叫 <code>styles</code>：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports">styles</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"./styles.module.css"</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>给 Button 组件加上 className 属性，这里可以用 <code>styles.button</code> 来访问 css 文件中的 <code>.button</code> 的样式：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">button</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以在页面上看到，这个默认按钮的样式已经加载好了。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="用-props-给-button-不同的样式">用 Props 给 Button 不同的样式<a class="hash-link" href="#用-props-给-button-不同的样式" title="标题的直接链接">​</a></h2><p>在给 Button 写完默认样式之后，咱们再来定义它几个变体，比如红色、黑色。你可以在 Button 里多添加一个 color 属性，代表其他组件使用它时，可以传递一个 color 属性，Button 会根据它的值显示不同的颜色，这里我假设它有三种，一种是默认的蓝，就是不传 color 的时候的颜色，一种是红色，color 的值为 red 的时候显示，一种是黑色，在 color 为 black 的时候显示。首先咱们先把这两种颜色的 css 样式定义好：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.red</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff4059</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.black</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#2e3434</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="classnames-组合样式">classnames 组合样式<a class="hash-link" href="#classnames-组合样式" title="标题的直接链接">​</a></h3><p>在定义完这两个额外的样式之后，需要把它和<code>.button</code>定义的样式组合起来。这里可以手动去拼，也可以用之前刚开始安装的 classnames 依赖库。它可以根据条件来组合 className，只有满足一定条件的 class 才会被组合进来，在咱们这里，可以这样使用：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">  </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript function" style="color:#e6db74">classNames</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">(</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">button</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">,</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">    </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">[</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">red</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">]</span><span class="token tag script language-javascript operator" style="color:#66d9ef">:</span><span class="token tag script language-javascript" style="color:#f92672"> color </span><span class="token tag script language-javascript operator" style="color:#66d9ef">===</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript string" style="color:#a6e22e">"red"</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">,</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">    </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">[</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">black</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">]</span><span class="token tag script language-javascript operator" style="color:#66d9ef">:</span><span class="token tag script language-javascript" style="color:#f92672"> color </span><span class="token tag script language-javascript operator" style="color:#66d9ef">===</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript string" style="color:#a6e22e">"black"</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">  </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">)</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672"></span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">  </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>它接收多个参数，第一个直接传递了 styles.button 这个 class，说明它无论其它属性怎么变化，它都是要有的，最后传递了一个对象，对象的 key 是 styles 中的 class 的名字，value 是 boolean 类型的，需要一个条件，返回 true 就把这个 class 加到组合中，false 就不加。那这里，如果 color 的值是 red，那么 button 中就会有 <code>.red</code> 定义的样式。</p><p>再在 App.js 中添加两个按钮 ，一个 color 设置为 red，一个 color 设置为 black:</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">默认按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">red</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">红色按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">black</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">黑色按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>需要注意的是，react 要求在返回的 JSX 中只能有一个顶级的标签，不能有并列的多个，比如不能同时写三个 button，需要把它们包装在一个大的标签下，这里我用了一个 main，作为内容容器，里边有一个 div 是 button 的容器。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="线框样式">线框样式<a class="hash-link" href="#线框样式" title="标题的直接链接">​</a></h3><p>如果再加一组线框样式的按钮呢？很简单，我再加一个<code>type</code>属性，默认是<code>primary</code>的，主要按钮，线框按钮的 type 叫它<code>secondary</code> 次要按钮，然后 classnames 添加一个新的 class，在 type 为 <code>secondary</code> 的时候追加到组合中：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">Button</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> children</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> type </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"primary"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> color </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"blue"</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">button</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">      </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript function" style="color:#e6db74">classNames</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">(</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">button</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">,</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">        </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">[</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">red</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">]</span><span class="token tag script language-javascript operator" style="color:#66d9ef">:</span><span class="token tag script language-javascript" style="color:#f92672"> color </span><span class="token tag script language-javascript operator" style="color:#66d9ef">===</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript string" style="color:#a6e22e">"red"</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">,</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">        </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">[</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">black</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">]</span><span class="token tag script language-javascript operator" style="color:#66d9ef">:</span><span class="token tag script language-javascript" style="color:#f92672"> color </span><span class="token tag script language-javascript operator" style="color:#66d9ef">===</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript string" style="color:#a6e22e">"black"</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">,</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">        </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">[</span><span class="token tag script language-javascript" style="color:#f92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">.</span><span class="token tag script language-javascript property-access" style="color:#f92672">secondary</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">]</span><span class="token tag script language-javascript operator" style="color:#66d9ef">:</span><span class="token tag script language-javascript" style="color:#f92672"> type </span><span class="token tag script language-javascript operator" style="color:#66d9ef">===</span><span class="token tag script language-javascript" style="color:#f92672"> </span><span class="token tag script language-javascript string" style="color:#a6e22e">"secondary"</span><span class="token tag script language-javascript" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag script language-javascript" style="color:#f92672">      </span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">)</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">    </span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来定义 <code>secondary</code> 样式：</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.secondary</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">border</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token unit">px</span><span class="token plain"> solid </span><span class="token hexcode color">#0076ff</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#0076ff</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.secondary</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.red</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">border-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff4059</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#ff4059</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.secondary</span><span class="token selector class" style="color:#a6e22e;font-style:italic">.black</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">border-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#2e3434</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#2e3434</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在这里我把默认蓝色、红色、黑色按钮的边框和文字都设置了不同的颜色。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="显示所有按钮样式">显示所有按钮样式<a class="hash-link" href="#显示所有按钮样式" title="标题的直接链接">​</a></h2><p>在 App.js 中咱们显示所有不同属性的按钮，然后给按钮容器加上一个 className，用来对按钮进行排版，这里我直接用了普通的 css 样式，也就是创建工程时给生成好的 App.css，直接把它导入进来：</p><p>App.js</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// 省略函数定义</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">btn__container</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">默认按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">red</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">红色按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">black</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">黑色按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">secondary</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">线框按钮</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">secondary</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">red</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      线框按钮</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">secondary</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">black</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      线框按钮</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag class-name" style="color:#e6db74">Button</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">main</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>App.css</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic">main</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token unit">vw</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><span class="token unit">vh</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">background-color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#f2f2f2</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">align-items</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">justify-content</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.btn__container</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> grid</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">grid-template-columns</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">repeat</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token unit">fr</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">column-gap</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">row-gap</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">align-content</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">justify-items</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>好了，这个使用 React Props 来展示不同样式的按钮到这里就结束了，里边几个概念：</p><ul><li>React 组件默认会传递 Props 参数</li><li>使用 props 可以传递任何自定义的属性</li><li>组件相关的文件都放到一个文件夹里</li><li><code>css modules</code> - 用来生成随机局部 class 名字</li><li><code>classnames</code> - 用来组合多个 class</li></ul><p>你学会了吗？如果有问题，欢迎通过下方链接参与讨论。</p>]]></content:encoded>
            <category>前端</category>
            <category>React</category>
        </item>
        <item>
            <title><![CDATA[什么是 React？你为什么应该学React？]]></title>
            <link>https://kuizuo.cn/React-intro</link>
            <guid>React-intro</guid>
            <pubDate>Fri, 12 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Hello! 今天来带你走进 React 的大门！我第一次听说 React 是我在美国读研的时候，室友选了 web programming 这节课，然后遇到了关于 react 的好多问题...]]></description>
            <content:encoded><![CDATA[<p>Hello! 今天来带你走进 React 的大门！我第一次听说 React 是我在美国读研的时候，室友选了 web programming 这节课，然后遇到了关于 react 的好多问题，就是总也配置不好。我看他那个时候 React 的配置特别麻烦，要引入一堆依赖，像 bower, babel 等等... 还有文档写的也不清楚。有一次他刚开始做一个作业，问了我一个问题，大概是有一个组件显示不出来，结果看了半天我也不知道是怎么回事啊，因为我也没学过。后来他自己研究出来了，是因为这个组件在使用的时候没有大写。</p><p>我当时就觉得这个 React 好复杂呀，然后就决定，我可不学他，后来我在暑假里面就学了 vue，但是回国之后呢，因为某些原因我就没有找后端的工作,转向了前端，当时又看这个 react 已经变得特别方便了，有一个 create react app 工具，就能省好多事儿，而且 react 的生态圈又特别的庞大，就决定学了 react。因为我觉得这个 react 开发大型的前端应用特别方便，尤其是它出了 hooks 之后。所以，我今天想给你分享一下。这个 react 到底是什么东西？它有什么好处？</p><p><a href="https://www.bilibili.com/video/av93748753/" target="_blank" rel="noopener noreferrer">B 站视频 - 点击传送</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-的前世今生">React 的前世今生<a class="hash-link" href="#react-的前世今生" title="标题的直接链接">​</a></h2><p>以前呀，react 给自己的定位，就包括他官方文档写的，都是用来创建一个单页应用的，什么是单页应用呢？单页应用，就是说这个整个页面它都没有 URL 的跳转。页面的更新都是通过 JavaScript 来实现的。这样的这个网站运行起来就像一个是一个本地的 APP 一样。让这个用户的体验更好。</p><img loading="lazy" alt="" src="/img/2020-03-12-introduction-to-react/2020-03-14-16-33-43.webp" class="img_ev3q"><p>但是呢，它一开始需要把所有的 js、css 还有 html 全部都加载进来, 之后的操作就是通过和服务器打交道，然后把数据取回来之后再更新需要改变的部分，而不会发生页面的跳转。现在 React 对自己的定位是一个 JavaScript 库，来创建用户界面的。从这个措辞上来看，它可以做所有跟用户界面有关的应用，不管你是不是单页应用还是多页应用，是移动的 APP 还是其他，只要是用来展示用户界面的都可以用它来做。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-对开发有什么好处">React 对开发有什么好处?<a class="hash-link" href="#react-对开发有什么好处" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="组件化">组件化<a class="hash-link" href="#组件化" title="标题的直接链接">​</a></h3><p>使用 React 的好处呢，就是你可以创建 component，组件。然后可以把一个网站或者是应用上面的一些按钮、菜单等这些小一点的单元做成一个组件，这些组件可以在不同的地方去重复使用。</p><p>而组件之间的变化是通过状态来改变的，你可以把这个状态想象成是一个触发器的开关，只要状态变了之后，那么 React 就会根据这些新的状态把这个组件在渲染一次，把它更新成新的。这个状态是由组件内部来管理的，那么在组件这么一个独立的单元里边，它负责自己的样式还有状态的改变，会使得开发很有逻辑。就不像是 jquery，如果你想改变哪个组件的状态的话，需要先找到这个组件，然后再手动的去改变它的状态。</p><img loading="lazy" alt="" src="/img/2020-03-12-introduction-to-react/2020-03-14-16-42-17.png" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="效率高">效率高<a class="hash-link" href="#效率高" title="标题的直接链接">​</a></h3><p>React 开发效率高，就是因为有了这些组件。记得我之前上班的时候，我拿到一个新的项目，先分析设计图，把一些可能需要复用的组件写好，一些不确定的就先把它写到了相应的页面里面去，然后等有重复再用的时候，再把它单独抽取出来，到最后慢慢的这些可重用的组件越来越多，在构建新页面的时候也会越来越快，到最后就可以发展成为一个标签，就可以生成一个页面。而且，这些组件可以作为未来你自己的一个样式库，在开发新的项目的时候或者是开发别的像移动端的 APP 的时候可以拿过来直接就用，这样还能保持风格的统一。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="需要哪些技术才能学-react">需要哪些技术才能学 React?<a class="hash-link" href="#需要哪些技术才能学-react" title="标题的直接链接">​</a></h2><p>学习 React，你只需要掌握 <code>html</code>, <code>css</code> 还有 <code>JavaScript</code> 知识就行了，另外呢就是一些新特性， <code>ES6/ES7/ES8</code>，也需要了解一下，用的比较多的有<code>箭头函数</code>，还有<code>解构赋值</code>，<code>扩展运算</code>。至于 class，因为 React 出了 hooks 之后，基本上所有的组件都可以用函数式来写了，所以说 class 已经变得不是那么特别重要了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建第一个-react-项目">创建第一个 React 项目<a class="hash-link" href="#创建第一个-react-项目" title="标题的直接链接">​</a></h2><p>现在咱们来看一下这个怎么创建一个 react 项目。因为 React 创建出来的是一个 node 的工程，所以需要安装一下 node.js， 安装方法我在之前的视频里面讲过。安装完 node.js 之后，你也可以选择性的去安装一下 yarn，不过这个是不必要的，我个人比较习惯使用 yarn。</p><p><a href="https://www.bilibili.com/video/av88759392/" target="_blank" rel="noopener noreferrer">Node.js 视频</a></p><p><a href="https://www.bilibili.com/video/av89451285/" target="_blank" rel="noopener noreferrer">Yarn 视频</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-react-app">Create React App<a class="hash-link" href="#create-react-app" title="标题的直接链接">​</a></h3><p>接下来就是创建工程，可以使用 create-react-app 这个工具，打开你的命令行，找一个你觉得合适的文件夹，然后在里面输入</p><p><code>npx create-react-app hello-world</code></p><p>空格后边是咱们这个工程的名字，比如说叫 <code>hello-world</code>。</p><p>等它创建完之后，运行这个项目使用：</p><p><code>npm start</code> 或者是 <code>yarn start</code>，运行之后它会自动帮你打开一个浏览器，你可以看到一个 logo，还有一段话告诉咱们编辑一下 <code>src/app.js</code> 来看一下效果。咱们来看一下项目的目录结构：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">hello-world</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── public</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── favicon.ico</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── index.html</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── logo192.png</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── logo512.png</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── manifest.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; └── robots.txt</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── src</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── App.css</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── App.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── App.test.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── index.css</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── index.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── logo.svg</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; ├── serviceWorker.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│&nbsp;&nbsp; └── setupTests.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">└── yarn.lock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里你需要关心的就是 <code>src</code> 这个文件夹:</p><ul><li><p><code>App.js</code> - 他是这个 react 项目里面的一个最顶层的组件。咱们看一下这个 App.js 的代码：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"react"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports">logo</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"./logo.svg"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"./App.css"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">App</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">App</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">header</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">App-header</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">img</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">src</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">logo</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">App-logo</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">logo</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">          Edit </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">code</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">src/App.js</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">code</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"> and save to reload.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">p</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">a</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">          </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">App-link</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">          </span><span class="token tag attr-name" style="color:#a6e22e !important">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">https://reactjs.org</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">          </span><span class="token tag attr-name" style="color:#a6e22e !important">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">_blank</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">          </span><span class="token tag attr-name" style="color:#a6e22e !important">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">noopener noreferrer</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag" style="color:#f92672"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#f92672">        </span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">          Learn React</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">a</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">header</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以看到这个 react 的组件，是用一个函数来定义的，最后返回一些 html 的标签，那这个 html 标签叫做 <code>jsx</code>, 这个语法一开始看起来可能会很奇怪，在 js 里面来写 html，而且也不符合这个表现和逻辑分离的模式。其实这样写的话是非常容易在 html 还有 js 之间传输数据的，习惯了就好。最后把这个这组件 export 出去，让 <code>index.js</code> 把它放到 id 为 root 的 div 里面。在组件里使用 css 样式的话，就直接在上边用 <code>import</code> 把 css 样式文件导入进来就可以了，它会自动应用里边的样式。这里注意一下，jsx 是用 <code>className</code> 来代替了 class。引用图片的话，也只需要把图片导入进来就可以，然后给它赋值给一个变量.在 <code>img</code> 这样的标签下，直接当作 src 的值就好了，在 jsx 里边引用 js 变量的话，需要使用大括号<code>{}</code>语法。</p></li><li><p><code>index.js</code> - 是这个工程的入口文件。它里边就把这个 App 组件给挂载到了 id 为 root 的 div 里边，通过调用 <code>ReactDOM.render()</code> 函数，它就会把 div 里边所有的代码都替换成这个 App 组件生成的 html：</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">render</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">App</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementById</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"root"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>咱们可以看一下 <code>public</code> 下边的 <code>index.html</code> 里，他就有一个 id 为 root 的 div:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag attr-value" style="color:#f92672">root</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">"</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>咱们现在可以把 App 函数里边的代码删掉，然后返回一个简单的组件，比如说把这个标签改成 h1，然后里面写个 hello world，在保存这个页面它就刷新了。</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#e6db74">App</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">h1</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text">Hello World</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">h1</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>好了，现在你就创建了一个第一个 React 项目。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>今天给你讲了一下 react 是什么，然后它有一些什么优点。接下来后面我会逐渐介绍它的一些特性，比如说属性、状态、还有事件的处理，高级的用法，组件的设计等等。现在你可以先用这个工程来自己先玩一下，看看能不能自己做出点什么东西出来。如果有什么其他问题，请在评论区留言，谢谢大家。</p>]]></content:encoded>
            <category>前端</category>
            <category>React</category>
        </item>
        <item>
            <title><![CDATA[使用 Docusaurus 搭建个人博客教程（二）]]></title>
            <link>https://kuizuo.cn/deploy-a-docusaurus-site-part2</link>
            <guid>deploy-a-docusaurus-site-part2</guid>
            <pubDate>Mon, 08 Mar 2021 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>如果你看了上期视频的话，那么你应该学会了怎么在本地搭建一个 docusaurus 博客，但是你不能只在本地来看这个博客吧，得让全世界来欣赏你的杰作，所以说咱们得把这个博客部署到服务器上。部署有两种方式：</p><ul><li>部署到国外，是免费的。</li><li>部署在国内，需要自己购买一个域名，还有服务器，大概有个 300 来块钱就差不多了。</li></ul><p><a href="https://www.bilibili.com/video/av93748753/" target="_blank" rel="noopener noreferrer">B 站视频 - 点击传送</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="发布到-github">发布到 github<a class="hash-link" href="#发布到-github" title="标题的直接链接">​</a></h2><p>在发博客之前得先把项目发布到 github 上，这个之前我简单的介绍过，它就是一个远程的 git 的代码仓库，所有人都可以看到你的代码，还能一起维护。或者也可以把它当成私有的，这样的话可以当成自己的一个云端的代码仓库，作为代码的版本跟踪管理。</p><p>首先要在 github 上创建一个仓库，打开它的官网：</p><p><a href="https://github.com/" target="_blank" rel="noopener noreferrer">github</a></p><p>没有账号的话先去注册一个，有的话就直接登录，登录之后在自己的主页左边点击 <code>New</code> 这个按钮创建一个仓库，这里需要填一些信息：</p><ul><li><code>Repository Name</code> - 仓库的名字，必填的，比如我这里叫<code>fh-blog</code>。</li><li><code>Description</code> - 仓库的描述，这个是可选的，这里我写一个<code>我的博客</code>。</li><li>选择<code>私有</code>还是<code>公开</code> - 如果后边在 Zeit 上部署，这里选公开。</li><li>是不是添加<code>README</code> - 这里不添加了，因为咱们本地已经有了，另外<code>.gitignore</code>和<code>add a licence</code>也都不用添加。</li></ul><p>完了之后点击 <code>Create repository</code> 仓库创建好了。之后它会跳转到仓库的首页，下边写了两种方式把代码提交到 github，第一种是按全新的仓库，就是本地还没有的。咱们这里用第二种，把现有的代码推送到 github 上。具体操作：</p><ol><li>在 VS Code 里打开你的博客工程，点击菜单中第三个按钮 <code>source control</code>。</li><li>如果仓库还没有初始化的话，点击 <code>initialize repository</code> 按钮进行初始化。</li><li>在上边的 message 输入框中输入 commit 信息，比如说 <code>initial commit</code>，再点击上边的对勾提交代码。</li><li>按下键盘的 <code>command(Mac)/ctrl(Windows) + shift + p</code>， 打开快捷命令行工具，输入 <code>add remote</code>，在出来的提示中选择 <code>Git: Add Remote</code>。</li><li>给这个远程仓库的的 url 信息起个名字，一般叫做 <code>origin</code>，代表这是咱们项目的起源仓库。按下回车。</li><li>接下来要求输入仓库的 url，在里边贴上你的 github 仓库的 url, 比如 <code>https://github.com/MISfang/fh-blog.git</code>，然后按下回车。</li><li>添加好远程仓库之后，再点击 source control 中的 <code>...</code> 菜单，选择 push，等完成之后，再刷新一下 github 仓库，有了代码就代表推送成功了。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署">部署<a class="hash-link" href="#部署" title="标题的直接链接">​</a></h2><p>代码推送到 github 之后，就能愉快的部署到服务器上了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zeit">Zeit<a class="hash-link" href="#zeit" title="标题的直接链接">​</a></h3><p><a href="http://zeit.co/" target="_blank" rel="noopener noreferrer">Zeit</a></p><p>这里推荐给你一个比较好用的国外的服务器，配置超级简单，它叫 zeit，也是 docusaurus 官方推荐的，不过可能有些地方因为某些原因，会访问不了，或者非常慢。不过因为它太方便了，所以还是要介绍一下。它的免费版包括下边的特性：</p><ul><li><code>HTTPS-enabled Custom Domains</code> - 可以自动给自定义域名添加 https 支持</li><li><code>Continuous Deployment with Git</code> - 能够利用 git 进行持续集成</li><li><code>High-performance Smart CDN</code> - 高性能的智能 CDN</li><li><code>Unlimited Websites &amp; APIs</code> - 支持创建无数个网站和 api</li><li><code>Serverless Functions in Node.js, Go, and more</code> - 支持使用 Node.js 和 Go 语言等创建无服务的函数。</li></ul><p>接下来注册一个账号，根据它的要求完成之后就可以开始部署了。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="发布到-zeit">发布到 zeit<a class="hash-link" href="#发布到-zeit" title="标题的直接链接">​</a></h4><p>要发布到 zeit 上,首先安装它的命令行工具：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> i -g now</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来在 VS Code 中打开一个命令行窗口，用快捷键 ctrl + `, 默认的路径就是当前工程的根目录，输入命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">now</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>它会要求一些信息，比如用注册邮箱接收一个验证码，项目名称，配置信息。等它运行完毕之后，项目就可以部署到 zeit 上了。去 zeit 官网，可以看到它自动关联了 github 的项目，也可以看到它给咱们生成的域名，点开它就可以访问了，如果要添加自定义的域名，就点开 <code>domains</code> 菜单，点击 <code>add</code>，选择一个部署的项目，再点 <code>continue</code>，输入自己的域名，点击 <code>Add</code> 就可以添加了，最后要把域名的 DNS 指向 zeit 提供的那几个。怎么修改域名 DNS 我稍后会讲，不同的域名提供商也有不同的操作。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署到国内">部署到国内<a class="hash-link" href="#部署到国内" title="标题的直接链接">​</a></h3><p>Zeit 可能在国内某些地方访问不太稳定，那咱们可以部署在国内服务器上。之前在前端路线图的视频里我大致讲过了域名和服务器的概念，要部署咱们的网站，就需要购买一个域名和一台服务器，因为咱们这个网站是静态的，不需要太过复杂的功能，所以服务器用一台虚拟主机就可以了，虚拟主机是一台服务器里边，分隔出来了不同的目录给不同的用户，所有的这一台服务器上的用户都共享它的 cpu、内存等资源，然后有固定的带宽、存储容量还有数据库等等。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="购买域名">购买域名<a class="hash-link" href="#购买域名" title="标题的直接链接">​</a></h4><p>这里以阿里云为示例，打开它的<a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer">官网 https://www.aliyun.com/</a>，在搜索框上边选择域名，然后输入一个自己想要的域名，比如 <code>fhdev</code>，再选择一个可用的域名，加入到清单中，完成之后点击立即结算，选择年限，添加实名信息之后，付款购买就可以了。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="购买服务器">购买服务器<a class="hash-link" href="#购买服务器" title="标题的直接链接">​</a></h4><p>服务器用共享的虚拟主机即可，<a href="https://wanwang.aliyun.com/hosting/vhost-buy/?spm=5176.8060947.858675.gaongxiang1.a5305c71VGo8vo&amp;productId=38001&amp;cdn=t" target="_blank" rel="noopener noreferrer">点击传送</a>，新用户的话可以选择云虚拟主机，可能会有优惠。操作系统选择 <code>linux</code>，然后选择购买时长，最后购买就可以了。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="备案">备案<a class="hash-link" href="#备案" title="标题的直接链接">​</a></h4><p>在阿里云买了服务器之后，它就提供备案服务了，可以点击右上角备案菜单，根据提示进行备案，用手机备案填写资料会更快一些。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置主机和域名">配置主机和域名<a class="hash-link" href="#配置主机和域名" title="标题的直接链接">​</a></h4><p>登录到阿里云的控制台，在左侧折叠菜单里选择云虚拟主机，就能看到你购买的虚拟主机了，点击它右边的<code>管理</code>菜单，就可以看到它的信息了，这里要把域名指向这台虚拟主机，下边它有网站开通参考，大家可以自己看一下操作。这里我点击左侧菜单的主机信息，找到它的 IP 地址，复制它，返回到控制台，在菜单中选择<code>域名</code>，找到刚才购买的域名，点击管理。</p><p>这里提一下，如果要把 DNS 指向 zeit 提供的，那就在菜单选择 <code>DNS修改</code>，再点击右侧 <code>修改DNS服务器</code>，把 zeit 提供的 dns 地址一项一项填进去。</p><p>解析到自己的服务器上的话，可以直接就用阿里云默认的 dns 就可以了，然后在菜单项里选择<code>域名解析</code>，点开之后点击<code>添加记录</code>，记录类型选择 A 记录，A 记录就是说这个域名要解析到一个 ip 地址上边，这里咱们有虚拟主机的 IP 地址，所以选择<code>A</code>，主机记录填写<code>@</code>，这个意思是访问根域名时对应的 ip，也就是说不带<code>www</code>这个前缀的，比如<code>zxuqian.cn</code>，然后解析线路保持默认就好，记录值把刚复制的 ip 地址粘贴上就可以了，然后点击确定。</p><p>再添加一条，这里主机记录填写<code>www</code>，其它的跟<code>@</code>的一致，这个就是访问 <code>www.zxuqian.cn</code> 这个域名时，指向的 IP 地址，跟<code>@</code>记录是一样的。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置-github-actions">配置 github actions<a class="hash-link" href="#配置-github-actions" title="标题的直接链接">​</a></h4><p>接下来就是上传网站文件到服务器上就行了，可以使用 ftp 工具，比如 FileZilla，不过这样每次写完博客之后都要手动再上传一次网站文件，比较麻烦，这里可以利用一下 github actions 这个持续集成工具。在项目的根目录下创建 <code>.github/workflows</code> 这样层级的文件夹，然后在里边创建<code>nodejs.yml</code>文件，里边写上下边的代码：</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Node.js CI</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">push</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">strategy</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">matrix</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">node-version</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">12.x</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Use Node.js $</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> matrix.node</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">version </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">node@v1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">node-version</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> matrix.node</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">version </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> npm install</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> npm run build </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">if</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">present</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> FTP Deploy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> SamKirkland/FTP</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">Deploy</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">Action@3.0.0</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">ftp-server</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 你的虚拟主机 FTP 上传地址/ftp 目录</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">ftp-username</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> secrets.ftp_user </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">ftp-password</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> secrets.ftp_pwd </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">local-dir</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> build/</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">CI</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ae81ff">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个文件是告诉 github actions，这个项目在 Node.js 12 版本，unbuntu 最新版本下，运行下边的命令：</p><ul><li>npm install - 安装依赖库</li><li>npm run build - 打包项目为静态网站</li><li>FTP Deploy，发布到 FTP 服务器上。</li></ul><p>这里发布 FTP 的时候，需要几个参数：</p><ul><li>ftp-server - 你的虚拟主机 FTP 上传地址，比如<code>ftp://byu*********.my3w.com/htdocs</code>。</li><li>ftp-username - ftp 用户名。</li><li>ftp-password - ftp 密码，这些是私密信息，所以用了 github 的私有环境变量，稍后再讲怎么配置。</li><li>local-dir - 上传哪个目录。</li></ul><p>需要注意的是，因为咱们上传到 github 上的代码不包括<code>build</code>文件夹，所以，需要把 github actions 运行之后生成的 build 文件夹上传到服务器，这里在项目的根目录里，添加一个 <code>.git-ftp-include</code> 文件，写上：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">!build/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>意思就是把 <code>npm run build</code> 之后生成的 build 目录上传到服务器中。</p><p><code>ftp-password</code> 这种机密信息的设置方法是：</p><ol><li>打开仓库的首页，点击<code>settings</code>。</li><li>在左边的菜单选择<code>Secretes</code>。</li><li>点击<code>Add a new secret</code>。</li><li>在<code>name</code>处输入变量的名字。</li><li>在<code>value</code>处输入变量的值。</li></ol><p>最后点击<code>Add secret</code>按钮添加就可以了。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="发布博客">发布博客<a class="hash-link" href="#发布博客" title="标题的直接链接">​</a></h4><p>在把所有的这些文件弄好之后，把代码推送到 github 上等 github actions 运行完之后，就可以访问自己的网站了。以后再发表文章，只需要在本地写好之后，推送到 github 上完事儿了。到这里你自己的博客就搭建好了，向全世界展示你的文采吧！</p>]]></content:encoded>
            <category>前端</category>
            <category>职业</category>
        </item>
        <item>
            <title><![CDATA[使用 Docusaurus 搭建个人博客教程（一）]]></title>
            <link>https://kuizuo.cn/deploy-a-docusaurus-site</link>
            <guid>deploy-a-docusaurus-site</guid>
            <pubDate>Wed, 03 Mar 2021 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>我以前总也找不到一个满意的博客系统，wordpress 这个程序又大，然后配置也不方便。占用的服务器的资源也多。我就想有没有一个又简单又快速的博客平台，后来发现了一些静态的网站生成器，像 <code>hexo</code> 这种，但是发现上面的主题又不好看，又懒得自己去写。后来就有一阵子我就直接把博客就发布在了其他的第三方的博客平台上。现在发现了这个 docusaurus, 它的主题跟我之前看到的一个大佬 Dan Abramov，它的 <a href="https://overreacted.io" target="_blank" rel="noopener noreferrer">overreacted.io</a> 博客，风格是一模一样的，因为他是 react 的作者之一，估计这个他们这个样式都是互相借鉴，它这个主题可以切换暗黑和白天模式，比较好看。安装和部署也特别简单，我的博客也是用它这个搭建的。</p><p><a href="https://www.bilibili.com/video/av93748753/" target="_blank" rel="noopener noreferrer">B 站视频 - 点击传送</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="博客有啥用">博客有啥用？<a class="hash-link" href="#博客有啥用" title="标题的直接链接">​</a></h2><p>首先先弄清一个问题，<em>为什么要有一个自己的博客？</em>，博客的好处就是对于咱们程序员来说：</p><blockquote><p>它可以当成是咱们的副业。如果咱们在写代码的时候遇到了问题，或者是在学习一个新的技术的时候，咱们可以把这些学到的东西都给整理成博客，然后发表出来，这样的话呢，既可以能巩固咱们的知识，检测咱们这个技术有没有学懂，然后呢还能让其他想学这些东西的人也能看见，等这些分享的人多了之后，你就会慢慢攒一些粉丝，那这样你的博客就可以成为<em>你的一个品牌</em>，有了这个品牌之后，你再去面试或者是干嘛的，你就可以把它拿出来，然后大家可以看到你的作品，这样的话对于你以后的职业发展还是很有发财升官都有帮助。现在你也了解这个博客的好处了吧，那咱们开始用这个 Docusaurus 搭建一个博客</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docusaurus-简介">Docusaurus 简介<a class="hash-link" href="#docusaurus-简介" title="标题的直接链接">​</a></h2><p>它是一个静态网站生成器，之前我在我的前端路线图的视频里面提到过这个概念，他是用 React 写的源代码，然后编译成的是静态的 HTML css。他这个写文章支持 Markdown 语法，并且呢，它这个 marketdown 是用的 mdx 也就是支持 jsx 语法的 markdown，无缝结合 React, 里边可以引入自定义的组件，然后呢他也支持插件，还有主题，咱们也可以写自定义的组件，把它默认的主题的某一个组件给覆盖掉，特别方便。</p><img loading="lazy" alt="" src="/img/2020-03-02-deploy-a-docusaurus-site/2020-03-04-22-04-02.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装运行环境">安装运行环境<a class="hash-link" href="#安装运行环境" title="标题的直接链接">​</a></h2><p>因为他是个 node 的项目，所以得安装一下 node js 的环境，还有包管理器， 比如说 yarn，或者不安装用自带的 npm 也可以，我习惯用 yarn。具体怎么安装 Node.js 还有怎么安装 yarn 可以看我之前发的那些视频：</p><p><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js</a></p><p><a href="https://classic.yarnpkg.com/en/" target="_blank" rel="noopener noreferrer">Yarn</a></p><p><a href="https://www.bilibili.com/video/av88759392/" target="_blank" rel="noopener noreferrer">安装 Node.js 视频教程</a></p><p><a href="https://www.bilibili.com/video/av89451285/" target="_blank" rel="noopener noreferrer">安装 Yarn 视频教程</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docusaurus">安装 docusaurus<a class="hash-link" href="#安装-docusaurus" title="标题的直接链接">​</a></h3><p>先创建 Docusarus 这个项目，它有一个脚手架，原本是一个 node 的全局库，但是利用 npx 可以直接用它给咱们创建一下项目就可以了，不用安装到全局库里。运行下边的命令创建项目：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx @docusaurus/init@latest init </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">template</span><span class="token punctuation" style="color:#f8f8f2">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个 name 就是项目名，然后 template 是模板，模板一开始就用它官方的 classic，经典的,就行。我这里创建一个 <code>fh-blog</code> 项目：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx @docusaurus/init@latest init fh-blog classic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://v2.docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus V2 官网</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="运行-docusaurus">运行 docusaurus<a class="hash-link" href="#运行-docusaurus" title="标题的直接链接">​</a></h3><p>创建完了之后，就进入到这个 fh-blog 的文件夹里面，运行</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">yarn</span><span class="token plain"> start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者用 npm 运行：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>运行成功了之后呢，它会自动打开一个浏览器，然后访问的是<code>http://localhost:3000</code>，可以看到他这个界面，跟咱们之前看到的官网的文档是一样的。上面有文档、博客、还有 github 链接，切换暗黑和白天模式。</p><img loading="lazy" alt="" src="/img/2020-03-02-deploy-a-docusaurus-site/2020-03-04-22-16-57.png" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="项目结构">项目结构<a class="hash-link" href="#项目结构" title="标题的直接链接">​</a></h3><p>这个项目，大体的结构是：</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">my-website</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── blog</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   ├── 2019-05-28-hola.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   ├── 2019-05-29-hello-world.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   └── 2020-05-30-welcome.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── docs</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   ├── doc1.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   ├── doc2.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   ├── doc3.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   └── mdx.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── src</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   ├── css</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   │   └── custom.css</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   └── pages</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│       ├── styles.module.css</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│       └── index.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── static</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">│   └── img</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── docusaurus.config.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">├── sidebars.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">└── yarn.lock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>/blog/</code> - 里面就是写博客文章的，都是 markdown 文件。</li><li><code>/docs/</code> - 里面就是写文档的，也都是 markdown 文件。</li><li><code>/src/</code> - 源代码文件夹，里面有一个 <code>css</code> 文件夹，然后它里边有个 <code>custom.css</code> 里面是写自定义的 css 代码的。<ul><li><code>/src/pages</code> - 里边放一些自定义的页面，使用 react 语法来写。</li></ul></li><li><code>/static/</code> - 放静态资源文件，这些文件会出现在最后打包出来的静态网站里面，在它的根目录下边，它下边的 <code>img</code> 文件夹是放静态图片的。</li><li><code>/docusaurus.config.js</code> - 这个是配置这个站点的。</li><li><code>/package.json</code> - node.js 的工程配置文件。</li><li><code>/sidebar.js</code> - 配置文档页面侧边栏，只有文档页面才有，用它来定义文档的目录结构。</li></ul><p>另外呢，也可以自己创建一个 <code>theme</code> 文件夹，里边可以定义一些组件用来替换默认主题里面的一些组件。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置为博客模式">配置为博客模式<a class="hash-link" href="#配置为博客模式" title="标题的直接链接">​</a></h3><p>docusaurus 默认是文档风格的主页，要是把它改成一个博客形式的，需要做一点点的配置。打开它的配置文件，<code>docusaurus.config.js</code> 。把 <code>presets</code> 这个配置改成如下所示：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token literal-property property" style="color:#f92672">presets</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#a6e22e">"@docusaurus/preset-classic"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">// docs: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">//   sidebarPath: require.resolve('./sidebars.js'),</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">//   editUrl:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">//     'https://github.com/facebook/docusaurus/edit/master/website/',</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">// },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">blog</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">path</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"./blog"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">routeBasePath</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#8292a2;font-style:italic">// 省略其它代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果不用文档的话，就把 <code>docs</code> 这个删除或者注释了，然后加上 blog ，里边添加：</p><ul><li><code>path</code> 属性，它的值为”./blog”，也就是指向 blog 的文件夹。</li><li><code>routeBasePath</code> 属性，这个是访问这个博客的路径，设置成<code>/</code>斜杠就是默认网站的首页。</li></ul><p>然后把 <code>src/pages</code> 下边 <code>index.js</code> 的改成别的名字或者是给删除，这样的话他就不会同时匹配这两个文件了。</p><p>顶部导航的 docs 如果要去掉的话，可以找到 navBar 这个配置项，把 links 中的有关 docs 的这段删掉：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">to</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"docs/doc1"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">label</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Docs"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">position</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"left"</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="发表第一篇博客">发表第一篇博客<a class="hash-link" href="#发表第一篇博客" title="标题的直接链接">​</a></h3><p>写博客就是在 <code>blog</code> 里边创建一个 markdown 文件。标题开始部分是一个日期格式。Docusaurus 会自动把这个日期解析成咱们这个博客的发表日期，后边跟着这个文件的名字，可以起个有意义的，比如说是博客的标题的英文，例如项目里的 <code>Welcome</code> 博客：</p><p><code>2019-05-30-welcome.md</code></p><p>文件，里面第一段就是配置这个博客的一些基本信息：</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">id: welcome</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">title: Welcome</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">author: Yangshun Tay</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">author_title: Front End Engineer @ Facebook</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">author_url: https://github.com/yangshun</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">author_image_url: https://avatars0.githubusercontent.com/u/1315101?s=400&amp;v=4</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">tags: [facebook, hello, docusaurus]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>id</code> - 访问这个博客的 URL。</li><li><code>title</code> - 标题。</li><li><code>author</code> - 作者。</li><li><code>author_title</code> - 就是作者简短的自我介绍，职位之类的。</li><li><code>author_image_url</code> - 头像。</li><li><code>tags</code> - 博客标签, 是个数组形式。</li></ul><p>如果文章太长想只展示一部分的话，可以加上：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">&lt;!--truncate--&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个注释就可以了，它会把它后边的内容隐藏，然后显示一个阅读更多链接。</p><p>这样第一个博客就完成了，现在是跑在本地上，后边再讲怎么把它部署到服务器上。</p>]]></content:encoded>
            <category>前端</category>
            <category>职业</category>
        </item>
        <item>
            <title><![CDATA[程序员如何提升英语水平]]></title>
            <link>https://kuizuo.cn/learning-english-for-coders</link>
            <guid>learning-english-for-coders</guid>
            <pubDate>Tue, 02 Mar 2021 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>本篇文章适合所有想提升英语尤其是阅读能力的人，因为我自己程序员，所以我来拿自己的亲身经历来帮助大家发现自己提高英语技能的方法。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一点历史">一点历史<a class="hash-link" href="#一点历史" title="标题的直接链接">​</a></h2><p>先说在中学时，虽然一开始我对英语很有兴趣，而且也考过几次高分，但是到了后来就慢慢的不喜欢学习了，高考的时候英语正好卡在 90 分的及格线上，然后高考分数只够上了一个专科，开始了程序员之路。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="动机">动机<a class="hash-link" href="#动机" title="标题的直接链接">​</a></h2><p>其实我学英语的动机并不是因为技术文档都是英文的，那时候还只知道阅读别人翻译好的中文文档，有错误和疏漏有时候都不知道。当时工作的时候，我突然决定读一个专升本，于是报考了北大的网络教育学院，然后顺利入学了。第二学期，我们都需要考学士学位英语俗称英语三级，才能拿到学位证，满分 100 分拿到 60 分及格才过关，这个到毕业前每学期都可以考一次。我第一参加考试时是裸考，以为比四级会简单些，谁知多年不用的英语水平早就下降了，结果只考了 56 分。我就看着这差 4 分的成绩到干瞪眼！为嘛老天爷对我这么不公平，差这么一点点(可能比 59 好点吧)。然后就突然激发起了我的斗志，我要努力学英语！</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="学习历程">学习历程<a class="hash-link" href="#学习历程" title="标题的直接链接">​</a></h2><p>决定学英语后，我买了一套新概念英语，从一到四，每套包括课本，自学导读，练习册，练习详解。因为高中时老师说新概念英语是公认最好的英语教材，所以我不假思索的就选择了它。打开第一册，发现都是比较简单的对话和单词，我是这么学的的</p><ul><li>每天两课(第一册比较简单，后面一天一课)-</li><li>首先学习每课生词并默写五遍</li><li>不看书听录音，看看能听懂多少</li><li>再听一遍，这次是精听，听不出来的反复听，直到四五遍完全听不出来为止</li><li>再听一遍完整的，验证一次</li><li>看书听一遍，把听错的标出来，记住</li><li>最后，跟着录音读一遍</li><li>看课文详解部分和自学导读，理解语法和句型。</li><li>把课本和练习册的题包括作文全部做完，并对照答案把做错的弄懂。</li></ul><p>就这样一个学习套路，第一册一共 144 课学了大约有三个月左右，然后就开始了第二册。第二册由于课文比较长，题也多，就改成了一天一课。在学到第 20 多课的时候，也到了第二次学位考试的时间，然后这次考了 76 分，一次不小的进步。然后在学习期间我对英语产生了不少的兴趣，开始听英文歌曲，看一些简单的英语新闻和资料。想着英语既然学起来了就不要放下了，于是继续坚持着学习。在这中间，我还成功的阅读了 Spring MVC in Action 英文原版书，这也是我首次阅读完的一本英文书，当然看的也是极慢，一边查字典，一边琢磨句子，好在这本书的文风简单，用词都很正常，没有太多引申义什么的。阅读完其实也给自己增加了很多自信，然后在学习新技术时都看官方文档了，虽然很慢，但是我觉得生词只会越来越少，只需要慢慢积累。好在技术文档基本都是在网页里，很容易用各种词典都可以划词翻译，学到新词后，不要刻意去背，也不要加入生词本之类的，一是记不住，二是生词本肯定是不会去看的，脱离了语境，一个一个的单词根本就记不住那么多含义。我们所应该做的就是继续阅读，高频词总会重复好多遍的，慢慢的见的多了也就记住了。这期间我看了 Java EE，PHP，JavaScript, Android 等技术和相关框架的官方文档。然后发现技术上的词汇算是比较简单的。后来看荒野猎人原版英文小说，真是每三个词里就有一个不认识的，不过看到后来，慢慢的变好了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="考托福和-gre">考托福和 GRE<a class="hash-link" href="#考托福和-gre" title="标题的直接链接">​</a></h2><p>本科毕业后，在公司一个偶然的机会，听别人说出国留学，然后我突然就想看看国外的技术是什么水平，然后就选定了美国，开始准备托福考试，当时刚刚学完新概念第二册， 第三册大约学了不到十课，然后看了下托福官方指南就去裸考探底去了，第一次考了 82 分，感觉还不错，然后两个月的时间，我每天刷一套 TPO，另外继续学新概念，然后辅以各大英文站点，包括地理，历史，生物，文化等等，其实也没看多少，因为跟再上一次学一样，把学过的东西转换成英文，实在无聊。后来第二次考了 95 分，因为快来不及申请了，就打住了，GRE 裸考的，没时间准备考了 309，不多，不具参考价值，一是我数学不行，高考 58 可以自己想，二是语文部分的单词真是反人类。算了，就这个分数吧。然后自己申学校，大约申请了有七八所，后来被纽大理工，斯蒂文斯，南加大录取了。当时因为南加大是拖到春季才让入学，而我当时已经选择了斯蒂文斯，签证和机票都办好了，就推掉了。人何时不能任性一下。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>请不要以为我出国留学之后英语才比较好的，因为出国后，基本都是和中国同学住一起，上课也是和中国同学组队写作业，最多是上课练了练听力，然后熟悉了下纽约和新泽西附近的地名，还有一些食物的名字。因为咱们技术文档基本都只需要阅读能力，我当时托福阅读差 2 分满分，所以说，应付这些足够了。到现在已经差不多完全脱离字典了。现在还培养了看 quora 的爱好，上边有很多精彩的回答，而且都是真人真话，也可以提升下口语能力，顺便解决下人生困境，灌灌鸡汤。</p><p>这基本上就是我的个人经历，其实也并不需要多大努力去学，只要坚持下去，每天收获一点点，学好英语就会水到渠成了。我现在还在坚持着学新概念，已经到第四册了，因为中间工作和学习断了很长时间，所以也和大家一起进步吧。我们一定要有努力克服困难的决心，然后有一点点不安于现状的上进心，去努力学习新的知识，然后回过头来，发现自己已经上了很大的一个台阶，这就是所谓的进步与成长。希望本篇对大家有所启发。</p>]]></content:encoded>
            <category>前端</category>
            <category>职业</category>
            <category>经验</category>
        </item>
        <item>
            <title><![CDATA[11个前端工程师必备的网站]]></title>
            <link>https://kuizuo.cn/frontend-devs-must-know-websites</link>
            <guid>frontend-devs-must-know-websites</guid>
            <pubDate>Mon, 01 Mar 2021 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<img loading="lazy" alt="" src="/img/2020-02-29-frontend-devs-must-know-websites/11-must-know-websites.svg" class="img_ev3q"><p>好多小伙伴有疑问，就是说有哪些值得去关注的前端网站，我知道大家可能都苦于找不到一些有价值的,还有值得信赖的网站去学一些比较货真价实的前端技术。生怕有哪些水文或者是一些乱七八糟的网站，把咱们的这个知识给误导了。这里呢我准备了几个我经常关注的一些网站，一部分是国外的，然后有一部分是国内的，因为国内的好多的都是质量参差不齐，但国外的话普遍的质量比较高（事实如此）。不过呢，咱们国内的也有一些比较好的平台，我在这里给咱们一共准备了 11 个可以关注的网站。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="国外">国外<a class="hash-link" href="#国外" title="标题的直接链接">​</a></h2><p>首先咱们先看看国外的。国外的网站一般作者都会用一些真实的数据或者例子去支撑他的论点，所以说他们的这些网站的信息都比较权威，尤其是一些库和框架的官方文档，这些是一定要看的。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mdn">MDN<a class="hash-link" href="#mdn" title="标题的直接链接">​</a></h3><p>MDN 他原来是 Mozilla 开发者中心, 也就是出火狐浏览器的那个组织的，但是呢,现在他是由一群社区的开发者，还有一些文档专家来维护的这么一个文档项目，它上面有好多关于 web 开发的一些文档，有 html, JavaScript 和 css，还有浏览器内置的一些 web API，包括还有后端的 node.js 和 express 开发。他的文档都很权威，而且很全面，还很新。是咱们这个前端工程师必须要关注的网站。</p><p><a href="https://developer.mozilla.org/en-US/docs/Web" target="_blank" rel="noopener noreferrer">MDN Web Docs</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="caniuse">Caniuse<a class="hash-link" href="#caniuse" title="标题的直接链接">​</a></h3><p>Caniuse 这个网站它是用来查询一些 css 特性或者是 JavaScript 的特性，能不能在咱们当前的这个浏览器版本里面用，它会有一个详细的列表来显示这个特性哪些浏览器支持，哪些浏览器不支持。如果咱们大家不确定一个属性能不能在一个浏览器上用，可以通过这个网站去查一下。</p><p><a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">Can I use... Support tables for HTML5, CSS3, etc</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="css-tricks">Css-tricks<a class="hash-link" href="#css-tricks" title="标题的直接链接">​</a></h3><p>这个网站是主要介绍 css，另外呢也会有 html，JavaScript 和 php 的文章。他的文章大部分都是关于怎么实现一个 css 的特效，然后有一些 css 的最佳实践，比如说响应式布局，Flexbox 属性详解，或者是实现某一个特定的组件。它的内容有文章形式的，也有视频形式的，还有一些代码的示例，咱们想实现一个特效的时候，可以在这上面找一找。</p><p><a href="https://css-tricks.com/" target="_blank" rel="noopener noreferrer">CSS-Tricks</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="codepen">Codepen<a class="hash-link" href="#codepen" title="标题的直接链接">​</a></h3><p>它是一个在线的代码编辑器，它还支持社交的功能。这样他有好多前端工程师，就把用这个在线编辑器写好了代码共享出来，他这个代码涉及的类别就比较多了，有关于网页组件的，还有关于游戏的，还有关于 3d，和 canvas 的这种。他的首页有列出来的一些比较热门的，大家可以没事浏览浏览，找找灵感。上面的牛人也比较多，它们写的代码都比较高深。</p><p><a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen: Build, Test, and Discover Front-end Code.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="medium">Medium<a class="hash-link" href="#medium" title="标题的直接链接">​</a></h3><p>Medium 是一个现在很火的，特别大的博客平台，它上面的文章什么类别都有。然后关于编程的也有不少，当然也有咱们关于前端的。如果大家用谷歌搜索过的话，那么大部分的搜索结果可能都是这个 medium 平台上的，这上面的文章质量也都比较好。适合咱们大家做一些深入的概念性的学习。</p><p><a href="https://medium.com/" target="_blank" rel="noopener noreferrer">Medium – Get smarter about what matters to you.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hacker-noon">Hacker noon<a class="hash-link" href="#hacker-noon" title="标题的直接链接">​</a></h3><p>hacker noon 也是一个关于软件开发的平台, 上边也是各种关于软件开发的主题，比如说有加密啊，代码，还有一些创业的，或者是社区、AI 等这些类别。里面关于前端的也不少，而他的文章呢也基本上算是入门到中级的这种比较多。作者的一般文风都很通俗，咱们这一看就能看懂，所以说适合学习一些新的框架的入门还有进阶一点教程</p><p><a href="https://hackernoon.com/" target="_blank" rel="noopener noreferrer">Hacker Noon</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stackoverflow">StackOverflow<a class="hash-link" href="#stackoverflow" title="标题的直接链接">​</a></h3><p>Stackoverflow，这个算是一个比较老的网站，也算是全世界程序员都知道的一个网站，他是程序员用来问问题还有回答的地方，上面的问题也都是比较精辟，然后回答的也都比较详细，因为它这个社区有一个特别严谨又特别完善的规范，不是什么人都能问出一个好的问题来，如果问得不好的话就会被关闭，回答的不好的话也会被人呛，所以说他这种严谨的规范就造出来了这么一个比较完美的社区，这上面基本上所有的软件开发的问题都能在上面找到，大家搜问题的时候在谷歌上那肯定出来的结果前几条就有这个网站，大家没事也可以去浏览一下，看看有哪些待解决的问题，自己也可以去试着回答一下。只有在自己给别人讲明白了之后，才能说明自己真正的懂了。</p><p><a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer">Stack Overflow - Where Developers Learn, Share, &amp; Build Careers</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="freecodecamp">freecodecamp<a class="hash-link" href="#freecodecamp" title="标题的直接链接">​</a></h3><p>FreeCodeCamp 这个网站就比较好玩，它主要是学前端的。然后呢，它是有一系列的学习步骤，然后每个学习章节都有一些小的练习题，然后等把这一套练习都做完之后，就能把这个技术给掌握了。另外呢，他最后还会有练手的项目让大家去做，把这个学完之后，他还可以给你颁发一些证书。</p><p><a href="https://www.freecodecamp.org/" target="_blank" rel="noopener noreferrer">Learn to code|freecodecamp.org</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="各个库的官网">各个库的官网<a class="hash-link" href="#各个库的官网" title="标题的直接链接">​</a></h3><p>再接下来就是一些库的官网，比方说 react, vue, angular。 咱们要学习的话，就去看看它们官方文档的入门示例，把第 1 个项目跑起来，然后慢慢的再去研究它一些高级的特性。能尽快的运用到工作中去，就先应用到工作中去，一些高级的东西可以在工作中慢慢的再去学。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="国内">国内<a class="hash-link" href="#国内" title="标题的直接链接">​</a></h2><p>好，咱们说完国外的一些网站之后，就来看看咱们国内的，因为国内的就好多文章都是一模一样的，而且有的还是标题党，只有一点点东西，所以说好多就是浪费时间，不过还是有一些好的大家也可以自己去鉴别一下。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="segmentfault">SegmentFault<a class="hash-link" href="#segmentfault" title="标题的直接链接">​</a></h3><p>思否这个网站算是质量也比较高的，之前有好多同事也推荐给我看，但是呢，他就是只记得这个 logo 是绿色的，他也忘了这个名字是什么，大概这个网站知道他名字比较少，是因为这个名字又长又不好记，它叫 segment fault。里面也是各种文章都有，但是对于前端也是比较多的。</p><p><a href="https://segmentfault.com/" target="_blank" rel="noopener noreferrer">SegmentFault - 思否</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="掘金">掘金<a class="hash-link" href="#掘金" title="标题的直接链接">​</a></h3><p>掘金跟那个 segment fault 这个网站基本上类似，这也是有各种类别的，然后前端的话也算是比较热门的一个类别，但是呢，他这个重点咱们看一下他们这个官网，前端的这些热榜基本上就是关于面试的，还有工作原理的，另外还有一些实践的项目。</p><p><a href="https://juejin.im/timeline" target="_blank" rel="noopener noreferrer">掘金</a></p><p><a href="https://juejin.im/user/5ae7e5ecf265da0b851ca45b" target="_blank" rel="noopener noreferrer">掘金 - 个人主页</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="简书">简书<a class="hash-link" href="#简书" title="标题的直接链接">​</a></h3><p>简书这个现在已经慢慢的淡出程序员的这个视野，因为他最近改版改的对这个作者都很不友好，但是呢，好歹他也火过一阵，所以这里再推荐一下，上面还会有一些遗留的比较好的文章。大家如果搜索某个问题或者是某个概念的时候，关注一下这个简书的搜索结果也可以。</p><p><a href="https://www.jianshu.com/" target="_blank" rel="noopener noreferrer">简书 - 创作你的创作</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="csdn">CSDN<a class="hash-link" href="#csdn" title="标题的直接链接">​</a></h3><p>CSDN 算是一个特别老牌的社区了，我也是从 2010 年在上边写了第 1 篇文章，然后到现在就已经有 10 年多了，也断断续续的没写过多少，当时 10 年的时候写文章还是有好多阅读量，但是现在的话写完基本上就没什么看， 上面的人就已经是特别爆满了，而且。这文章也是质量参差不齐，它的推荐系统也一直在改版，所以现在还不好说未来是什么样子。如果大家用百度搜问题的话，可能它的这个搜索结果会比较多，但是就是对作者不太友好，因为他有好多文章就是容易被抄袭，好多就是写的一模一样的。但是呢，它上面有一些新闻，还有一些有价值的文章，大家还是可以去关注一下。</p><p><a href="https://www.csdn.net/" target="_blank" rel="noopener noreferrer">CSDN - 专业的技术社区</a></p><p><a href="https://blog.csdn.net/fengqiuzhihua" target="_blank" rel="noopener noreferrer">CSDN 我自己的博客</a></p><p>好了，这些就是我平时会去看的一些网站，我相信大家应该也都差不多知道这些，因为前端还有关于编程的网站也不是特别多，但是呢，如果小伙伴们没接触过这些网站的话，也可以去看看，同时呢也能了解我自己平时都是怎么学习的。希望这个文章能对大家有帮助，如果有什么疑问的话欢迎给我留言。</p>]]></content:encoded>
            <category>前端</category>
            <category>职业</category>
        </item>
        <item>
            <title><![CDATA[2020年最新前端工程师学习路线]]></title>
            <link>https://kuizuo.cn/front-end-learning-path</link>
            <guid>front-end-learning-path</guid>
            <pubDate>Fri, 26 Feb 2021 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>这段日子在 B 站上收到小伙伴最多的要求就是出一个前端学习路线，我能够充分的感受到大家抓耳挠腮加挠墙的迷茫~所以在这里给大家总结了一套前端学习路线。先从初级前端工程师所需的技能开始，然后一路升级到高级工程师该掌握的技能，层层相扣，让大家在工作中能游刃有余。最后附上我自己是如何从一个后端工程师转成了前端工程师^^。希望我的经历能对大家有帮助。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>注意：这篇文章中有推广链接，对你的阅读体验并没有影响，不过如果你通过链接购买了商品，那么会帮助 UP 主恰饭，以支持 UP 创作更多优质的内容。谢谢支持🍙！</p></div></div><p>俗话说知己知彼百战不殆，要成为一名前端大神，首先知道它是做什么的。单纯从工作角度看，无非就是写写前端样式，连接下后台 api，解析解析数据，然后显示给用户，核心逻辑是这样没错，只是这中间掺杂着无数个边边角角的问题，比如框架选择、性能优化、兼容性调整、工程化等等。不过呢，这些并不需要一次性掌握，随着一次一次完成工作任务，解决 bug，这些自然而然就学会了~</p><p>在正式开始之前，咱们先把心态放平，就像玩游戏，游戏满级也不是一天两天的事，满级之后也才是一个新的开始。。。无尽的追求完美~。时间上，掌握前端工程师的基本技能大概需要 4 个月到 1 年的时间（看自己的意志力和上进心），之后就是在工作实践中不断的提升自己，时刻关注业界新闻，保持在科技的最前沿。工作是一个长期的事情，咱们静下心来慢慢学。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="完整技能大图">完整技能大图<a class="hash-link" href="#完整技能大图" title="标题的直接链接">​</a></h2><p>先来看 github 上一大神制作的路线图：</p><img loading="lazy" alt="前端学习路线图" src="/img/2020-02-26-frontend-learning-path/frontend.png" class="img_ev3q"><p><a href="https://roadmap.sh/frontend" target="_blank" rel="noopener noreferrer">https://roadmap.sh/frontend</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="核心技能">核心技能<a class="hash-link" href="#核心技能" title="标题的直接链接">​</a></h2><p>好了，相信你已经开始下定决心要成为前端大神了，那咱们第一步就是把前端的核心装备拿下，它们分别是 <code>html</code>, <code>css</code> 和 <code>JavaScript</code>。前端的初衷是开发网页来让其他人看的，可以向全世界分享信息，直到最近几年才诞生了利用这些核心知识去开发移动 APP、小程序等多终端前端应用的工具，学好核心是前端工程师必备的素养。下边就是核心技能的简介：</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html">HTML<a class="hash-link" href="#html" title="标题的直接链接">​</a></h3><p>HTML 是用来编写网页代码结构的，它有一系列的标签用于显示不同的页面元素，比如用 <code>&lt;a/&gt;</code> 显示一个超链接，<code>&lt;img/&gt;</code> 显示一张图片，就跟写一个 word 文档一样，只是单纯用 html 只能写内容，不能进行排版和美化样式，如果让网页变得漂亮，需要 CSS。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/learn/HTML" target="_blank" rel="noopener noreferrer">学习 HTML ：指南与教程</a></p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgRXHV0RBxA3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUBEAFTH14XMkVlIwEHcFJ2ZDR9L0tAEGwIBRASC2ILWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEBUx9SEAsQDlYrXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7CxIEUBwJEgtBD1QSXhFWFldVTFIdCxpTBx9TFlBAB1ErWRQDFg4%3D" target="_blank" rel="noopener noreferrer">Web 开发经典丛书：HTML &amp; CSS 设计与构建网站</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="css">CSS<a class="hash-link" href="#css" title="标题的直接链接">​</a></h3><p>CSS 是用来美化 HTML 编写的页面的，通过一些语法选择特定的 html 标签，然后用一些属性来给它们添加样式，比如文字颜色，背景，位置，边距，定位等等，还可以添加动画效果让页面显示的栩栩如生~。重点要掌握 CSS 的盒子模型、常用的布局方式，比如 flex、grid 等。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS" target="_blank" rel="noopener noreferrer">CSS - 设计 web</a></p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgRRG1odABY3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUBFgdUE1kRMm5vT2Aed2JnZy9PDVVjVXdVRjBRR2ILWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEBUx9TFQMTA1crXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7UEVQXRkJElZGVAVPXkYDGlRST1tFVhdQXB5SQlAWBVQrWRQDFg4%3D" target="_blank" rel="noopener noreferrer">CSS 权威指南（第四版）（上下册）</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="javascript">JavaScript<a class="hash-link" href="#javascript" title="标题的直接链接">​</a></h3><p>在写完 html、css 之后，咱们就可以写漂亮的页面了，那么接下来就是需要学习 JavaScript，让网页能和人进行互动，比如点击按钮弹出个对话框，处理用户输入的表单信息，添加一些复杂的动画，使用 ajax 加载远程数据等等。它可以直接操作 HTML 元素，给网页开发提供了无限可能~这里咱们一定要把 JavaScript 基础语法掌握扎实，可以观看我 B 站上的 JavaScript 视频：</p><p><a href="https://www.bilibili.com/video/av87847392/" target="_blank" rel="noopener noreferrer">JavaScript 基础教程 | 2020 年最新</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript" target="_blank" rel="noopener noreferrer">JavaScript — 用户端动态脚本</a></p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgZdHV4QABU3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUDGgFQHlkSMldXVh0SEHhkYlUYEmABE1AuRhpHdmILWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEBUx9TFwoaBFUrXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7URMCVhldFgoUV1MfXkdWRlQHGlsVAkIOAkwPHQsQBAUrWRQDFg4%3D" target="_blank" rel="noopener noreferrer">JavaScript 权威指南（第 6 版）</a></p><p>书籍：<a href="https://eloquentjavascript.net/" target="_blank" rel="noopener noreferrer">Eloquent JavaScript 3rd edition (包括 HTTP)</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="网络基础">网络基础<a class="hash-link" href="#网络基础" title="标题的直接链接">​</a></h3><p>现在咱们可以做成型的网站了，那咱们该如何让全世界的人看到咱们的杰作呢？那这里网络基础就派上用场了，不需要精通，只需要掌握几个基本概念就好了。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="域名">域名<a class="hash-link" href="#域名" title="标题的直接链接">​</a></h4><p>访问网站咱们都知道需要使用 url (网址)，比如 <a href="http://www.baidu.com%EF%BC%8C%E8%BF%99%E4%B8%AA" target="_blank" rel="noopener noreferrer">www.baidu.com，这个</a> baidu.com 就是域名，域名可以从域名提供商购买，比如阿里云。在购买域名之后要通过 DNS 解析服务把它对应到一台服务器的 IP 地址上。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Common_questions/What_is_a_domain_name" target="_blank" rel="noopener noreferrer">什么是域名？</a></p><p><a href="https://www.aliyun.com/minisite/goods?userCode=idwbk8q2" target="_blank" rel="noopener noreferrer">阿里云</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="服务器">服务器<a class="hash-link" href="#服务器" title="标题的直接链接">​</a></h4><p>服务器就是一台安装了服务器程序的电脑。用户用域名访问一个网站时，会有 DNS 解析服务把域名解析成 IP，再通过 IP 找到相应的服务器，服务器程序就把网站内容传递给用户的浏览器。咱们的网站就部署在服务器上，它也是从阿里云之类的提供商购买。</p><p><a href="https://www.aliyun.com/minisite/goods?userCode=idwbk8q2" target="_blank" rel="noopener noreferrer">阿里云</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux">Linux<a class="hash-link" href="#linux" title="标题的直接链接">​</a></h4><p>服务器的操作系统一般是 linux，它可以没有用户界面，可以节省很多 CPU 和内存资源，这样就要求咱们掌握一些常用命令，比如创建文件，切换目录，复制和移动文件，显示文件列表等。另外访问服务器常用的工具是 SSH 和 FTP，咱们需要通过这几个工具来从自己的电脑连接到远程的服务器，然后安装服务器程序和上传网站程序。</p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRtTEAsaD1ESXBwyFgBUGVsUBxoGVxlrUV1KWQorAlBHU0VeBUVNR0ZbSkdETlcNVQtHRVNSUVNLXANBRA1XB14DS10cQQVYD21XHgNSGlkVAxcPVBlZJVVFVxN7Gx1fcnBPHwUSSmhfLkwkckQeC2UaaxUDEwRXGlwTAxs3ZRtcJUN8D1MSWxcyEzdVH1IWBBEAXBhZFwUUN1IbUiUCGwBVElsSBhoOXXUaJTIiBGUraxUyETcXdV0WChoGU0wOQlcaU1ATUkYLFAAATlkRV0cEVxNZFAARN1caWhEL" target="_blank" rel="noopener noreferrer">鸟哥的 Linux 私房菜 基础学习篇(第 4 版)</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="服务器程序">服务器程序<a class="hash-link" href="#服务器程序" title="标题的直接链接">​</a></h4><p>常用的服务器程序有 apache、nginx，它们都是基于 HTTP 协议的，有了服务器程序，网站文件比如 html 页面才能发送到用户的浏览器上。</p><p><a href="https://www.nginx.cn/doc/" target="_blank" rel="noopener noreferrer">Nginx 中文文档</a></p><p><a href="https://httpd.apache.org/docs/2.4/zh-cn/" target="_blank" rel="noopener noreferrer">apache 中文文档</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="http-协议">HTTP 协议<a class="hash-link" href="#http-协议" title="标题的直接链接">​</a></h4><p>协议好比如说医生开药方，写的龙飞凤舞，但是药房药师居然都看得懂~这个可以说他们都有固定套路来理解对方~那么在计算机领域，协议就是电脑之间用来交换数据的规则。HTTP 协议是用来在网络上交换和传输数据的，比如说咱们的网站 html、css 和 js 就是通过这个 http 协议来发送到浏览器的。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Overview" target="_blank" rel="noopener noreferrer">HTTP 概述</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="进阶技能">进阶技能<a class="hash-link" href="#进阶技能" title="标题的直接链接">​</a></h2><p>上边核心技能都掌握了的话，你就已经超过一半的前端工程师了，接下来就是成长为更高级一些的前端工程师，这里的目的是除了理解一些高级的概念之外，还要提高开发效率，也就是用到所谓的框架。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="响应式布局">响应式布局<a class="hash-link" href="#响应式布局" title="标题的直接链接">​</a></h3><p>现在手机和平板差不多要比电脑都流行了，所以一个网站要适应不同尺寸的屏幕，有这种特性的网站就叫做响应式网站。实现响应式主要就是通过 css 的 <code>media query</code> 针对不同的屏幕宽度，编写不同的 CSS 样式。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web_Development/%E5%93%8D%E5%BA%94%E5%BC%8F_Web_%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener noreferrer">响应式 Web 设计</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="兼容性调整">兼容性调整<a class="hash-link" href="#兼容性调整" title="标题的直接链接">​</a></h3><p>网站需要在不同的操作系统和浏览器下都要保持一致。对于 CSS，可以使用 css hack 来对不同的浏览器加载不同的样式。 对于 JavaScript，则可以使用 Babel 等转化工具，把新的 JS 语法转换成旧的，或者使用 polyfill 加上浏览器不支持的语法。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction" target="_blank" rel="noopener noreferrer">跨浏览器测试介绍</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ui-框架">UI 框架<a class="hash-link" href="#ui-框架" title="标题的直接链接">​</a></h3><p>UI 框架提供了页面的基本 UI 样式和布局系统，比如按钮、对话框、轮播图，省了自己去开发，常用的有 Boostrap, Semantic UI， Tailwind CSS。</p><p><a href="https://getbootstrap.net/" target="_blank" rel="noopener noreferrer">Bootstrap</a></p><p><a href="https://zijieke.com/semantic-ui/" target="_blank" rel="noopener noreferrer">Semantic UI</a></p><p><a href="https://www.tailwindcss.cn/" target="_blank" rel="noopener noreferrer">Tailwind CSS</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="seo">SEO<a class="hash-link" href="#seo" title="标题的直接链接">​</a></h3><p>SEO 全称是 Search Engine Optimization，搜索引擎优化。咱们常见的百度、谷歌这些搜索引擎会定期爬取线上的网站内容，然后进行收录，网站内容质量优秀、结构良好、访问量大的还会排名比较靠前。为了给自己的网站增加曝光量，这就需要针对搜索引擎给咱们的网站添加一些内容，比如关键字。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/MDN/Contribute/Howto/Write_for_SEO" target="_blank" rel="noopener noreferrer">如何带着 SEO 的思维将 MDN 的 Web 文档写的更符合搜索引擎展现</a></p><p><a href="https://www.w3cschool.cn/kfm2f1/" target="_blank" rel="noopener noreferrer">SEO 基础知识教程</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nodejsnpm--yarn">Node.js、npm / yarn<a class="hash-link" href="#nodejsnpm--yarn" title="标题的直接链接">​</a></h3><p>因为 Node.js 的出现，JavaScript 的开发可以脱离浏览器了，这样就产生了好多借助 Node.js 来写前端代码的方式，然后用相应的打包工具去打包成浏览器可用的代码。这样的好处是，咱们可以充分利用 node.js 的包管理工具来方便开发，比如使用 npm 或者 yarn 管理项目的依赖。</p><p><a href="http://nodejs.cn/" target="_blank" rel="noopener noreferrer">Node.js</a></p><p><a href="https://www.npmjs.cn/" target="_blank" rel="noopener noreferrer">npm</a></p><p><a href="https://yarn.bootcss.com/" target="_blank" rel="noopener noreferrer">yarn</a></p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgRQGF8RChE3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUBFwRRH1MWMlJlLk4iHHgSYgFPI2tJZH4lYiYWdnILWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEBUxxcEQIaD1ErXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7VhMPU0wLEFFBVFdMXhUHQA9TS15GAEZSXR5dFgdGAgArWRQDFg4%3D" target="_blank" rel="noopener noreferrer">Node.js 实战 第 2 版</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="css-预编译">CSS 预编译<a class="hash-link" href="#css-预编译" title="标题的直接链接">​</a></h3><p>咱们在写 CSS 的时候可能一段代码要重复好多次，写一连串的选择器，重复的属性组合等等。这时 CSS 预编译工具就派上用场了，比如 SASS、LESS，它们支持 CSS 选择器嵌套、定义变量、Mixins、函数、继承等等。</p><p><a href="https://sass.bootcss.com/documentation" target="_blank" rel="noopener noreferrer">SASS</a></p><p><a href="http://lesscss.cn/" target="_blank" rel="noopener noreferrer">LESS</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动化工具">自动化工具<a class="hash-link" href="#自动化工具" title="标题的直接链接">​</a></h3><p>自动化工具有 grunt、gulp 等，可以监控文件变动，或者做一些自动化操作，比如编译 SASS 或 LESS 的代码为 CSS 等。</p><p><a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener noreferrer">gulp</a></p><p><a href="https://www.gruntjs.net/" target="_blank" rel="noopener noreferrer">grunt</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="react-vue-angular">React, Vue, Angular<a class="hash-link" href="#react-vue-angular" title="标题的直接链接">​</a></h3><p>这里就不得不提当下十分热门的前端开发框架了，React、Vue、Angular 三大件。它们都提供组件化开发的方式，这就让前端开发模式发生了巨大的变化，以往以页面为核心现在转为了以组件为核心，有了这些组件可以方便的在不页面进行复用。另外基于状态的数据管理，也让改变组件状态变得十分简单。这三个框架可以都学，但是工作中基本上只会用到一个，深入一个就可以了。至于它们的 UI 框架也可以根据工作的需要去学习比如 ant design、element UI 等。</p><p><a href="https://zh-hans.reactjs.org/" target="_blank" rel="noopener noreferrer">React</a></p><p><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer">Vue</a></p><p><a href="https://angular.cn/" target="_blank" rel="noopener noreferrer">Angular</a></p><p><a href="https://ant.design/" target="_blank" rel="noopener noreferrer">Ant Design</a></p><p><a href="https://element.eleme.cn/" target="_blank" rel="noopener noreferrer">Element UI</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块化-css">模块化 CSS<a class="hash-link" href="#模块化-css" title="标题的直接链接">​</a></h3><p>因为 React 等组件化工程的出现，CSS 分散在不同的组件中，很容易因为命名冲突而导致样式被覆盖，模块化的 CSS 开发方式通过使用 css modules， 或者 styled-components (css-in-js 方式) 工具能很好的避免这些问题，它们也提供了其它类似 SASS/LESS 的功能。</p><p><a href="https://www.html.cn/create-react-app/docs/adding-a-css-modules-stylesheet/" target="_blank" rel="noopener noreferrer">CSS Modules</a></p><p><a href="https://styled-components.com/" target="_blank" rel="noopener noreferrer">styled-components</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="工程化工具">工程化工具<a class="hash-link" href="#工程化工具" title="标题的直接链接">​</a></h3><p>所谓工程化的工具，也就是打包工具，前端项目的各种 JS、SASS 源代码可能分散的不同的地方，利用打包工具，比如 webpack、parcel，可以把它们打包成一个单一的 js 和 css 文件，它们支持按需打包，用到的代码才会打包到最终产品上，没用到的则不会。另外图片等静态资源也可以指定规则进行打包。</p><p><a href="https://www.webpackjs.com/" target="_blank" rel="noopener noreferrer">webpack</a></p><p><a href="https://zh.parceljs.org/" target="_blank" rel="noopener noreferrer">parcel</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="测试工具">测试工具<a class="hash-link" href="#测试工具" title="标题的直接链接">​</a></h3><p>没有人想要不健壮的代码，在改动一个地方之后引起全局崩塌~，咱们写好的组件需要进行详尽的测试才能确保不出问题，另外也方便咱们工程师节省时间，因为只要添加的新功能保证测试结果还是正常，那么就不需要再人工去测试了。常用的 UI 测试工具有 jest, enzyme 等等。</p><p><a href="https://jestjs.io/zh-Hans/" target="_blank" rel="noopener noreferrer">Jest</a></p><p><a href="https://airbnb.io/enzyme/" target="_blank" rel="noopener noreferrer">Enzyme</a></p><p><a href="https://github.com/zhaoqize/puppeteer-api-zh_CN" target="_blank" rel="noopener noreferrer">Puppeteer</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="高级技能">高级技能<a class="hash-link" href="#高级技能" title="标题的直接链接">​</a></h2><p>在把编写网页的技能掌握熟练以后，就要从多端开始拓展自己的技能了，另外还要深入已经掌握的技能。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="typescript">TypeScript<a class="hash-link" href="#typescript" title="标题的直接链接">​</a></h3><p>TypeScript 是微软编写的一款带类型的 JavaScript 语言，它的代码可以编译成普通的 JavaScript，但是编写的时候支持强类型，并且支持完全面向对象的形式。它的好处在于带有了类型之后，代码更容易维护，适合大型项目的开发。</p><p><a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer">TypeScript</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="移动开发">移动开发<a class="hash-link" href="#移动开发" title="标题的直接链接">​</a></h3><p>移动开发包括移动的页面 H5 开发、小程序和移动 APP 开发，好在这些有统一的开发平台，使用 React 或者 Vue 就可以进行一次开发，多平台使用。React 生态的有开发移动 APP 的 React Native，开发多端平台的 taro。 Vue 有多端开发的 uni-app。</p><p><a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer">React Native</a></p><p><a href="https://nervjs.github.io/taro/" target="_blank" rel="noopener noreferrer">Taro</a></p><p><a href="https://uniapp.dcloud.io/" target="_blank" rel="noopener noreferrer">Uni-App</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="桌面开发">桌面开发<a class="hash-link" href="#桌面开发" title="标题的直接链接">​</a></h3><p>桌面应用到现在还是有用武之地的，比如音乐软件，聊天软件，写作软件等等，这些也可以用前端技术开发，具体的工具有 eletron、proton native 等等。</p><p><a href="https://www.electronjs.org/" target="_blank" rel="noopener noreferrer">Electron</a></p><p><a href="https://proton-native.js.org/" target="_blank" rel="noopener noreferrer">Proton Native</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="静态网站生成工具">静态网站生成工具<a class="hash-link" href="#静态网站生成工具" title="标题的直接链接">​</a></h3><p>静态网站因为是纯 html、css 和 JavaScript 网站，所以拥有最快的速度、对 SEO 搜索引擎优化友好，最适合用于数据不常变动的展示、博客类的网站的搭建，常用的工具有 hexo, gatsby, docusaurus 等。</p><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener noreferrer">Hexo</a></p><p><a href="https://www.gatsbyjs.cn/" target="_blank" rel="noopener noreferrer">Gatsby</a></p><p><a href="https://docusaurus.io/docs/en/site-creation" target="_blank" rel="noopener noreferrer">Docusaurus</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssr服务端渲染">SSR（服务端渲染）<a class="hash-link" href="#ssr服务端渲染" title="标题的直接链接">​</a></h3><p>如果使用 React、Vue 等前端框架开发网站，那么最终的页面源代码是没有 html 的，因为它们是用 JavaScript 去动态生成 html 代码，这样对 SEO 很不利，不过有了 serer side rendering，服务端渲染技术，就可以解决这个问题，它是把 JavaScript 生成好 HTML 之后，再把页面发送给浏览器。常用的有 react 系的 next.js，vue 系的 nuxt.js。</p><p><a href="https://nextjs.frontendx.cn/" target="_blank" rel="noopener noreferrer">Next.js</a></p><p><a href="https://zh.nuxtjs.org/" target="_blank" rel="noopener noreferrer">Nuxt.js</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="graphql">GraphQL<a class="hash-link" href="#graphql" title="标题的直接链接">​</a></h3><p>GraphQL 是一种查询语言，跟普通的 restful 结构不一样，它是按照类型来组织数据的，不同的类型之间也会有对应关系，就像数据一样，前端开发者根据自己的需要编写 graphql 语句来按需查询想要的数据，它的这种模式非常适合 React 这种项目结构的开发。</p><p><a href="https://graphql.cn/" target="_blank" rel="noopener noreferrer">GraphQL</a></p><p><a href="https://apollographqlcn.github.io/react-docs-cn/index.html" target="_blank" rel="noopener noreferrer">Apollo</a></p><p><a href="https://relay.dev/" target="_blank" rel="noopener noreferrer">Relay</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="性能优化">性能优化<a class="hash-link" href="#性能优化" title="标题的直接链接">​</a></h3><p>性能优化的概念比较广泛，而且根据应用的用户量、用户类别而不同。总体来说就是提高页面首次加载的时间、动画执行的效率、事件响应的效率。这些可以通过优化代码结构、文件大小、DNS 缓存、lazy loading 等来实现。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Performance" target="_blank" rel="noopener noreferrer">Web 性能</a></p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgdQHl4RCxE3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUCFwJQH1IWMk1ANkFbD2BzZzYYLlZETFwoGUFjZEQLWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEBUxxZFAcaDlUrXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7AkUDVRsPRwMSUAIaXkFXQFQCSQ5CUEUEUk4LElAaBlIrWRQDFg4%3D" target="_blank" rel="noopener noreferrer">Web 性能权威指南</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安全">安全<a class="hash-link" href="#安全" title="标题的直接链接">​</a></h3><p>安全也是一个宽泛的概念，要了解 CORS（跨域资源共享）, XSS（跨站脚本攻击）, CSRF（跨站请求伪造） 等常见安全问题，也要了解 HTTPS 等安全协议，要尽量以周全的形式考虑，不要相信任何用户的输入，严格检查需要接收用户输入的地方。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security" target="_blank" rel="noopener noreferrer">Web 安全</a></p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgZUEloRBxo3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUDEw5UH14dMmEBN09ZRgRHZA1LAwsYcl8WSFJnWWILWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEBUxxeEwoVD1ArXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7BBEPXRIJEVdFA1IcXkJXFVQGH10VUhpVUh0LEQUaUFErWRQDFg4%3D" target="_blank" rel="noopener noreferrer">Web 安全测试</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="工作与团队技能">工作与团队技能<a class="hash-link" href="#工作与团队技能" title="标题的直接链接">​</a></h2><p>工作与团队技能是在工作中所必备的，无论是初级还是高级前端工程师，这些只要在工作遇到了，就都需要掌握。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="git">Git<a class="hash-link" href="#git" title="标题的直接链接">​</a></h3><p>Git 是一个分布式的代码协作工具，几乎所有的公司都在用。Github 是 git 的一个远程仓库，咱们可以把代码发布到 github 上，既可以作为公开的向全世界展示自己的代码、进行合作，也可以作为私有的只限自己或者公司内部使用。</p><p><a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%85%B3%E4%BA%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6" target="_blank" rel="noopener noreferrer">Git</a></p><p><a href="https://github.com/" target="_blank" rel="noopener noreferrer">Github</a></p><p>书籍：<a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgRVE1sQCxI3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUBEg9VHlIVMmZaKh4rbkd3Zz4BEGx9a1ULQFlgeWILWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEBUxxfFwIbAFQrXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7ARMEUhoLFQZCBl0fXhcEQg5WGAwWAxFSXBlYFAYRDwYrWRQDFg4%3D" target="_blank" rel="noopener noreferrer">精通 Git 第 2 版</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a class="hash-link" href="#docker" title="标题的直接链接">​</a></h3><p>Docker 是一种新的虚拟化技术，介于虚拟机和操作系统之间，它所用的资源少，并且能自动化管理镜像的运行环境和集群。因为前后端开发的分离的方式，大型的前端应用也会部署到 Docker 上。</p><p><a href="http://www.docker.org.cn/" target="_blank" rel="noopener noreferrer">Docker</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci">CI<a class="hash-link" href="#ci" title="标题的直接链接">​</a></h3><p>CI，持续集成，是一个自动化的部署过程，开发人员只需要改动代码，提交到 git 仓库，CI 系统会抓取代码进行打包部署并发布，节省了人工运维的时间。</p><p><a href="https://jenkins.io/zh/" target="_blank" rel="noopener noreferrer">Jenkins</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eslint-和-prettier">ESLint 和 Prettier<a class="hash-link" href="#eslint-和-prettier" title="标题的直接链接">​</a></h3><p>代码合作经常会有风格和规范不统一的情况。ESLint 除了可以检查语法错误外，还可以定义开发规范，比如缩进字符的数量、命名方式等，而 prettier 则可以根据一些规范自动格式化代码。</p><p><a href="https://cn.eslint.org/" target="_blank" rel="noopener noreferrer">EsLint</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="最新技术">最新技术<a class="hash-link" href="#最新技术" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="webassembly">WebAssembly<a class="hash-link" href="#webassembly" title="标题的直接链接">​</a></h3><p>Web Assembly 是浏览器新支持的编程语言，用于辅助 JavaScript。确切的说，它不是一个编程语言，咱们可以用它的编译器编译其它语言，用来编写更强大的功能，它目前支持 c++和 rust</p><p><a href="http://webassembly.org.cn/" target="_blank" rel="noopener noreferrer">Web Assembly</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-components">Web Components<a class="hash-link" href="#web-components" title="标题的直接链接">​</a></h3><p>Web Components 是类似 React、Vue 开发的方式，但是是 JS 原生支持的方式，不再需要依赖额外的库。它的核心概念有 Custom elements（自定义元素），Shadow DOM（影子 DOM），HTML templates（HTML 模板）。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Web_Components" target="_blank" rel="noopener noreferrer">Web Components </a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="最佳实践">最佳实践<a class="hash-link" href="#最佳实践" title="标题的直接链接">​</a></h2><p>在前端开发过程中有一些最佳实践需要了解，比如 JavaScript 的设计模式、组件设计原则、代码结构等。</p><p><a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRhaFgsaB1MfXRAyEgdWH1kcCxQ3EUQDS10iXhBeGlcJDBkNXg9JHU4YDk5ER1xOGRNLGEEcVV8BXURFUFdfC0RVU1JRUy1OVxUCEQNXElITMm9fHEkjfGQUZCZHLxxqCHIIQxtBSmILWStaJQITBlYZWhIEEw5lK1sSMkBpja3tzaejG4Gx1MCKhTdUK1sRCxEOVBNaFQQTBlwrXBULIgdcHFscAhUDXRJTe0MiN2UYayUyEjdWKxl7AhdQAR5aEwoTD1MZXhRQG1RVEllAUBMBUExeRwEXBlYrWRQDFg4%3D" target="_blank" rel="noopener noreferrer">JavaScript 设计模式</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="持续进步">持续进步<a class="hash-link" href="#持续进步" title="标题的直接链接">​</a></h2><p>在掌握了上边所有技能之后~咱们等级就算满级了，现在就是真正的开始了，要不断精进自己的技能。前端技术的发展相比其它技术要快的多，咱们要时常关注一些前端新闻还有业界大佬的博客或微博，自己主动去搜索一些新的前端库或者设计模式，然后应用到工作中去，这样才不至于落后。另外，因为好多技术都是外国人写的，所以要想得到第一手且最准确的消息，一定要把英语学好，一些包和工具的官方文档就算是靠着翻译也要把它们看懂，相信我，过不了几天，你会发现需要查的词越来越少，阅读速度也越来越快。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="个人经历">个人经历<a class="hash-link" href="#个人经历" title="标题的直接链接">​</a></h2><p>我在上学的时候学的是 Java 开发，那时候是前后端整体开发，前端主要就是 HTML，CSS 和 jQuery。我在找到的第一份 Java 开发的工作时就被迫见识到了前后端半分离的开发方式，那时候是 2010 年，前端库用的是 <code>ExtJS</code>，后端 Java web 开发框架用的是 struts2，来提供 JSON 数据，当时也是摸索了一阵子才彻底弄明白这个开发过程。后来在做自由职业的时候，又用 PHP 做过几个全栈的网站，前端那时候接触了 Bootstrap 框架，然后又摸索跨浏览器兼容性调整，知道了哪些 CSS 属性只有在哪个浏览器下才能生效。那个时候是 2012 年左右，html5 和 css3 已经开始流行了，然后我就把几个新出来的、觉得好玩的标签写了写，比如<code>&lt;video /&gt;</code> 和 <code>&lt;audio /&gt;</code>。再后来就又在业余时间接触了 Node.js，当时也不懂它是个什么玩意，所以就没咋去了解。</p><p>直到 2016 年，去美国读研，室友同学学了 web 开发，然后我才体验到了前端已经发生了天翻地覆的变化，于是趁着暑假，把 Node.js 这个东西搞明白了，无非就是个运行环境。。。然后看了下网上的意见，觉得 vue.js 在国内用的多，所以就看 vue 的官方文档开始学习，看完基础之后，就做了一个实战项目，模仿了一下网易云音乐的 UI，当时 CSS flexbox 布局已经定型了，我就用它来对页面上的元素进行布局。后来发现 web 端不好选取本地的音乐进行播放，而又当时室友正在学 <code>eletron</code>，就正好一想可以用它练习一下，就把它做成了桌面版的，用了 <code>howler.js</code> 添加了音乐播放、快进、快退功能。再后来又异想天开，把配色改了改，改的也不太好看，接着开学了就作罢了。</p><p>回国之后，因为我在美国主修的还是云计算和企业软件开发，所以想找找后端开发的工作，但是后端所用到的库也都发生了变化，不过还好有学分布式系统，有丰富的理论，我觉得面试肯定没问题，，实际情况是到处碰灰，面试的看我没相关工作经验，框架也没用过，都表现出特别不懈一顾的厌恶情绪，好嘛，我也不是没志气的人，话不投机半句多，走人~后来一想在学校的时候对前端还是有兴趣的，一番搜索调查后，我又把目光描向了 React，看了几天官方文档之后就去面试。。。我这里十分感谢招我进去的两位经理大佬了，给了我机会去学习，去成长。这是 2018 年 7 月，<strong>我转型成了前端工程师</strong>。公司只有我一个前端 web 端，入职当天下午就开始给我分配任务，开发一个<a href="https://award-turbo.huaxing.com/" target="_blank" rel="noopener noreferrer">影响力榜单申报系统</a>，超多表单，超多验证规则，要 4 周也就是一个月的时间内完成，压力也是蛮大的，当时头儿让我用 dva.js 来开发，当时听也没听过，就去它的官方网站看了看，基本是基于 model 形式的去管理状态，不过后来发现这种状态管理起来也还真是费劲，经过一番折腾，外加周末也加加班，这个项目算是按时搞定了，期间有无数的 bug 和需求变动，经过这些我对 React 组件化开发的方式有了彻底的认识。</p><p>后来第二个项目是做一个中台项目，因为有技术大佬实现了 GraphQL 接口，我趁机体验了一把 React 与 GraphQL 的结合，那真是相当的爽，再也不用手动管理 API 请求和请求的状态了。我在谷歌上搜索了一下 React 连接 GraphQL 的库，一个是 Relay，一个是 apollo，对比了一下两者的官网文档上的教程，觉得 Apollo 比较好用，就按着文档学起来，再结合着 GraphQL 的官方文档看看它的结构定义，然后把这些慢慢的用到了项目里。另外，当时关注 React 新闻发现 React Alpha 版出了 hooks，我想这个系统既然也是内部用，就用了这个版本，参考 React Hooks 官方文档，写了点例子，又发现不少问题谷歌 StackOverlow 等等一通查，终于把它搞明白了，之后在项目里发现真是解放了。。。再也不用定义 class 了（除了异常捕捉组件），逻辑和表现也可以分离了，效率大大的提高。</p><p>2019 年做了<a href="https://cri.vip/" target="_blank" rel="noopener noreferrer">鹰眼投研</a>这个老板的项目，相当大的一个项目，大概有 40-50 个页面，100 多个组件，由我主领，技术总监和一个合作同事参与共同开发的，耗时大概 3 个月，期间我搜罗、接触了形形色色的前端库，项目的样式是基于一个 css-in-js 库，<code>styled-components</code> 开发的，它可以把组件连同样式一起组件化，我还用 Apollo Server 写了 GraphQL 的 server 方便接口调用，又用了 ECharts 配置大量的图表，有柱状图、线图、热力图、中国地图...，还用 websocket 实现了聊天的客户端，唯一没有用到的就是 redux，这个玩意对于这种多页的大型应用来说，并不实用，一是模板代码太多，二是没有太多需要保存全局状态的地方。而对于这种大型项目，使用 React Hooks 构建可复用的组件和逻辑非常适合，在这个项目里好多页面都用到了筛选表格，我把筛选的逻辑写到了 hooks 里边，然后定义了几种通用的筛选样式，让每个有不同筛选条件的页面只需要按需组合就好，分页也是一样的道理，所有带分页的组件都是使用分页 hooks 实现的，还有其它一些 hooks，比如请求后端数据等。这个项目中用到了几乎这个路线中所有提到的技术，从中学到了不少的东西。</p><p>这些就是我个人的一些成长经历，我自己擅长的可能就是对一个网站进行组件化分析和拆解这样，争取做到一行代码实现一个页面这种效果。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>这篇文章尽可能详细的列举了前端工程师该掌握的技能，但是根据工作要求的不同，一些细节的框架可能没有提到，不过相信咱们在经过这么久的学习、打怪升级之后，那些个小框架都不在话下。有了良好的基础，以后咱们在工作中都能节节高升~走向人生巅峰！</p>]]></content:encoded>
            <category>前端</category>
            <category>职业</category>
        </item>
        <item>
            <title><![CDATA[第 N 个第一篇博客]]></title>
            <link>https://kuizuo.cn/first-blog</link>
            <guid>first-blog</guid>
            <pubDate>Sun, 21 Feb 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[每次博客一搬家，旧的就不想折腾了，然后就重新从第一篇开始写....]]></description>
            <content:encoded><![CDATA[<p>每次博客一搬家，旧的就不想折腾了，然后就重新从第一篇开始写....</p>]]></content:encoded>
            <category>杂谈</category>
        </item>
        <item>
            <title><![CDATA[为何我选择日夜颠倒敲代码]]></title>
            <link>https://kuizuo.cn/why-i-turn-night-into-day-to-code</link>
            <guid>why-i-turn-night-into-day-to-code</guid>
            <pubDate>Sun, 03 Jan 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[其实我很早就想写这个话题了。因为我是一个熬夜大户，经常动不动就是 3,4 点睡觉，甚至有时候是日夜颠倒的作息习惯，如同过美国时间般。但与常人想法不同，我巴不得在保持这种作息状态。我会分以下几点来阐述我这一不正常的行为，相对于我而言的好点。]]></description>
            <content:encoded><![CDATA[<p>其实我很早就想写这个话题了。因为我是一个熬夜大户，经常动不动就是 3,4 点睡觉，甚至有时候是日夜颠倒的作息习惯，如同过美国时间般。但与常人想法不同，我巴不得在保持这种作息状态。我会分以下几点来阐述我这一不正常的行为，相对于我而言的好点。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="对我而言的好处">对我而言的好处<a class="hash-link" href="#对我而言的好处" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安静">安静<a class="hash-link" href="#安静" title="标题的直接链接">​</a></h3><p>夜生活过的人应该最清楚了，那种静可以算上是幽静了，加上黑夜的承托与屏幕前的微光，如果恰好此时耳机还播放着音乐，好了，直接进入自我境界。</p><p>这种安静与图书馆的安静是根本无法相比的，图书馆可能还有走动声，而凌晨你唯独只能听见自己的脚步声（不排除有上厕所的室友，有时候可能被其吓得一跳），最主要还是黑，你的视野中除了屏幕的信息外几乎很难有其他东西去干涉你。</p><p>你问我用的什么键盘？程序员不都用静电容的键盘吗？机械键盘的声音在晚上敲怕不是给室友去世器。(tips: 室友包括我)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="琐事">琐事<a class="hash-link" href="#琐事" title="标题的直接链接">​</a></h3><p>安静也许远远还不够，想要达到与世隔绝的地步，在互联网这个时间段最简单的办法就是断网。如果事情都与你毫不相干，那也差不多已经与这个世界说拜拜了，但在白天你还是有一定的存在感，会有一些莫名的琐事干涉你当前正在进行的状态。</p><p>我就说一个最简单的例子，假如你正在编写一个功能的时候，此时手机正好弹出一条信息（通常为广告），此时大多数人基本上就去看手机去了，意志力好一点的可能看完直接回到手头的任务上，差一点的可能就是几十分钟的短视频，也许很夸张，但确实如此。</p><p>所以我一般都会在 0~6 点开启勿扰模式（睡眠模式），但在白天却又不能错过很多重要的信息。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="思考">思考<a class="hash-link" href="#思考" title="标题的直接链接">​</a></h3><p>可能对我而言，灵感通常是在睡前（准确说是夜深时）产生的，同时脑子里想的东西也会比白天而言多，想的多自然写的东西也就多，所以也就是我为什么很多代码 Commit 与博客编写时间都是在 0~6 点这个时间，就连这篇文章也都是在夜间写的，白天实在是想不出什么点来写。</p><p>也许与静也有相关，白天普遍嘈杂的声音，说实话很难让人能静下来去冥想，但在夜晚，静确实它唯一的资本。</p><p><strong>唯有夜深人静，才有自我深思。</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="工作效率">工作效率<a class="hash-link" href="#工作效率" title="标题的直接链接">​</a></h3><p>在我亲身体验下来，可以毫不夸张的说，我在夜晚的工作效率可以是白天的 3，4 倍，没错就是这么恐怖。</p><p>至于原因，大概率（99%）是由上面几点导致的，所以也就是为什么我巴不得在夜深人静的时候开始 doing，也就导致这异于常人的作息规律。</p><p>但回想 1 小时抵 3 小时，怎么想都是赚，换做你，会考虑这样的作息吗？</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="对我而言的坏处">对我而言的坏处<a class="hash-link" href="#对我而言的坏处" title="标题的直接链接">​</a></h2><p>其实坏处都不用写，是个正常作息的一眼就能看出来，我也不细说了。</p><p>但往往事与愿违，上面的这种作息行为都有点压榨白天的时间，而白天总要上学，上班，周末又不可能一次性就调整成这样的作息，所以我这种情况一般也都发生在长假期，也就是寒暑假（包括这次的寒假）。但其实大多时间还都是夜间做事，只是假期的夜间时间相对延后亿点。</p><font size="1">~~与好处相比，除了猝死其他都还能接受。~~</font><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>原本标题我是起为什么喜欢熬夜，但后来我并不认为我是在熬夜，只是时间相对错乱，每天睡觉的时间与正常作息并没有差别，唯一的差别估计就是天亮了我睡了，天暗了我醒了。主要还是强调作息，所以便有了这个标题。</p><p>当然我写这篇文章也不是想要倡导夜间做事有多好，每个人都有属于自己适应的时间段，比方说有些人就喜欢早晨背单词，而有些则是睡前，道理都是同样的。我只是觉得我这种习惯比较异类，也许也有人的作息习惯和我臭味相投。</p><p>⚠️ 非专业人士，请勿模仿</p>]]></content:encoded>
            <category>随笔</category>
            <category>杂谈</category>
        </item>
        <item>
            <title><![CDATA[第一个博客搭建之Vuepress]]></title>
            <link>https://kuizuo.cn/first-blog-is-vuepress</link>
            <guid>first-blog-is-vuepress</guid>
            <pubDate>Sun, 30 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[感谢 vuepress-theme-reco主题与一篇博客使用文章使用 vuepress 构建个人博客]]></description>
            <content:encoded><![CDATA[<p>感谢 <a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco</a>主题与一篇博客使用文章<a href="https://lookroot.cn/views/article/vuepress.html#reco%E4%B8%BB%E9%A2%98" target="_blank" rel="noopener noreferrer">使用 vuepress 构建个人博客</a></p><p>在写这篇文章前，本人非前端专业人士，只是一时兴起想开始搭建一个博客，在该博客上记录与分享一下自己所学的一切内容。（然后现在都在往前端这方向走了😂）</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="补充">补充<a class="hash-link" href="#补充" title="标题的直接链接">​</a></h2><p>不打算破坏之前所写的一些内容，将一些补充的内容写在开头，目前访问 kzcode.cn 依旧能访问到该站，不过文章都保留原有未变动，图片都是直接跟随 MD 文档下，加上服务器又比较拉，所以访问会稍带卡顿。这篇合理来说也算我的第一篇博客，所以还是有必要记录一下的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="为什么写博客">为什么写博客<a class="hash-link" href="#为什么写博客" title="标题的直接链接">​</a></h2><p>在接触软件行业的这一年里，也学到了很多很多很多的知识，也让我感受到代码的魅力与强大。在这学习过程中，百度到了各种相关学习文章，而这些正式前辈们所分享的学习经历，倘若没有这些，我可能早已停下学习的步伐。一时兴起，萌生了搭建博客的想法，然后开始搜索搭建博客的知识，于是乎就有了这篇文章。</p><p>写博客是为了记录自己，记录自己学习中的过程，知识，遇到的坑，写成一篇文章，也许过了几个月后的自己脑子不好使，忘记是如何解决的，回过头来看，瞬间焕然大悟。同时也能巩固自己所学的，在如今这个时代，技术更新换代是真的快，而要求学的东西也就越来越多。有时候学过的一项技术，过了几个月真的说忘就忘，不时常记录一下当初写的笔记，翻看之前写过的代码，那真的就和重新学习没什么两样了。</p><p>在此期间曾遇到许多坑，而解决最好的办法就是百度。在百度搜索过程中看到了许许多多的学习者分享自己那时候与我遇到一样的问题，说明他是如何解决的，并写文章。有时运气好可能他的解决办法同样也是我的解决办法，但往往总是不尽人意，这时需要再看下一个相关搜索或者下下个才能解决我的问题，这在学习过程中是必不可少的一个环节。而他们所分享的内容，就是一篇篇的博客。正是这一篇篇博客解惑学习者学习中的问题，让他们有自信再去学习下去！</p><p>于是就萌生的一种想法，利用自己所学的 Web 知识开始搭建属于自己的个人博客，分享自己所遇到的坑，希望能解决遇到同样问题的人。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="初步搭建博客界面">初步搭建博客界面<a class="hash-link" href="#初步搭建博客界面" title="标题的直接链接">​</a></h3><p>要展示给别人看，就必须得搞前端 UI 界面，同时为了快速开发，我又百度了相关的前端 UI 框架，其中决定用 layui，界面风格布局可以接受，于是乎在搜索用过 layui 框架搭建的个人博客，成功找到一篇博主<a href="https://www.yanshisan.cn/" target="_blank" rel="noopener noreferrer">燕十三一个人的江湖</a>分享的模板源码，然后开始大改，最终花了几个小时修改了大致页面</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20200901012343086.png" alt="image-20200901012343086" class="img_ev3q"></p><p>然后问题来了，前端大致界面设计好了，我最关心的文章要怎么写。。。而这份源码是没有给后端这些的（此时的我刚入前端，后端毛也不会），就一个纯前端页面，连文章模板都没有，可能是真的没什么可整理的，于是就放弃了自己手动搭建，主要还是那时候太菜了。</p><p>就在想用纯静态页面，还是用动态页面，对于动态页面获取文章数据的技能并不熟练。然后发现这种想法并不行，还是得借助外界提供现有的博客系统来写，于是乎停滞了一段时间，去搜索一系列相关的博客系统（合理来说应该是静态文件生成器），如 Hexo 或 WordPress，不过为啥选择 vuepress，因为我那时候正好在学 Vue，于是乎又开始新的一番折腾。不过也好，如果以后写技术文档，vuepress 也是一个非常推荐的选择。后续的话可能会去接触一下 Hexo 的 butterfly 主题，希望学到点东西，能给自己的博客在增添几份美感。</p><p>我所用的主题是<a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco</a> 也非常推荐用这个主题来写博客，下面会简单介绍这款主题</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reco-主题">reco 主题<a class="hash-link" href="#reco-主题" title="标题的直接链接">​</a></h2><blockquote><p>一款简洁而优雅的 vuepress 博客 &amp; 文档 主题。官方文档<a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">立即前往</a></p></blockquote><p><img loading="lazy" src="https://img.kuizuo.cn/152702-539475.png" alt="image-20200515152702435" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装"><strong>安装</strong><a class="hash-link" href="#安装" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">#全局安装vuepress-reco</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm install @vuepress-reco/theme-cli -g</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># 初始化 (blog改成你要的文件名)  然后填写项目标题等等</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">theme-cli init blog</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># 进入项目目录</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">cd blog</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">#安装依赖包</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm install</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># 运行</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm run dev</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># 编译</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm run build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>执行完<code>npm run dev</code>运行后，点击控制台的对应地址 你就能看到</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20200901191643031.png" alt="image-20200901191643031" class="img_ev3q"></p><p>当然，可能标题和一些会不一样，因为我更改了两处地方一处是<code>blog</code>下的<code>README.md</code>文件，文件结构如下</p><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token hr punctuation" style="color:#f8f8f2">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">home: true</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">heroText: 愧怍的个人空间</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">tagline: 我是愧怍,沉迷于代码无法自拔</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个是决定首页的样式，具体要什么背景，内容就因人而异。</p><p>另一处是<code>.vuepress\config.js</code>里的内容，内容有点多，我依次来讲</p><p>首先是开头几行的，title 决定你网站的标题，description 则是一开始出场界面的描述</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">module</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">title</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'愧怍的小站'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">description</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'如果代码都解决不了的话,那可能真的解决不了'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>随后你要关注的就是 themeConfig 下的 author，也就是作者名，改成你的名字就行</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"logo"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/logo.png"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"search"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"searchMaxSuggestions"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"lastUpdated"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Last Updated"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"author"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"愧怍"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"authorAvatar"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/logo.png"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"record"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"xxxx"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"startYear"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"2017"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其余的一些，比如<code>logo.png</code>与<code>avatar.png</code>啊，你换成你的想要的头像就行，他们都存放在.<code>vuepress\public</code>下,然后就是修改标题栏，他们都放在<code>themeConfig</code>下的<code>nav</code>里，这里你想修改哪个导航栏，就改哪个导航栏与标题，文末我会放上我的全部代码。</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token string-property property" style="color:#f92672">"themeConfig"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string-property property" style="color:#f92672">"nav"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Home"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"link"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"icon"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"reco-home"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"TimeLine"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"link"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/timeline/"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"icon"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"reco-date"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Docs"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"icon"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"reco-message"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"items"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"vuepress-reco"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string-property property" style="color:#f92672">"link"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"/docs/theme-reco/"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Contact"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"icon"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"reco-message"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"items"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"GitHub"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string-property property" style="color:#f92672">"link"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://github.com/recoluan"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string-property property" style="color:#f92672">"icon"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"reco-github"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>还有一个是主题自带的导航栏配置，这里你只需要更改 text 与 location 即可，其余不建议更改，你到时候写的文章都在依靠这两个</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token string-property property" style="color:#f92672">"blogConfig"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token string-property property" style="color:#f92672">"category"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"location"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Category"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token string-property property" style="color:#f92672">"tag"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"location"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string-property property" style="color:#f92672">"text"</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"Tag"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>zhuyi 你每次修改修改 config 的内容，就需要重新<code>npm run dev</code> vuepress 不支持热更新，也就是文件内容给修改了你需要重新编译运行，这是初学接触会遇到的坑。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="编写文章">编写文章<a class="hash-link" href="#编写文章" title="标题的直接链接">​</a></h3><p>现在有了一个页面风格不错，同时还是响应式页面，就差文章了。这时候你就需要了解 vuepress 的<a href="https://vuepress.vuejs.org/zh/guide/markdown.html#front-matter" target="_blank" rel="noopener noreferrer">Markdown 拓展</a>，我这里简单叙述一下，你该怎么写文章，下面是你要写文章的模板，你只需要关注几个内容就行了，</p><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block punctuation" style="color:#f8f8f2">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">title</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"> 笔记模板</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">date</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml datetime number" style="color:#ae81ff">2020-08-21</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tags</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">-</span><span class="token front-matter-block front-matter yaml language-yaml"> 笔记</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">categories</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">-</span><span class="token front-matter-block front-matter yaml language-yaml"> 个人学习笔记</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">author</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"> 愧怍</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">keys</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">-</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style="color:#a6e22e">'e9bc0e13a8a16cbb07b175d92a113126'</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">publish</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:#ae81ff">false</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">sticky</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml number" style="color:#ae81ff">1</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">isShowComments</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#f8f8f2">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:#ae81ff">false</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:#f8f8f2">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">::: tip</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">这是 tip</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!--more --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> 这是你的文章内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">正文内容</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>---</code> 所包裹的内容就文章简述像下面这样</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20200901034715126.png" alt="image-20200901034715126" class="img_ev3q"></p><p>要更改标题，日期外，你还需要更改的是分类 categories 和标签 tags，举个例子，现在我想写一篇文章，标题是 ES6 语法，那么我可以这么写</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token key atrule">tags</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> ES6</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> javascript</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">categories</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> JavaScript</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>分类只写一个，可以写<code>JavaScript</code>（分类建议大写），标签写多个，然后你把你写的这篇文章，切记放在<code>blogs</code>目录下(以后写的博客都放在这里)，同时建一个文件夹名为<code>JavaScript</code>，的然后把文章放在这个目录下，文章名随意，建议和标题一样，如 ES6 语法.md。便于你以后分类，请按这样的方式归类文章。</p><p>万一我不小心<code>- JavaScript</code> 写成了 <code>- Java</code>，而并没有文件夹是<code>Java</code>的，没关系，也就是你在分类上看到 Java，文章分类不取决于文件夹名，而取决于<code>categories</code> 只是文件夹名和<code>categories</code>名一致便于分类罢了。</p><p>在标签页上，就能看到 ES6，javascript，与 js 的标签，方便定位相关文章</p><p>接着把要写的文章内容全都在写在<!-- -->下即可，这里要注意一下，正文内容的标题，从二级标题开始，一级标题就已经是 title 了，在写也没用。</p><p>其余相关的 key 和 publish 等相关参数还请读者查看 reco 主题的官方文档<a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">立即前往</a>与 vuepress 官网<a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">立即前往</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="样式修改">样式修改<a class="hash-link" href="#样式修改" title="标题的直接链接">​</a></h3><p>可能你会局限于 reco 主题的默认样式，这里就说下如何修改样式。如果你会点前端，这应该来说非常简单。</p><ol><li>先参考这篇文章 <a href="https://vuepress-theme-reco.recoluan.com/views/other/reco-optimization.html" target="_blank" rel="noopener noreferrer">个人向优化</a>，我这里简单说明一下，首先一定要把<code>node_modules</code>里的<code>vuepress-theme-reco</code>这个主题文件夹整个放在<code>.vuepress\theme\</code>下，因为有些时候我们是要修改源码来更改样式的，如果你不这样做的话，而是直接修改<code>node_modules</code>里面的文件，你<code>npm install</code>就会覆盖你修改后的，所以要这一步操作。</li><li>当然你已经觉得 reco 主题都很完美了，不需要更改源码，那么你只需要在 <code>.vuepress/styles/</code> 来创建文件<code>index.styl</code>来方便地添加额外样式（还有一个默认样式，不推荐修改），然后把你要修改的样式代码写在<code>index.styl</code>文件里即可，例如我要修改首页的字体颜色，右键检查找到对应的 css 选择器，然后在<code>index.styl</code>添加就行，如</li></ol><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.home-blog</span><span class="token selector" style="color:#a6e22e;font-style:italic"> </span><span class="token selector class" style="color:#a6e22e;font-style:italic">.hero</span><span class="token selector" style="color:#a6e22e;font-style:italic"> h1</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">color</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token hexcode color">#fff</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署到服务器上">部署到服务器上<a class="hash-link" href="#部署到服务器上" title="标题的直接链接">​</a></h3><p>关于部署到服务器上，如果只是为了让别人能看到你搭建的博客，而不是要购买域名和服务器这些，直接参考文章<a href="https://lookroot.cn/views/article/vuepress.html#reco%E4%B8%BB%E9%A2%98" target="_blank" rel="noopener noreferrer">使用 vuepress 构建个人博客</a>即可，如果有服务器和域名我这里简单说下怎么个部署法。</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> run bulid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>首先执行上一行代码，然后在目录下会生成<code>public</code>文件夹，这个文件夹就是你所有的网站静态文件，这时候你需要你的服务器开启一个 web 服务，我这里用的是腾讯云 CentOS 与宝塔面板（至于这两个怎么搞，外面教程太多了），这里我就用 Nginx。然后如下图添加站点</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20200918194540550.png" alt="image-20200918194540550" class="img_ev3q"></p><p>因个人情况填写域名，FTP，数据库等等，然后通过 ftp 工具直接传文件至站点对应的目录下，然后访问服务器对应的 ip 地址或者个人域名解析就行了。</p><p>不过这个还要手动部署特别麻烦，有没有什么命令能一键部署的，有，这里我推荐一篇文章<a href="https://reinness.com/views/technology-sharing/vuepress/auto_deploy.html#index-js" target="_blank" rel="noopener noreferrer">一键部署到服务器</a>，解决了我当初一直用 ftp 的痛点。不过有个更简单的自动部署脚本，scp2，有兴趣可以自行查阅。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="自己搭建遇到的坑">自己搭建遇到的坑<a class="hash-link" href="#自己搭建遇到的坑" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="图片路径">图片路径<a class="hash-link" href="#图片路径" title="标题的直接链接">​</a></h3><p>首先就是 markdown 图片相对路径的坑，在写文章的话，如果涉及的本地图片引入，那么默认不操作的，也就是需要配置一下，默认在当前同级文件下，在创建一个文件名相同的文件夹来存放图片，我这里就以 Typora 为例，如图</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20200901180754412.png" alt="image-20200901180754412" class="img_ev3q"></p><p>其次，Typora 的路径是不带<code>./</code>，在 vuepress 会被编译成绝对路径。需要在前面添加上<code>./</code>，不过主题内已自带插件<code>markdown-it</code>，这个问题无需担心。</p><p>但常常我们的 md 文件名是中文的，这时候相对路径带有中文，但是 vuepress 会将中文路径进行 url 编码，</p><p>不会将你的这些图片编译到静态文件上，所以需要做一些操作</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="解决方法">解决方法<a class="hash-link" href="#解决方法" title="标题的直接链接">​</a></h4><ol><li>安装 markdown-it-disable-url-encode</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npm i markdown-it-disable-url-encode</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>在.vuepress/config.js 中配置如下</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">markdown</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#e6db74">extendMarkdown</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token parameter">md</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      md</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">use</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">require</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"markdown-it-disable-url-encode"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在你用 Typora 就引用本地图片就可以在 vuepress 中完美显示了。</p><blockquote><p>参考 <a href="https://segmentfault.com/a/1190000022275001" target="_blank" rel="noopener noreferrer">Vuepress 图片资源中文路径问题</a> 完美解决上述问题</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="引入-ui-组件库报错">引入 UI 组件库报错<a class="hash-link" href="#引入-ui-组件库报错" title="标题的直接链接">​</a></h3><p>如果你在该主题使用其他 UI 组件库，如 element，ant design，那么你很有可能会编译失败，官方解释</p><p><img loading="lazy" src="https://img.kuizuo.cn/image-20201223042921876.png" alt="image-20201223042921876" class="img_ev3q"></p><p>解决办法很简单，先删除 node_modules，然后<strong>再安装 ui 组件库</strong>依赖后，再安装其他依赖就行了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="放一些链接">放一些链接<a class="hash-link" href="#放一些链接" title="标题的直接链接">​</a></h2><p>放一些自己搭建这个博客过程中用到的一些链接地址，主要针对插件安装这些</p><ul><li><a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">VuePress 官网</a></li><li><a href="https://vuepress.github.io/" target="_blank" rel="noopener noreferrer">VuePress 社区</a></li><li><a href="https://github.com/vuepress/awesome-vuepress" target="_blank" rel="noopener noreferrer">awesome-vuepress</a></li><li><a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">reco 主题</a></li><li><a href="https://blog.csdn.net/sudadaipeng1/article/details/102971008#%e6%b7%bb%e5%8a%a0svg-label%e6%a0%87%e7%ad%be" target="_blank" rel="noopener noreferrer">一个非常详细的搭建教程</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p>就此，就可以好好的编写文章，主题固然方便，快捷搭建博客同时也别光顾这美化博客，注重分享文章，这才是博客的真正意义。reco 的主题也是希望帮助更多的人花更多的时间在内容创作上，而不是博客搭建上。</p><p>在使用 Vuepress 的一段时间，发现他更适合写的是文档，写博客可以，但花里胡哨的点少，比较简约，对于我这种又爱折腾的人来说，后续有可能会借鉴 Hexo 博客的一款主题 butterfly，将其源码复制到目前这个博客上，顺便巩固下自己的前端设计基础。</p><p>但还是要说的，要看自己到底要不要搭建博客，记录与分享文章，别盲目跟从。同时如果搭建博客，请把重心放在创作和笔记上，反复去美化主题对技术的提升远不如一篇有技术性的文章总结。</p><p>最后，希望我所分享的所有内容，正是你目前所遇到的难题，能为你排坑，便足矣。</p>]]></content:encoded>
            <category>blog</category>
            <category>vuepress</category>
            <category>project</category>
        </item>
    </channel>
</rss>